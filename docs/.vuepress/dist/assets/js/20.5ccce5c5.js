(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{378:function(s,t,n){"use strict";n.r(t);var a=n(44),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("â€‹      å‰ç«¯æ¡†æ¶ï¼Œå¿«é€Ÿå¼€å‘é¡µé¢ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸åç«¯apiå¿«é€Ÿæ­å»º")]),s._v(" "),n("h2",{attrs:{id:"react-memo-å’Œpurecomponent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-memo-å’Œpurecomponent"}},[s._v("#")]),s._v(" React.memo å’Œpurecomponent")]),s._v(" "),n("p",[s._v("reacr.memoæ§åˆ¶å‡½æ•°ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œreacr.purecomponentæ§åˆ¶ç±»ç»„ä»¶çš„é‡æ–°æ¸²æŸ“")]),s._v(" "),n("p",[s._v("ä½¿ç”¨æ—¶å°†å‡½æ•°ç»„ä»¶ä¼ é€’ç»™react.memoå‡½æ•°å°±å¯ä»¥")]),s._v(" "),n("p",[s._v("å®ä¾‹")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const Funcomponent = () =>{\n  return (\n     <div>\n     hiya!i am a functional component!\n     </div>\n  )\n}\nconst MemoFuncComponent = React.memo(Funcomponent)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("React.memoè¿”å›è‹±å›½çº¯ç»„ä»¶MemoFuncComponentï¼Œjsxä¸­å°†æ ‡è®°æ¬¡ç»„ä»¶ï¼Œæ¯å½“ç»„ä»¶çš„propså’Œstateå‘ç”Ÿå˜åŒ–æ—¶ï¼Œreactä¼šæ£€æŸ¥ä¸Šä¸€ä¸ªpropså’Œstateä¸ä¸‹ä¸€ä¸ªproså’Œstateæ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰é‡æ–°æ¸²æŸ“ï¼Œç›¸ç­‰åˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“")]),s._v(" "),n("p",[s._v("ç±»ç»„ä»¶ä¸­å³æˆpurecomponentå®ç°")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import React from 'react'\nclass TestC extends React.PureComponent{\n   constructor(props){\n     super(props);\n     this.state = {\n       conut: 0\n     }\n   }\n  \n  render(){\n    return(\n      <div>\n        {this.state.count}\n        <button onClick={()=>this.setState({count:1})}>\n          click me\n        </button>\n      </div>\n    )\n  }\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h2",{attrs:{id:"hook"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hook"}},[s._v("#")]),s._v(" Hook")]),s._v(" "),n("p",[s._v("Https://juejin.cn/post/6844903985338400782")]),s._v(" "),n("p",[s._v("Hookæ˜¯react16.8æ–°å¢çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä¸ç¼–å†™class çš„æƒ…å†µä¸‹ä½¿ç”¨stateå’Œå…¶ä»–reactç‰¹æ€§ï¼Œreactnativeä»0.59ç‰ˆæœ¬å¼€å§‹æ”¯æŒhookã€‚")]),s._v(" "),n("h3",{attrs:{id:"hookå‡ºç°çš„åŸå› ä»¥åŠè§£å†³çš„é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookå‡ºç°çš„åŸå› ä»¥åŠè§£å†³çš„é—®é¢˜"}},[s._v("#")]),s._v(" hookå‡ºç°çš„åŸå› ä»¥åŠè§£å†³çš„é—®é¢˜")]),s._v(" "),n("p",[s._v("Class component åŠ£åŠ¿")]),s._v(" "),n("ol",[n("li",[s._v("çŠ¶æ€é€»è¾‘éš¾å¤ç”¨ï¼šåœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ï¼Œå¯èƒ½è¦ç”¨åˆ° render props ï¼ˆæ¸²æŸ“å±æ€§ï¼‰æˆ–è€… HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ï¼Œä½†æ— è®ºæ˜¯æ¸²æŸ“å±æ€§ï¼Œè¿˜æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œéƒ½ä¼šåœ¨åŸå…ˆçš„ç»„ä»¶å¤–åŒ…è£¹ä¸€å±‚çˆ¶å®¹å™¨ï¼ˆä¸€èˆ¬éƒ½æ˜¯ div å…ƒç´ ï¼‰ï¼Œå¯¼è‡´å±‚çº§å†—ä½™ è¶‹å‘å¤æ‚éš¾ä»¥ç»´æŠ¤ï¼š")]),s._v(" "),n("li",[s._v("åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ··æ‚ä¸ç›¸å¹²çš„é€»è¾‘ï¼ˆå¦‚ï¼šåœ¨ componentDidMount ä¸­æ³¨å†Œäº‹ä»¶ä»¥åŠå…¶ä»–çš„é€»è¾‘ï¼Œåœ¨ componentWillUnmount ä¸­å¸è½½äº‹ä»¶ï¼Œè¿™æ ·åˆ†æ•£ä¸é›†ä¸­çš„å†™æ³•ï¼Œå¾ˆå®¹æ˜“å†™å‡º bug ï¼‰ ç±»ç»„ä»¶ä¸­åˆ°å¤„éƒ½æ˜¯å¯¹çŠ¶æ€çš„è®¿é—®å’Œå¤„ç†ï¼Œå¯¼è‡´ç»„ä»¶éš¾ä»¥æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶")]),s._v(" "),n("li",[s._v("this æŒ‡å‘é—®é¢˜ï¼šçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°æ—¶ï¼Œå¿…é¡»ç»‘å®š this")])]),s._v(" "),n("p",[s._v("Hookä¸èƒ½åœ¨classä¸­ä½¿ç”¨ï¼Œåªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œä¸ºå‡½æ•°ç»„ä»¶å‹¾å…¥react stateåŠç”Ÿå‘½å‘¨æœŸç­‰å‡½æ•°")]),s._v(" "),n("p",[s._v("reactå†…ç½®çš„hookæœ‰ä»¥ä¸‹")]),s._v(" "),n("p",[s._v("åŸºç¡€hookï¼šuseStateã€useEffectã€useContext")]),s._v(" "),n("p",[s._v("é¢å¤–çš„hookï¼šuseReducerã€useCallbackã€useMemoã€useRefã€useLayoutEffectã€useDebugValueã€useImperativeHandle")]),s._v(" "),n("h3",{attrs:{id:"usestate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[s._v("#")]),s._v(" useState")]),s._v(" "),n("p",[s._v("å®ä¾‹")]),s._v(" "),n("div",{staticClass:"language-jsx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("useState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("Example")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("setCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n     "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("you click ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v(" times")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("button")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("onClick")]),n("span",{pre:!0,attrs:{class:"token script language-javascript"}},[n("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n        click    \n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n     ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("ä¸Šè¿°useStateæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªstateå˜é‡countï¼Œå¹¶ç»™ä»–åˆå§‹åŒ–çš„å€¼0ã€‚é€šè¿‡setCountæ–¹æ³•æ›´æ–°å½“å‰countçš„å€¼ã€‚")]),s._v(" "),n("p",[s._v("è°ƒç”¨countæ—¶ä¸éœ€è¦ç»‘å®šthisç›´æ¥è°ƒç”¨ï¼Œæ›´æ–°countæ—¶ä¹Ÿç›´æ¥è°ƒç”¨setCountæ–¹æ³•")]),s._v(" "),n("p",[s._v("usestateå®šä¹‰stateæ—¶è¿”å›ä¸€ä¸ªæœ‰ä¸¤ä¸ªå€¼çš„æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªæ˜¯å½“å‰stateï¼Œç¬¬äºŒä¸ªæ˜¯æ›´æ–°stateçš„å‡½æ•°ï¼Œ")]),s._v(" "),n("p",[s._v("countä¸setCountä¸classä¸­çš„this.state.countå’Œthis.setstateç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯éœ€è¦æˆå¯¹åœ°è·å–ä»–ä»¬ã€‚")]),s._v(" "),n("p",[s._v("å¦‚æœåˆå§‹åŒ–stateæ—¶éœ€è¦å¤æ‚è®¡ç®—ï¼Œå¯ä»¥è°ƒç”¨å‡½æ•°ï¼Œæ­¤å‡½æ•°åªåœ¨åˆæ¬¡æ¸²æŸ“æ—¶è¢«è°ƒç”¨")]),s._v(" "),n("div",{staticClass:"language-jsx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("setState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" initialState"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("someExpensiveComputation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" initialState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("countä¸setCountä¸classä¸­çš„this.state.countå’Œthis.setstateç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯éœ€è¦æˆå¯¹åœ°è·å–ä»–ä»¬ã€‚")]),s._v(" "),n("p",[s._v("å¯ä»¥åŒæ—¶å£°æ˜å¤šä¸ªstateå˜é‡")]),s._v(" "),n("div",{staticClass:"language-jsx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ExamplewithManyStates")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("setAge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("usestate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fruit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("setFruit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("usestate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'banana'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("todos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("setTodos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("usestate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("text"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'å­¦ä¹ '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("Hookåªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ï¼Œä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨")]),s._v(" "),n("p",[s._v("å¯¹äºclassä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä¸ºäº†èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ç±»ä¼¼åŠŸèƒ½ï¼Œä½¿ç”¨useEffectæ–¹æ³•ï¼Œå®ƒç›¸å½“äºcomponentDidMountã€componentDidupdateã€componentWillUnmountä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ")]),s._v(" "),n("div",{staticClass:"language-jsx line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"useeffectå’Œuselayouteffect"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#useeffectå’Œuselayouteffect"}},[s._v("#")]),s._v(" useEffectå’ŒuseLayoutEffect")]),s._v(" "),n("p",[s._v("useEffecté»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚")]),s._v(" "),n("p",[s._v("useEffectåœ¨å…¨éƒ¨æ¸²æŸ“å®Œæ¯•åæ‰ä¼šæ‰§è¡Œï¼Œè€ŒuseLayoutEffectä¼šåœ¨æµè§ˆå™¨layoutä¹‹åï¼Œpaintingä¹‹å‰æ‰§è¡Œ")]),s._v(" "),n("p",[s._v("ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œä¸€èˆ¬å…ˆä½¿ç”¨useEffect")]),s._v(" "),n("p",[s._v("ä½¿ç”¨æ­¥éª¤ï¼š")]),s._v(" "),n("ol",[n("li",[s._v("ä½œä¸º componentDidMount ä½¿ç”¨ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºæ•°ç»„ "),n("code",[s._v("[]")])]),s._v(" "),n("li",[s._v("ä½œä¸º componentDidUpdate ä½¿ç”¨ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæŒ‡å®šä¾èµ–")]),s._v(" "),n("li",[s._v("ä½œä¸º componentWillUnmount ä½¿ç”¨ï¼Œé€šè¿‡ return")])]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('const BlinkyRender = () => {\n  const [value, setValue] = useState(0);\n\n  useEffect(() => {\n    document.querySelector(\'#x\').innerText = `value: 1000`\n  }, [value]);\n\n  return (\n    <div id="x" onClick={() => setValue(0)}>value: {value}</div>\n  );\n};\n\nReactDOM.render(\n  <BlinkyRender />,\n  document.querySelector("#root")\n);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"usereducer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usereducer"}},[s._v("#")]),s._v(" useReducer")]),s._v(" "),n("p",[s._v("useStateå†…éƒ¨å°±æ˜¯é useReducerå®ç°çš„ã€‚")]),s._v(" "),n("p",[s._v("useReducerå¯ä»¥ç†è§£ä¸ºæ˜¯ç”¨æ¥ä»£æ›¿ Redux çš„ï¼Œæˆ–è€…è¯´ï¼Œæ˜¯ä¸€ä¸ªåŠ å¼ºç‰ˆçš„ "),n("code",[s._v("useState")]),s._v("ã€‚")]),s._v(" "),n("p",[s._v("ä½¿ç”¨æ­¥éª¤ï¼š")]),s._v(" "),n("p",[s._v("1.åˆ›å»ºåˆå§‹å€¼initialState")]),s._v(" "),n("p",[s._v("2.åˆ›å»ºæ‰€æœ‰æ“ä½œreduce(state,action)")]),s._v(" "),n("p",[s._v("3.ä¼ ç»™useReducerï¼Œå¾—åˆ°è¯»å’Œå†™api")]),s._v(" "),n("p",[s._v("4.è°ƒç”¨ï¼Œå†™({type: 'æ“ä½œç±»å‹'})")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" initial "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("reducer")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("number "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"multi"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unknown type"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dispatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useReducer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("reducer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" initial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onClick")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" number"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onClick2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" number"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div className"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"App"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h1"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("h1"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("onClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("onClick2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("h3",{attrs:{id:"usecontext"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecontext"}},[s._v("#")]),s._v(" useContext")]),s._v(" "),n("p",[s._v("æ¥å—ä¸€ä¸ªcontextå¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥contextçš„å½“å‰å€¼ï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€")]),s._v(" "),n("p",[s._v("ä½¿ç”¨æ–¹æ³•ï¼š")]),s._v(" "),n("p",[s._v("1.ä½¿ç”¨C=createContext(initial)åˆ›å»ºä¸Šä¸‹æ–‡")]),s._v(" "),n("p",[s._v("2.ä½¿ç”¨<C.provider>åœˆå®šä½œç”¨åŸŸ")]),s._v(" "),n("p",[s._v("3.åœ¨ä½œç”¨åŸŸå†…ä½¿ç”¨ "),n("code",[s._v("useContext(C)")]),s._v(" æ¥ä½¿ç”¨ä¸Šä¸‹æ–‡")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('const C = createContext(null);\n\nfunction App() {\n  console.log("App æ‰§è¡Œäº†");\n  const [n, setN] = useState(0);\n  return (\n    <C.Provider value={{ n, setN }}>\n      <div className="App">\n        <Baba />\n      </div>\n    </C.Provider>\n  );\n}\n\nfunction Baba() {\n  const { n, setN } = useContext(C);\n  return (\n    <div>\n      æˆ‘æ˜¯çˆ¸çˆ¸ n: {n} <Child />\n    </div>\n  );\n}\n\nfunction Child() {\n  const { n, setN } = useContext(C);\n  const onClick = () => {\n    setN(i => i + 1);\n  };\n  return (\n    <div>\n      æˆ‘æ˜¯å„¿å­ æˆ‘å¾—åˆ°çš„ n: {n}\n      <button onClick={onClick}>+1</button>\n    </div>\n  );\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("h3",{attrs:{id:"usecallbackä¸usememo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecallbackä¸usememo"}},[s._v("#")]),s._v(" usecallbackä¸useMemo")]),s._v(" "),n("p",[s._v("useMemoæ—¶ä¸€ç§ç¼“å­˜æœºåˆ¶æé€Ÿï¼Œå½“ä»–çš„ä¾èµ–æœªå‘ç”Ÿæ”¹å˜æ—¶å°±ä¸ä¼šè§¦å‘é‡æ–°è®¡ç®—ï¼Œä¸vueä¸­computedç±»ä¼¼")]),s._v(" "),n("p",[s._v("useMemo")]),s._v(" "),n("p",[s._v("ä½¿ç”¨è¯­æ³•ï¼šuseMemo(()=> fn,deps)")]),s._v(" "),n("p",[s._v("æŠŠåˆ›å»ºå‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥useMemoï¼Œå®ƒåªä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—memo")]),s._v(" "),n("p",[s._v("useMemoä¸usecallbackçš„åŒºåˆ«ï¼š"),n("code",[s._v("useMemo")]),s._v("å¯ä»¥ç¼“å­˜æ‰€æœ‰å¯¹è±¡ï¼Œ"),n("code",[s._v("useCallback")]),s._v("åªèƒ½ç¼“å­˜å‡½æ•°ã€‚")]),s._v(" "),n("p",[n("code",[s._v("useCallback(x => log(x), [m])")]),s._v(" ç­‰ä»·äº "),n("code",[s._v("useMemo(() => x => log(x), [m])")])]),s._v(" "),n("h3",{attrs:{id:"useref"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#useref"}},[s._v("#")]),s._v(" useRef")]),s._v(" "),n("p",[s._v("ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ•°æ®çš„å¼•ç”¨ï¼Œå¹¶è®©è¿™ä¸ªæ•°æ®åœ¨ render è¿‡ç¨‹ä¸­å§‹ç»ˆ"),n("strong",[s._v("ä¿æŒä¸å˜")]),s._v("ã€‚")]),s._v(" "),n("p",[s._v("åŸºæœ¬è¯­æ³•ï¼š "),n("code",[s._v("const count = useRef(0)")]),s._v("ï¼Œè¯»å–ç”¨ "),n("code",[s._v("count.current")])]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("export function ReactEcharts(props) {\n  const {option, loading} = props\n  const container = useRef(null)\n  const chart = useRef(null)\n\n  useEffect(() => {\n    const width = document.documentElement.clientWidth\n    const c = container.current\n    console.log(c)\n    c.style.width = `${width - 20}px`\n    c.style.height = `${(width - 20) * 1.2}px`\n    chart.current = echarts.init(c, 'dark')\n\n  }, []) // [] - mounted on first time\n\n  useEffect(() => {\n    chart.current.setOption(option)\n  }, [option]) // when option change ç±»ä¼¼ vue çš„ watch\n\n  useEffect(() => {\n    if (loading) chart.current.showLoading()\n    else chart.current.hideLoading()\n  }, [loading])\n  return (\n    <div ref={container}/>\n  )\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h3",{attrs:{id:"è‡ªå®šä¹‰hookæ··ç”¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰hookæ··ç”¨"}},[s._v("#")]),s._v(" è‡ªå®šä¹‰hookæ··ç”¨")]),s._v(" "),n("p",[s._v("å¯ä»¥æŠŠä¸åŒçš„hookæŒ‰ç…§å®é™…çš„éœ€æ±‚æ··åˆèµ·æ¥ï¼Œå°è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°ä½¿ç”¨")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('const useList = () => {\n  const [list, setList] = useState(null);\n  useEffect(() => {\n    ajax("/list").then(list => {\n      setList(list);\n    });\n  }, []); // [] ç¡®ä¿åªåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œ\n  return {\n    list: list,\n    setList: setList\n  };\n};\nexport default useList;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"hookçš„ä½¿ç”¨è§„åˆ™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookçš„ä½¿ç”¨è§„åˆ™"}},[s._v("#")]),s._v(" hookçš„ä½¿ç”¨è§„åˆ™")]),s._v(" "),n("p",[s._v("hookæœ‰ä»¥ä¸‹ä½¿ç”¨è§„åˆ™ï¼š")]),s._v(" "),n("ol",[n("li",[s._v("ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook")]),s._v(" "),n("li",[s._v("ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚")]),s._v(" "),n("li",[s._v("é¡ºåºè°ƒç”¨ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ Hook åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© React èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ useState å’Œ useEffect è°ƒç”¨ä¹‹é—´ä¿æŒ hook çŠ¶æ€çš„æ­£ç¡®ã€‚")])]),s._v(" "),n("p",[s._v("åœ¨å•ä¸ªç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨å¤šä¸ª State Hook æˆ– Effect Hookï¼Œä½†æ˜¯React æ€ä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª "),n("code",[s._v("useState")]),s._v("ï¼Ÿç­”æ¡ˆæ˜¯ React é çš„æ˜¯ Hook è°ƒç”¨çš„é¡ºåºã€‚å› ä¸ºæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼ŒHook çš„è°ƒç”¨é¡ºåºåœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚åªè¦ Hook çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼ŒReact å°±èƒ½æ­£ç¡®åœ°å°†å†…éƒ¨ state å’Œå¯¹åº”çš„ Hook è¿›è¡Œå…³è”ã€‚")]),s._v(" "),n("p",[s._v("å¦‚æœåœ¨è¯­å¥ä¸­ä½¿ç”¨hook")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ğŸ”´ åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ Hook è¿åç¬¬ä¸€æ¡è§„åˆ™")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("persistForm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'formData'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸­ "),n("code",[s._v("name !== ''")]),s._v(" è¿™ä¸ªæ¡ä»¶å€¼ä¸º "),n("code",[s._v("true")]),s._v("ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæ‰§è¡Œè¿™ä¸ª Hookã€‚ä½†æ˜¯ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶æˆ‘ä»¬å¯èƒ½æ¸…ç©ºäº†è¡¨å•ï¼Œè¡¨è¾¾å¼å€¼å˜ä¸º "),n("code",[s._v("false")]),s._v("ã€‚æ­¤æ—¶çš„æ¸²æŸ“ä¼šè·³è¿‡è¯¥ Hookï¼ŒHook çš„è°ƒç”¨é¡ºåºå‘ç”Ÿäº†æ”¹å˜ï¼š")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Mary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. è¯»å–å˜é‡åä¸º name çš„ stateï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// useEffect(persistForm)  // ğŸ”´ æ­¤ Hook è¢«å¿½ç•¥ï¼")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Poppins'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ğŸ”´ 2 ï¼ˆä¹‹å‰ä¸º 3ï¼‰ã€‚è¯»å–å˜é‡åä¸º surname çš„ state å¤±è´¥")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("updateTitle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ğŸ”´ 3 ï¼ˆä¹‹å‰ä¸º 4ï¼‰ã€‚æ›¿æ¢æ›´æ–°æ ‡é¢˜çš„ effect å¤±è´¥")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("React ä¸çŸ¥é“ç¬¬äºŒä¸ª "),n("code",[s._v("useState")]),s._v(" çš„ Hook åº”è¯¥è¿”å›ä»€ä¹ˆã€‚React ä¼šä»¥ä¸ºåœ¨è¯¥ç»„ä»¶ä¸­ç¬¬äºŒä¸ª Hook çš„è°ƒç”¨åƒä¸Šæ¬¡çš„æ¸²æŸ“ä¸€æ ·ï¼Œå¯¹åº”çš„æ˜¯ "),n("code",[s._v("persistForm")]),s._v(" çš„ effectï¼Œä½†å¹¶éå¦‚æ­¤ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œåé¢çš„ Hook è°ƒç”¨éƒ½è¢«æå‰æ‰§è¡Œï¼Œå¯¼è‡´ bug çš„äº§ç”Ÿã€‚")]),s._v(" "),n("h3",{attrs:{id:"hookçš„é—­åŒ…é™·é˜±-è¿‡æœŸé—­åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookçš„é—­åŒ…é™·é˜±-è¿‡æœŸé—­åŒ…"}},[s._v("#")]),s._v(" Hookçš„é—­åŒ…é™·é˜±(è¿‡æœŸé—­åŒ…)")]),s._v(" "),n("p",[s._v("é—­åŒ…é™·é˜±å°±æ˜¯åœ¨React Hookè¿›è¡Œå¼€å‘æ—¶ï¼Œé€šè¿‡useStateå®šä¹‰çš„å€¼æ‹¿åˆ°çš„éƒ½ä¸æ˜¯æœ€æ–°çš„å€¼")]),s._v(" "),n("p",[s._v("ä¸Šä»£ç ")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const App = () =>{\n   const [count,setCount] = useState(0)\n   useEffect(()=>{\n     const timeId = setInterval(()=>{\n        setCount(count+1)\n     },1000)\n     return ()=>{clearInterval(timeId)}\n   },[])\n   return (\n      <span>{count}</span>\n   )\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("ä¸Šé¢çš„ä»£ç ä¸­ï¼Œcountå¹¶ä¸ä¼šå’Œç†æƒ³ä¸­ä¸€æ ·æ¯è¿‡ä¸€ç§’è‡ªåŠ¨+1å¹¶æ›´æ–°DOMï¼Œè€Œæ˜¯ä»0å˜æˆ1åï¼Œconsoleæ‰“å°å‡ºçš„countä¸€ç›´æ˜¯è®¾ç«‹çš„é»˜è®¤å€¼0")]),s._v(" "),n("p",[s._v("å› ä¸ºuseEffectçš„ä¾èµ–æ•°ç»„æ˜¯ç©ºæ•°ç»„ï¼Œé‚£setIntervalé‡Œé¢çš„countæ˜¯é€šè¿‡é—­åŒ…å–å¾—çš„å€¼ï¼Œä»–è¯»å–åˆ°çš„ç¬¬ä¸€æ¬¡çš„countï¼Œå¹¶ä¸”useEffectå¹¶æ²¡æœ‰æ›´æ–°ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯0")]),s._v(" "),n("p",[s._v("å¦‚æœå»æ‰useEffectçš„ä¾èµ–æ•°ç»„å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç„¶è€Œä¼šé€ æˆæ¯æ¬¡Appç»„ä»¶æ¸²æŸ“éƒ½ä¼šè¿è¡ŒuseEffecté‡Œé¢çš„å‡½æ•°ï¼Œå°±ä¼šé€ æˆä¸å¿…è¦çš„æµªè´¹å’Œéšè—çš„bug")]),s._v(" "),n("h4",{attrs:{id:"è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ"}},[s._v("#")]),s._v(" è§£å†³æ–¹æ¡ˆ")]),s._v(" "),n("p",[n("strong",[s._v("ä½¿ç”¨setstateå›è°ƒ")])]),s._v(" "),n("p",[s._v("æŠŠsetCount(count+1)æ”¹æˆsetCount(count=>count+1)ï¼Œå‡½æ•°å¼æ›´æ–°")]),s._v(" "),n("p",[s._v("å®ƒå…è®¸æˆ‘ä»¬æŒ‡å®šstateå¦‚ä½•æ”¹å˜è€Œä¸å¼•ç”¨å½“å‰çš„stateï¼Œå› ä¸ºå›è°ƒå‡½æ•°ä¸­çš„å‚æ•°æ˜¯æœ€æ–°çš„countå€¼")]),s._v(" "),n("p",[n("strong",[s._v("ä½¿ç”¨useReducerä»£æ›¿")])]),s._v(" "),n("p",[s._v("æŠŠsetCountæ”¹æˆuseReducerçš„dispatchï¼Œå› ä¸ºuseReducerçš„dispatchçš„èº«ä»½æ°¸è¿œæ˜¯ç¨³å®šçš„ã€‚å³ä½¿reducerå‡½æ•°æ˜¯å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨ä¸”ä¾èµ–props")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const setCountReducer = (state,action)=>{\n   switch(action.type){\n     case 'add':\n       return state+action.value \n     case 'minus':\n       return state-action.value\n     default: \n       return state\n   }\n}\n\nconst App = () =>{\n  const [count,dispatch] = useReducer(setCountReducer,0)\n  useEffect(()=>{\n    const timeId = setInterval(()=>{\n      dispatch({type:'add',value:1})\n    },1000)\n    return ()=> clearInterval(timeId)\n  },[])\n  return (\n     <span>{count}</span>\n  )\n} \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[n("strong",[s._v("ä½¿ç”¨useRefå­˜å‚¨å˜é‡")])]),s._v(" "),n("p",[s._v("é€šè¿‡useRefç”Ÿæˆçš„å¯¹è±¡é»˜è®¤éƒ½æ˜¯{current:{}},æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä»–ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸ä¼šå› ä¸ºç»„ä»¶çš„é‡æ–°æ¸²æŸ“å¯¼è‡´å–å¾—é—­åŒ…çš„å¯¹è±¡å¼•ç”¨ï¼Œå› æ­¤å®ƒä¸ä»…å¯ä»¥ç»‘å®šDOMï¼Œä¹Ÿå¯ä»¥ç»‘å®šä»»æ„æˆ‘ä»¬æƒ³ç»‘å®šçš„æ•°æ®")]),s._v(" "),n("p",[s._v("æ”¹é€ ä»£ç å¦‚ä¸‹")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const App = () =>{\n  const [count,setCount] = useState(0)\n  const countRef = useRef()\n  countRef.current = count\n  useEffect(()=>{\n    const timeId = setInterval(()=>{\n      setCount(countRef.current+1)\n    },1000)\n    return ()=> clearInterval(timeId)\n  },[])\n  return (\n     <span>{countRef.current}</span>\n  )\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h4",{attrs:{id:"å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ"}},[s._v("#")]),s._v(" å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ")]),s._v(" "),n("p",[s._v("å¼‚æ­¥å‡½æ•°")]),s._v(" "),n("p",[s._v("ä½¿ç”¨setIntervalå’ŒsetTimeoutå‡½æ•°æ—¶ï¼Œå†…éƒ¨çš„å˜é‡è¯»å–çš„æ˜¯å¼‚æ­¥å‡½æ•°åœ¨è¿è¡Œæ—¶ç»„ä»¶å¤„åœ¨é—­åŒ…æƒ…å†µä¸‹çš„å½“å‰å€¼ï¼Œå› ä¸ºåœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨çš„æ•°æ®å¹¶ä¸ä¼šåœ¨domæ›´æ–°ä¹‹åæ›´æ–°ä¸ºæ–°çš„å€¼ï¼Œä»–ä»¬çš„å˜é‡å¼•ç”¨å·²ç»ä¸æ˜¯åŒä¸€ä¸ªäº†")]),s._v(" "),n("p",[s._v("ä¸Šä»£ç ")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const App = ()=>{\n  const [count,setCount] = useState(0)\n  const consoleCount = ()=>{\n    const timeId = setTimeout(()=>{\n       console.log(count)\n    },2000)\n    return ()=> clearTimeout(timeId)\n  }\n  return (\n    <div>\n      <span>{count}</span>\n      <button onClick={()=>setCount(count+1)}>æŒ‰æˆ‘åŠ 1</button>\n      <button onClick={consoleCount}>è¾“å‡ºcount</button>\n    </div>\n  )\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("å…ˆç‚¹å‡»ä¸‰æ¬¡åŠ 1æŒ‰é’®ï¼ŒæŠŠcountå˜æˆ3ï¼Œç„¶åç‚¹å‡»è¾“å‡ºæŒ‰é’®ï¼Œæ­¤æ—¶å†ç‚¹å‡»åŠ 1æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºçš„countè¿˜æ˜¯3ï¼Œå³è¾“å‡ºçš„countæ˜¯æ—§å€¼")]),s._v(" "),n("p",[s._v("domç›‘å¬å‡½æ•°äº‹ä»¶ä¸­çš„åŒ¿åå‡½æ•°")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("const App = () =>{\n    const [count,setCount] = useState(0)\n    const consoleCount = ()=>{\n      console.log(count)\n    }\n    useEffect(()=>{\n      window.addEventListener('scroll',consoleCount)\n      return ()=>{\n         window.removeEventListener('scroll',consoleCount)\n      }\n    },[])\n  \n    return (\n       <div style={{height:'400vh'}}>\n         <span>{count}</span>\n        <button onClick={()=>setCount(count+1)}>æŒ‰æˆ‘åŠ 1</button>\n      <button onClick={consoleCount}>è¾“å‡ºcount</button>\n      </div>\n    )\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("å¯ä»¥çœ‹åˆ°ä¸ç®¡é¡µé¢æ€ä¹ˆæ»šåŠ¨ï¼Œè¾“å‡ºçš„countæ°¸è¿œæ˜¯0ã€‚å› ä¸ºaddEventListeneråªåœ¨useEffectåˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œäº†ç»‘å®šï¼Œæ‰§è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œcountè¯»å–çš„æ˜¯ç»‘å®šå‡½æ•°æ—¶çš„æ—§å€¼")]),s._v(" "),n("p",[s._v("ä½¿ç”¨useRef()å­˜å‚¨å®ä¾‹å˜é‡ä¹Ÿèƒ½è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯reactå®˜æ–¹æ¨èçš„æ–¹æ³•ã€‚")]),s._v(" "),n("h3",{attrs:{id:"ä½¿ç”¨react-hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨react-hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡"}},[s._v("#")]),s._v(" ä½¿ç”¨react hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡")]),s._v(" "),n("p",[s._v("ä½¿ç”¨useRefä¿å­˜å­ç»„ä»¶çŠ¶æ€ï¼Œå½“çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œç›´æ¥æ›´æ–°refå€¼ï¼Œå½“å­ç»„ä»¶clickæ—¶ï¼Œåœ¨æ›´æ–°refå€¼åï¼Œå†è°ƒç”¨ä¸€æ¬¡updateè§¦å‘å­ç»„ä»¶æ¸²æŸ“")]),s._v(" "),n("div",{staticClass:"language-react line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import React,{useEffect,useMemo,useState,useRef} from 'react'\nfunction A(){\n   const [count,setCount] = useState(0);\n   \n   return (\n      <div>\n        <p>æˆ‘æ˜¯çˆ¶ç»„ä»¶</p>\n        <p>çˆ¶ç»„ä»¶çš„countæ˜¯{count}</p>\n        <button>click</button>\n        <B count={count}/>\n      </div>\n   );\n}\n\nconst B = React.memo(({count:}{count:number})=>{\n  const numberRef = useRef(0);\n  const [,update] = useState({});\n  const updateNumber = () =>{\n    numberRef.current++;\n    update({});\n  };\n  \n  useMemo(()=>{\n    numberRef.current = count;\n  },[count])\n  \n  console.log('å­ç»„ä»¶Render')\n  \n  return(\n     <div>\n       <p>æˆ‘æ˜¯å­ç»„ä»¶</p>\n       <p>å­ç»„ä»¶çš„numberæ˜¯{numberRef.current}</p>\n       <button onClick={updateNumber}>click</button>\n     </div>\n  )\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("h2",{attrs:{id:"fiberæ¶æ„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fiberæ¶æ„"}},[s._v("#")]),s._v(" Fiberæ¶æ„")]),s._v(" "),n("p",[s._v("react16ç›¸æ¯”äºreact15ï¼Œç»è¿‡é‡æ„åReconciliationå’ŒRenderingè¢«åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„é˜¶æ®µã€‚")]),s._v(" "),n("h3",{attrs:{id:"fiberæ¶æ„ä¸­çš„åŸºæœ¬æ¦‚å¿µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fiberæ¶æ„ä¸­çš„åŸºæœ¬æ¦‚å¿µ"}},[s._v("#")]),s._v(" fiberæ¶æ„ä¸­çš„åŸºæœ¬æ¦‚å¿µ")]),s._v(" "),n("p",[s._v("Fiber çš„æ¶æ„æœ‰ä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼šåè°ƒ/æ¸²æŸ“ å’Œ æäº¤ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("reconcileråè°ƒé˜¶æ®µ")]),s._v("ï¼šå½“ç»„ä»¶æ¬¡åˆå§‹åŒ–å’Œå…¶åçš„çŠ¶æ€æ›´æ–°ä¸­ï¼ŒReactä¼šåˆ›å»ºä¸¤é¢—ä¸ç›¸åŒçš„è™šæ‹Ÿæ ‘ï¼ŒReact éœ€è¦åŸºäºè¿™ä¸¤æ£µæ ‘ä¹‹é—´çš„å·®åˆ«æ¥åˆ¤æ–­å¦‚ä½•æœ‰æ•ˆç‡çš„æ›´æ–° UI ä»¥ä¿è¯å½“å‰ UI ä¸æœ€æ–°çš„æ ‘ä¿æŒåŒæ­¥ï¼Œè®¡ç®—æ ‘å“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°ã€‚"),n("strong",[s._v("react diffç®—æ³•å°±å‘ç”Ÿåœ¨è¿™ä¸ªé˜¶æ®µ")])]),s._v(" "),n("p",[n("strong",[s._v("rendereré˜¶æ®µ")]),s._v("ï¼šæ¸²æŸ“å™¨è´Ÿè´£å°†æ‹¿åˆ°çš„è™šæ‹Ÿç»„ä»¶æ ‘ä¿¡æ¯ï¼Œæ ¹æ®å…¶å¯¹åº”ç¯å¢ƒçœŸå®åœ°æ›´æ–°æ¸²æŸ“åˆ°åº”ç”¨ä¸­ã€‚æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹ä¸€ä¸‹danè‡ªå·±çš„åšå®¢ä¸­çš„æ–‡ç« =ã€‹"),n("a",{attrs:{href:"https://overreacted.io/react-as-a-ui-runtime/#renderers",target:"_blank",rel:"noopener noreferrer"}},[s._v("è¿è¡Œæ—¶çš„react=ã€‹æ¸²æŸ“å™¨"),n("OutboundLink")],1),s._v("ï¼Œä»‹ç»äº†reactçš„Rendereræ¸²æŸ“å™¨å¦‚react-domå’Œreact nativeç­‰ï¼Œå…¶å¯ä»¥æ ¹æ®ä¸åŒçš„ä¸»ç¯å¢ƒæ¥ç”Ÿæˆä¸åŒçš„å®ä¾‹ã€‚")]),s._v(" "),n("p",[s._v("åè°ƒé˜¶æ®µçš„å·¥ä½œï¼š")]),s._v(" "),n("p",[s._v("åè°ƒé˜¶æ®µé€šå¸¸è¢«ç§°ä¸ºâ€œæ¸²æŸ“é˜¶æ®µâ€ã€‚è¿™æ˜¯Reactéå†ç»„ä»¶æ ‘çš„é˜¶æ®µï¼Œå¹¶ä¸”ï¼š")]),s._v(" "),n("ul",[n("li",[s._v("æ›´æ–°çŠ¶æ€å’Œå±æ€§")]),s._v(" "),n("li",[s._v("è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­")]),s._v(" "),n("li",[s._v("è·å–ç»„ä»¶çš„"),n("code",[s._v("children")])]),s._v(" "),n("li",[s._v("å°†å®ƒä»¬ä¸ä¹‹å‰çš„"),n("code",[s._v("children")]),s._v("è¿›è¡Œå¯¹æ¯”")]),s._v(" "),n("li",[s._v("å¹¶è®¡ç®—å‡ºéœ€è¦æ‰§è¡Œçš„DOMæ›´æ–°")])]),s._v(" "),n("p",[n("strong",[s._v("fiberå¯¹è±¡")])]),s._v(" "),n("p",[s._v("ä¸€ä¸ªfiberå¯¹è±¡æ˜¯è¡¨å¾workçš„ä¸€ä¸ªåŸºæœ¬å•å…ƒã€‚")]),s._v(" "),n("p",[s._v("æ¯ä¸€ä¸ªReactå…ƒç´ å¯¹åº”ä¸€ä¸ªfiberå¯¹è±¡ï¼Œfibersæ˜¯ä¸€ä¸ªåŸºäºchild, sibling å’Œ returnå±æ€§æ„æˆçš„é“¾è¡¨ã€‚ fiberå¯¹è±¡æ ¸å¿ƒçš„å±æ€§å’Œå«ä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š")]),s._v(" "),n("p",[n("strong",[s._v("childã€silbingã€return")])]),s._v(" "),n("p",[s._v("fiberå¯¹è±¡çš„å±æ€§ï¼Œè¿™äº›å±æ€§æŒ‡å‘å…¶ä»–fiberï¼Œè¡¨å¾å½“å‰å·¥ä½œå•å…ƒçš„ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œç”¨äºæè¿°fiberçš„é€’å½’æ ‘ç»“æ„ã€‚")]),s._v(" "),n("p",[s._v("childï¼š å¯¹åº”äºçˆ¶fiberèŠ‚ç‚¹çš„å­fiber silbingï¼š å¯¹åº”äºfiberèŠ‚ç‚¹çš„åŒç±»å…„å¼ŸèŠ‚ç‚¹ returnï¼š å¯¹åº”äºfiberèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹")]),s._v(" "),n("p",[s._v("ç›¸å¯¹äºReact v16ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ­£æ˜¯å¾—ç›Šäºfiberå¯¹è±¡çš„childã€sibingå’Œreturnå±æ€§æ„æˆçš„å•é“¾è¡¨ç»“æ„ä»¥åŠfiberå¯¹è±¡ä¸­å­˜å‚¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œæ‰ä½¿å¾—schedulerå¯ä»¥è¾¾åˆ°æš‚åœã€ä¸­æ­¢ã€é‡æ–°å¼€å§‹ç­‰å¹¶å‘æ¨¡å¼çš„æ–°ç‰¹æ€§ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("work")])]),s._v(" "),n("p",[s._v("åœ¨React reconciliationè¿‡ç¨‹ä¸­å‡ºç°çš„å„ç§æ¯”å¦‚state updateï¼Œprops update æˆ– refs updateç­‰å¿…é¡»æ‰§è¡Œè®¡ç®—çš„æ´»åŠ¨ï¼Œè¿™äº›æ´»åŠ¨æˆ‘ä»¬åœ¨Fiberæ¶æ„ä½“ç³»é‡Œé¢ç»Ÿä¸€ç§°ä¹‹ä¸º â€œworkâ€ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("worktag")])]),s._v(" "),n("p",[s._v("workTag ç±»å‹ï¼Œç”¨äºæè¿°ä¸€ä¸ªReactå…ƒç´ çš„ç±»å‹ï¼Œå³ä¸ºä¸Šè¿°fiberå¯¹è±¡çš„ fiber.tag")]),s._v(" "),n("p",[n("strong",[s._v("stateNode")])]),s._v(" "),n("p",[s._v("ä¸€ä¸ªç»„ä»¶ã€ä¸€ä¸ªDOMèŠ‚ç‚¹æˆ–å…¶ä»–è·ŸfiberèŠ‚ç‚¹ç›¸å…³è”çš„Reactå…ƒç´ çš„å®ä¾‹çš„å¼•ç”¨ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥è¯´è¿™ä¸ªå±æ€§æ˜¯ç”¨äºä¿å­˜ä¸ä¸€ä¸ªfiberç›¸å…³è”çš„æœ¬åœ°çŠ¶æ€ã€‚å³ä¸Šè¿°fiberå¯¹è±¡çš„ fiber.stateNodeã€‚")]),s._v(" "),n("p",[n("strong",[s._v("currentæ ‘å’ŒworkInProgressæ ‘")])]),s._v(" "),n("p",[s._v("é¦–æ¬¡æ¸²æŸ“åï¼ŒReactç”Ÿæˆä¸€ä¸ªç”¨äºæ¸²æŸ“UIå¹¶èƒ½æ˜ å°„åº”ç”¨çŠ¶æ€çš„fiberæ ‘ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºcurrentæ ‘ã€‚å½“Reactéå†currentæ ‘ï¼Œå®ƒä¸ºæ¯ä¸€ä¸ªå­˜åœ¨çš„fiberèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªalternateå±æ€§çš„æ›¿ä»£èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹æ„æˆworkInProgressæ ‘ã€‚")]),s._v(" "),n("p",[s._v("æ‰€æœ‰å‘ç”Ÿupdateçš„workéƒ½åœ¨workInProgressæ ‘ä¸­æ‰§è¡Œï¼Œå¦‚æœalternateå±æ€§è¿˜æœªåˆ›å»ºï¼ŒReactå°†åœ¨å¤„ç†updateä¹‹å‰åœ¨createWorkInProgresså‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªcurrentæ ‘çš„å‰¯æœ¬ï¼Œå³å½¢æˆworkInProgressæ ‘ï¼Œç”¨äºæ˜ å°„æ–°çš„çŠ¶æ€å¹¶åœ¨commité˜¶æ®µåˆ·æ–°åˆ°å±å¹•ã€‚")]),s._v(" "),n("p",[n("strong",[s._v("æ‰€æœ‰è¿™äº›æ´»åŠ¨éƒ½è¢«ç§°ä¸ºFiberå†…éƒ¨çš„å·¥ä½œã€‚")]),s._v(" éœ€è¦å®Œæˆçš„å·¥ä½œç±»å‹å–å†³äºReact Elementçš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œå¯¹äº "),n("code",[s._v("Class Component")]),s._v(" Reactéœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªç±»ï¼Œç„¶è€Œå¯¹äº"),n("code",[s._v("Functional Component")]),s._v("å´ä¸éœ€è¦ã€‚")]),s._v(" "),n("p",[s._v("åœ¨æµè§ˆå™¨ä¸­GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆç›¸å½“äºè¢«å†»ç»“äº†ï¼‰ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚")]),s._v(" "),n("p",[n("strong",[s._v("Stack Reconciler å’Œ fiber reconciliation")])]),s._v(" "),n("p",[s._v("React16 æ¨å‡ºFiberä¹‹å‰åè°ƒç®—æ³•æ˜¯Stack Reconcilerï¼Œå³é€’å½’éå†æ‰€æœ‰çš„ Virtual DOM èŠ‚ç‚¹æ‰§è¡ŒDiffç®—æ³•ï¼Œä¸€æ—¦å¼€å§‹ä¾¿æ— æ³•ä¸­æ–­ï¼Œç›´åˆ°æ•´é¢—è™šæ‹Ÿdomæ ‘æ„å»ºå®Œæˆåæ‰ä¼šé‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œå› å…¶JavaScriptå•çº¿ç¨‹çš„ç‰¹ç‚¹ï¼Œè‹¥å½“ä¸‹ç»„ä»¶å…·æœ‰å¤æ‚çš„åµŒå¥—å’Œé€»è¾‘å¤„ç†ï¼Œdiffä¾¿ä¼šå µå¡UIè¿›ç¨‹ï¼Œä½¿åŠ¨ç”»å’Œäº¤äº’ç­‰ä¼˜å…ˆçº§ç›¸å¯¹è¾ƒé«˜çš„ä»»åŠ¡æ— æ³•ç«‹å³å¾—åˆ°å¤„ç†ï¼Œé€ æˆé¡µé¢å¡é¡¿æ‰å¸§ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚åœ¨"),n("code",[s._v("React15")]),s._v("åŠä¹‹å‰ï¼Œ"),n("code",[s._v("React")]),s._v("ä¼šé€’å½’æ¯”å¯¹"),n("code",[s._v("VirtualDOM")]),s._v("æ ‘ï¼Œæ‰¾å‡ºéœ€è¦å˜åŠ¨çš„èŠ‚ç‚¹ï¼Œç„¶ååŒæ­¥æ›´æ–°å®ƒä»¬ã€‚è¿™ä¸ªè¿‡ç¨‹"),n("code",[s._v("React")]),s._v("ç§°ä¸º"),n("code",[s._v("Reconciliation(åè°ƒ)")]),s._v("ã€‚")]),s._v(" "),n("p",[s._v("åœ¨"),n("code",[s._v("Reconciliation")]),s._v("æœŸé—´ï¼Œ"),n("code",[s._v("React")]),s._v("ä¼šä¸€ç›´å ç”¨ç€æµè§ˆå™¨èµ„æºï¼Œä¸€åˆ™ä¼šå¯¼è‡´ç”¨æˆ·è§¦å‘çš„äº‹ä»¶å¾—ä¸åˆ°å“åº”, äºŒåˆ™ä¼šå¯¼è‡´æ‰å¸§ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ„Ÿè§‰åˆ°å¡é¡¿ã€‚")]),s._v(" "),n("p",[s._v("é’ˆå¯¹ä¸Šè¿°ç—›ç‚¹ï¼Œæˆ‘ä»¬æœŸæœ›å°†**â€æ‰¾å‡ºæœ‰å¢åˆ æ”¹çš„èŠ‚ç‚¹â€œï¼Œâ€ç„¶ååŒæ­¥æ›´æ–°ä»–ä»¬â€œ"),n("strong",[s._v("è¿™ä¸ªè¿‡ç¨‹åˆ†è§£æˆä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œæˆ–è€…é€šè¿‡æŸç§æ–¹å¼èƒ½è®©æ•´ä¸ªè¿‡ç¨‹")]),s._v("å¯ä¸­æ–­å¯æ¢å¤çš„æ‰§è¡Œ**ï¼Œç±»ä¼¼äºå¤šä»»åŠ¡æ“ä½œç³»ç»Ÿçš„å•å¤„ç†å™¨è°ƒåº¦ã€‚")]),s._v(" "),n("p",[s._v("fiberçš„æ ¸å¿ƒç›®æ ‡ï¼š")]),s._v(" "),n("ul",[n("li",[s._v("æŠŠå¯ä¸­æ–­çš„å·¥ä½œæ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡")]),s._v(" "),n("li",[s._v("ä¸ºä¸åŒç±»å‹çš„æ›´æ–°åˆ†é…ä»»åŠ¡ä¼˜å…ˆçº§")]),s._v(" "),n("li",[s._v("æ›´æ–°æ—¶èƒ½å¤Ÿæš‚åœï¼Œç»ˆæ­¢ï¼Œå¤ç”¨æ¸²æŸ“ä»»åŠ¡")])]),s._v(" "),n("p",[s._v("è¿™æ˜¯ä¸€ç§"),n("strong",[s._v("åˆä½œå¼è°ƒåº¦")]),s._v("ï¼Œéœ€è¦ç¨‹åºå’Œæµè§ˆå™¨äº’ç›¸ä¿¡ä»»ã€‚æµè§ˆå™¨ä½œä¸ºé¢†å¯¼è€…ï¼Œä¼šåˆ†é…æ‰§è¡Œæ—¶é—´ç‰‡ï¼ˆå³requestIdleCallbackï¼‰ç»™ç¨‹åºå»é€‰æ‹©è°ƒç”¨ï¼Œç¨‹åºéœ€è¦æŒ‰ç…§çº¦å®šåœ¨è¿™ä¸ªæ—¶é—´å†…æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶å°†æ§åˆ¶æƒäº¤è¿˜æµè§ˆå™¨ã€‚")]),s._v(" "),n("p",[s._v("Fiberæ˜¯ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼ŒReactå°±ä¼šæ£€æŸ¥ç°åœ¨è¿˜å‰©å¤šå°‘æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰æ—¶é—´å°±å°†æ§åˆ¶æƒäº¤è¿˜æµè§ˆå™¨ï¼›ç„¶åç»§ç»­è¿›è¡Œä¸‹ä¸€å¸§çš„æ¸²æŸ“ã€‚")]),s._v(" "),n("p",[s._v("ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†")]),s._v(" "),n("p",[s._v("å¦‚æœæ²¡æœ‰é•¿å­ï¼Œåˆ™æ ‡è¯†å½“å‰èŠ‚ç‚¹éå†å®Œæˆã€‚"),n("code",[s._v("completeUnitOfWork")]),s._v("ä¸­æ”¶é›†")]),s._v(" "),n("p",[s._v("å¦‚æœæ²¡æœ‰ç›¸é‚»å…„å¼Ÿï¼Œåˆ™è¿”å›çˆ¶èŠ‚ç‚¹æ ‡è¯†çˆ¶èŠ‚ç‚¹éå†å®Œæˆã€‚"),n("code",[s._v("completeUnitOfWork")]),s._v("ä¸­æ”¶é›†")]),s._v(" "),n("p",[s._v("å¦‚æœæ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ ‡è¯†æ‰€æœ‰éå†å®Œæˆã€‚"),n("code",[s._v("over")])]),s._v(" "),n("p",[s._v("å¦‚æœæœ‰é•¿å­ï¼Œåˆ™éå†ï¼›"),n("code",[s._v("beginWork")]),s._v("ä¸­æ”¶é›†ï¼›æ”¶é›†å®Œåè¿”å›å…¶é•¿å­ï¼Œå›åˆ°"),n("code",[s._v("ç¬¬2æ­¥")]),s._v("å¾ªç¯éå†")]),s._v(" "),n("p",[s._v("å¦‚æœæœ‰ç›¸é‚»å…„å¼Ÿï¼Œåˆ™éå†ï¼›"),n("code",[s._v("beginWork")]),s._v("ä¸­æ”¶é›†ï¼›æ”¶é›†å®Œåè¿”å›å…¶é•¿å­ï¼Œå›åˆ°"),n("code",[s._v("ç¬¬2æ­¥")]),s._v("å¾ªç¯éå†")]),s._v(" "),n("h3",{attrs:{id:"renderé˜¶æ®µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#renderé˜¶æ®µ"}},[s._v("#")]),s._v(" Renderé˜¶æ®µ")]),s._v(" "),n("p",[n("strong",[s._v("enqueueSetState")])]),s._v(" "),n("p",[s._v("ä»¥ç±»ç»„ä»¶ä¸ºä¾‹ï¼ŒReactDOMä¸­çš„updaterå¯¹è±¡æ˜¯ä¸€ä¸ªclassComponentUpdaterï¼Œç”¨äºè·å–fiberå®ä¾‹ã€updateé˜Ÿåˆ—å’Œè°ƒåº¦ work")]),s._v(" "),n("p",[s._v("fiber.updateQueueæ˜¯ä¸€ä¸ªå…·æœ‰updatesä¼˜å…ˆçº§çš„é“¾è¡¨ï¼ˆUpdateQueue is a linked list of prioritized updatesï¼‰")]),s._v(" "),n("p",[s._v("è·ŸFiberä¸€æ ·ï¼Œupdate é˜Ÿåˆ—ä¹Ÿæ˜¯æˆå¯¹å‡ºç°ï¼šä¸€ä¸ªä»£è¡¨å±å¹•å¯è§çŠ¶æ€çš„ current é˜Ÿåˆ—ï¼Œä¸€ä¸ªåœ¨commité˜¶æ®µä¹‹å‰å¯è¢«å¼‚æ­¥è®¡ç®—å’Œå¤„ç†çš„work-in-progress é˜Ÿåˆ—ã€‚å¦‚æœä¸€ä¸ªwork-in-progressé˜Ÿåˆ—åœ¨å®Œæˆä¹‹å‰è¢«ä¸¢å¼ƒï¼Œåˆ™å°†ä¼šé€šè¿‡å…‹éš†ä¸€ä¸ªcurenté˜Ÿåˆ—æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„work-in-progressé˜Ÿåˆ—ã€‚")]),s._v(" "),n("p",[s._v("å‡½æ•°è°ƒç”¨æ ˆï¼šperformUnitOfWork --\x3e beginWork --\x3e updateClassComponent --\x3e finishedComponent --\x3e completeUnitOfWork")]),s._v(" "),n("p",[n("strong",[s._v("completeUnitOfWork")])]),s._v(" "),n("p",[s._v("Reactåœ¨completeUnitOfWorkå‡½æ•°ä¸­æ„å»ºeffect-list")]),s._v(" "),n("p",[s._v("æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ä¸€éƒ¨åˆ†ï¼Œè·å–workInProgress.alternateã€çˆ¶èŠ‚ç‚¹workInProgress.returnå’ŒworkInProgress.siblingï¼Œå¦‚æœå­˜åœ¨å…„å¼ŸèŠ‚ç‚¹åˆ™è¿”å›ã€‚å¦åˆ™ï¼Œè¿”å›çˆ¶èŠ‚ç‚¹ã€‚")]),s._v(" "),n("h3",{attrs:{id:"commité˜¶æ®µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commité˜¶æ®µ"}},[s._v("#")]),s._v(" Commité˜¶æ®µ")]),s._v(" "),n("p",[s._v("ç±»ä¼¼äº"),n("code",[s._v("Git")]),s._v("çš„åˆ†æ”¯åŠŸèƒ½ï¼Œä»æ—§æ ‘é‡Œé¢forkä¸€ä»½ï¼Œåœ¨æ–°åˆ†æ”¯ä¸­è¿›è¡Œ"),n("strong",[s._v("æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°")]),s._v("æ“ä½œï¼Œç„¶åå†è¿›è¡Œæäº¤ã€‚")]),s._v(" "),n("p",[s._v("fiberå¤§é‡ä½¿ç”¨é“¾è¡¨ã€‚ç”±äºæ•°ç»„çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä»æ•°ç»„çš„èµ·ç‚¹æˆ–è€…ä¸­é—´æ’å…¥æˆ–ç§»é™¤é¡¹çš„æˆæœ¬å¾ˆé«˜ã€‚é“¾è¡¨ç›¸å¯¹äºä¼ ç»Ÿçš„æ•°ç»„çš„ä¼˜åŠ¿åœ¨äºæ·»åŠ æˆ–ç§»é™¤å…ƒç´ çš„æ—¶å€™ä¸éœ€è¦ç§»åŠ¨å…¶ä»–å…ƒç´ ï¼Œ"),n("strong",[s._v("éœ€è¦æ·»åŠ å’Œç§»é™¤å¾ˆå¤šå…ƒç´ æ—¶ï¼Œæœ€å¥½çš„é€‰æ‹©æ˜¯é“¾è¡¨ï¼Œè€Œéæ•°ç»„ã€‚")]),s._v(" é“¾è¡¨åœ¨Reactçš„Fiberæ¶æ„å’ŒHookså®ç°å‘æŒ¥å¾ˆå¤§çš„ä½œç”¨ã€‚")]),s._v(" "),n("p",[s._v("commité˜¶æ®µè¢«åˆ†ä¸ºå‡ ä¸ªå­é˜¶æ®µã€‚æ¯ä¸ªå­é˜¶æ®µéƒ½å•ç‹¬è¿›è¡Œeffect listä¼ é€’ã€‚æ‰€æœ‰çš„mutation effectséƒ½ä¼šåœ¨æ‰€æœ‰çš„layout effectsä¹‹å‰æ‰§è¡Œã€‚")]),s._v(" "),n("p",[s._v("è¢«åˆ†ä¸ºå¦‚ä¸‹ä¸‰ä¸ªå­é˜¶æ®µï¼š")]),s._v(" "),n("ul",[n("li",[s._v("before mutationï¼šReactä½¿ç”¨æ­¤é˜¶æ®µè¯»å– host treeçš„stateçŠ¶æ€ã€‚ è¿™æ˜¯è°ƒç”¨getSnapshotBeforeUpdateç”Ÿå‘½å‘¨æœŸçš„åœ°æ–¹ã€‚")]),s._v(" "),n("li",[s._v("mutation phaseï¼šåœ¨è¿™ä¸ªé˜¶æ®µï¼ŒReact ä¼šæ”¹å˜host treeã€‚ å½“è¯¥é˜¶æ®µæ‰§è¡Œç»“æŸæ—¶ï¼Œwork-in-progressæ ‘ä¼šå˜æˆcurrentæ ‘ï¼Œè¿™å¿…é¡»å‘ç”Ÿåœ¨â€œmutation phaseâ€é˜¶æ®µä¹‹åï¼Œä»¥ä¾¿äºåœ¨componentWillUnmountç”Ÿå‘½å‘¨æœŸå†…ï¼Œä»ç„¶æ˜¯ä¹‹å‰çš„currentæ ‘ã€‚ä½†æ˜¯ï¼Œä¹Ÿè¦å‘ç”Ÿåœ¨â€œlayout phaseâ€é˜¶æ®µä¹‹å‰ï¼Œä»¥ä¾¿äºåœ¨componentDidMount / Updateç”Ÿå‘½å‘¨æœŸé—´ï¼Œcurrentæ ‘æ˜¯å·²å®Œæˆçš„workæ“ä½œçš„ã€‚")]),s._v(" "),n("li",[s._v("layout phaseï¼šåœ¨è¿™ä¸ªé˜¶æ®µhost treeå·²ç»è¢«æ›´æ”¹å¹¶è°ƒç”¨ effectsã€‚componentDidMount / Updateç­‰ç”Ÿå‘½å‘¨æœŸåœ¨è¿™ä¸ªé˜¶æ®µè¢«æ‰§è¡Œã€‚")])])])}),[],!1,null,null,null);t.default=e.exports}}]);