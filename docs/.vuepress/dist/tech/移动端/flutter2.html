<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>flutter移动开发（二） | Kun&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="meta的描述内容">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.528f3631.js" as="script"><link rel="preload" href="/assets/js/2.619c82a8.js" as="script"><link rel="preload" href="/assets/js/44.357ba709.js" as="script"><link rel="prefetch" href="/assets/js/10.ac7a4de3.js"><link rel="prefetch" href="/assets/js/11.22193742.js"><link rel="prefetch" href="/assets/js/12.6b0d96a8.js"><link rel="prefetch" href="/assets/js/13.bb592c98.js"><link rel="prefetch" href="/assets/js/14.5aadcb22.js"><link rel="prefetch" href="/assets/js/15.78a91f28.js"><link rel="prefetch" href="/assets/js/16.0463299b.js"><link rel="prefetch" href="/assets/js/17.5ade6be6.js"><link rel="prefetch" href="/assets/js/18.ae21993d.js"><link rel="prefetch" href="/assets/js/19.381fa6fe.js"><link rel="prefetch" href="/assets/js/20.5ccce5c5.js"><link rel="prefetch" href="/assets/js/21.cbe0d8e0.js"><link rel="prefetch" href="/assets/js/22.dec488e3.js"><link rel="prefetch" href="/assets/js/23.bd6e325e.js"><link rel="prefetch" href="/assets/js/24.7f63c0c1.js"><link rel="prefetch" href="/assets/js/25.e9d2ca3d.js"><link rel="prefetch" href="/assets/js/26.2ca2fcb2.js"><link rel="prefetch" href="/assets/js/27.9bbd6fb4.js"><link rel="prefetch" href="/assets/js/28.d07f52f0.js"><link rel="prefetch" href="/assets/js/29.69fc0484.js"><link rel="prefetch" href="/assets/js/3.983c5940.js"><link rel="prefetch" href="/assets/js/30.95ebca2d.js"><link rel="prefetch" href="/assets/js/31.0119a78d.js"><link rel="prefetch" href="/assets/js/32.1be9fafc.js"><link rel="prefetch" href="/assets/js/33.463bffa3.js"><link rel="prefetch" href="/assets/js/34.e343d136.js"><link rel="prefetch" href="/assets/js/35.7484c5cf.js"><link rel="prefetch" href="/assets/js/36.5aff1e2a.js"><link rel="prefetch" href="/assets/js/37.d06aba3d.js"><link rel="prefetch" href="/assets/js/38.bf208dc8.js"><link rel="prefetch" href="/assets/js/39.30052380.js"><link rel="prefetch" href="/assets/js/4.2fb93bc2.js"><link rel="prefetch" href="/assets/js/40.08ee34f0.js"><link rel="prefetch" href="/assets/js/41.dcd825b5.js"><link rel="prefetch" href="/assets/js/42.487f0aa8.js"><link rel="prefetch" href="/assets/js/43.67a7ad8b.js"><link rel="prefetch" href="/assets/js/45.a590454b.js"><link rel="prefetch" href="/assets/js/46.e7870e58.js"><link rel="prefetch" href="/assets/js/47.abdb75cf.js"><link rel="prefetch" href="/assets/js/48.0a5ab934.js"><link rel="prefetch" href="/assets/js/49.663acd27.js"><link rel="prefetch" href="/assets/js/5.1474cf9c.js"><link rel="prefetch" href="/assets/js/50.96ef16fe.js"><link rel="prefetch" href="/assets/js/51.e0b76e5e.js"><link rel="prefetch" href="/assets/js/52.a909ae03.js"><link rel="prefetch" href="/assets/js/53.b3e7bb38.js"><link rel="prefetch" href="/assets/js/54.d2a5e7cf.js"><link rel="prefetch" href="/assets/js/55.41bdb3fe.js"><link rel="prefetch" href="/assets/js/56.58b21e41.js"><link rel="prefetch" href="/assets/js/57.c3d18e9a.js"><link rel="prefetch" href="/assets/js/58.dc3e0326.js"><link rel="prefetch" href="/assets/js/59.e2e30a9a.js"><link rel="prefetch" href="/assets/js/6.2958d7f8.js"><link rel="prefetch" href="/assets/js/60.8f5cef73.js"><link rel="prefetch" href="/assets/js/61.cf6b261c.js"><link rel="prefetch" href="/assets/js/62.54bae72d.js"><link rel="prefetch" href="/assets/js/63.8ef19855.js"><link rel="prefetch" href="/assets/js/64.4b33c41d.js"><link rel="prefetch" href="/assets/js/65.24a33653.js"><link rel="prefetch" href="/assets/js/7.4f3f4813.js"><link rel="prefetch" href="/assets/js/8.af6b4dfd.js"><link rel="prefetch" href="/assets/js/9.0ac2d280.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Kun's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="/tech/" class="nav-link router-link-active">
  技术
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  科研
</a></div><div class="nav-item"><a href="/shoot/" class="nav-link">
  摄影
</a></div><div class="nav-item"><a href="https://www.github.com/kun8018" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="/tech/" class="nav-link router-link-active">
  技术
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  科研
</a></div><div class="nav-item"><a href="/shoot/" class="nav-link">
  摄影
</a></div><div class="nav-item"><a href="https://www.github.com/kun8018" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Tech</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/" aria-current="page" class="sidebar-link">Blogging Like a Hacker</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>周边开发技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据库相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>服务器技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>桌面端开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>移动端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/移动端/flutter.html" class="sidebar-link">Flutter移动开发（一）</a></li><li><a href="/tech/移动端/flutter2.html" class="active sidebar-link">flutter移动开发（二）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#选择器" class="sidebar-link">选择器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#中国城市选择器" class="sidebar-link">中国城市选择器</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#文件选择器" class="sidebar-link">文件选择器</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#时间日期选择器" class="sidebar-link">时间日期选择器</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#动画" class="sidebar-link">动画</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#hero动画" class="sidebar-link">hero动画</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#flare动画" class="sidebar-link">flare动画</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#实例1-闪屏动画" class="sidebar-link">实例1:闪屏动画</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#实例2-加载动画" class="sidebar-link">实例2：加载动画</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#_3d动画" class="sidebar-link">3D动画</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#grapgql" class="sidebar-link">Grapgql</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#数据存储" class="sidebar-link">数据存储</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#provider状态管理" class="sidebar-link">Provider状态管理</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#fishredux" class="sidebar-link">Fishredux</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#bloc" class="sidebar-link">Bloc</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#路由" class="sidebar-link">路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#路由参数" class="sidebar-link">路由参数</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#路由钩子函数" class="sidebar-link">路由钩子函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#时间组件" class="sidebar-link">时间组件</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#屏幕适配" class="sidebar-link">屏幕适配</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#瀑布流" class="sidebar-link">瀑布流</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#剪切板" class="sidebar-link">剪切板</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#国际化" class="sidebar-link">国际化</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#权限管理" class="sidebar-link">权限管理</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#版本管理" class="sidebar-link">版本管理</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#svg插件" class="sidebar-link">SVG插件</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#插入web-view" class="sidebar-link">插入web_view</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#网络状态" class="sidebar-link">网络状态</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#地图组件" class="sidebar-link">地图组件</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#保存图片" class="sidebar-link">保存图片</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#键盘管理" class="sidebar-link">键盘管理</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#资源管理" class="sidebar-link">资源管理</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#搜索页" class="sidebar-link">搜索页</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#录音管理" class="sidebar-link">录音管理</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#长按复制" class="sidebar-link">长按复制</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#qq和微信" class="sidebar-link">QQ和微信</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#手机震动" class="sidebar-link">手机震动</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#flutter美化进阶组件" class="sidebar-link">flutter美化进阶组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#液体效果页面切换" class="sidebar-link">液体效果页面切换</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#点赞按钮动画" class="sidebar-link">点赞按钮动画</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#加载中过渡动画" class="sidebar-link">加载中过渡动画</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#粘性header组件" class="sidebar-link">粘性header组件</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#可翻转卡片" class="sidebar-link">可翻转卡片</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#自制刮刮卡效果" class="sidebar-link">自制刮刮卡效果</a></li><li class="sidebar-sub-header"><a href="/tech/移动端/flutter2.html#自制评分组件" class="sidebar-link">自制评分组件</a></li></ul></li></ul></li><li><a href="/tech/移动端/flutter3.html" class="sidebar-link">flutter移动开发（三）</a></li><li><a href="/tech/移动端/flutter4.html" class="sidebar-link">flutter移动开发（四）</a></li><li><a href="/tech/移动端/h5.html" class="sidebar-link">微信小程序、H5App开发</a></li><li><a href="/tech/移动端/h52.html" class="sidebar-link">微信小程序、H5App开发</a></li><li><a href="/tech/移动端/swift.html" class="sidebar-link">swift开发</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>静态语言</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>业余研究</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>科学研究</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>​     跨平台移动开发工具。</p> <p>​    第一篇很长了，所以换到第二篇。第一篇主要写了安装、布局等基础性模块，第二篇涉及到更多模块</p> <h2 id="选择器"><a href="#选择器" class="header-anchor">#</a> 选择器</h2> <h3 id="中国城市选择器"><a href="#中国城市选择器" class="header-anchor">#</a> 中国城市选择器</h3> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
       <span class="token key atrule">city_pickers</span><span class="token punctuation">:</span> ^0.1.18
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>导入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:city_pickers/city_pickers.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <h3 id="文件选择器"><a href="#文件选择器" class="header-anchor">#</a> 文件选择器</h3> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
      <span class="token key atrule">file_picker</span><span class="token punctuation">:</span> ^1.3.8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="时间日期选择器"><a href="#时间日期选择器" class="header-anchor">#</a> 时间日期选择器</h3> <p>底部弹出栏，可以选择时间、日期，支持中文、英文等几种语言。</p> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
     <span class="token key atrule">flutter_datetime_picker</span><span class="token punctuation">:</span> 1.4.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_datetime_picker/flutter_datetime_picker.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        DatePicker<span class="token punctuation">.</span><span class="token function">showDatePicker</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span>showTitleActions<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                              minTime<span class="token punctuation">:</span> <span class="token function">DateTime</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                              maxTime<span class="token punctuation">:</span> <span class="token function">DateTime</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                              onChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'change $date'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                              <span class="token punctuation">}</span><span class="token punctuation">,</span> 
                              onConfirm<span class="token punctuation">:</span> <span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'confirm $date'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                              <span class="token punctuation">}</span><span class="token punctuation">,</span> 
                              currentTime<span class="token punctuation">:</span> DateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                               locale<span class="token punctuation">:</span> LocaleType<span class="token punctuation">.</span>zh
         <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    child<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span>
        <span class="token string">'show date time picker (Chinese)'</span><span class="token punctuation">,</span>
        style<span class="token punctuation">:</span> <span class="token function">TextStyle</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>https://www,jianshu.com/p/4b23964be383</p> <h2 id="动画"><a href="#动画" class="header-anchor">#</a> 动画</h2> <p>animation</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">_Animation</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>AnimateApp<span class="token operator">&gt;</span> <span class="token keyword">with</span> SingleTickerProviderStateMixin<span class="token punctuation">{</span>
  AnimationController controller<span class="token punctuation">;</span>
  Animation<span class="token operator">&lt;</span>double<span class="token operator">&gt;</span> animation<span class="token punctuation">;</span>
  
  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//初始化AnimationController对象</span>
      controller<span class="token operator">=</span><span class="token function">AnimationController</span><span class="token punctuation">(</span>
        <span class="token keyword">const</span> <span class="token function">Duration</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        vsync<span class="token punctuation">:</span> <span class="token keyword">this</span>
  	 <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//通过tween对象，创建animation对象</span>
    animation <span class="token operator">=</span> <span class="token function">Tween</span><span class="token punctuation">(</span>begin<span class="token punctuation">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>end<span class="token punctuation">:</span> <span class="token number">200.0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>controller<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">addlistener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">//添加状态监听，检测动画是否播放完成</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">addStatusListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>status <span class="token operator">==</span> AnimationStatus<span class="token punctuation">.</span>completed<span class="token punctuation">)</span><span class="token punctuation">{</span>
          controller<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> AnimationStatus<span class="token punctuation">.</span>dismissed<span class="token punctuation">)</span><span class="token punctuation">{</span>
          controller<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      
    <span class="token comment">//执行动画</span>
    controller<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//销毁控制器，释放资源</span>
    controller<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><code>Animation</code> 对象，是 <code>Flutter</code> 动画库中的核心类，插入用于引导动画的值,<code>Animation</code> 对象知道当前动画的状态（如：动画是否开始，停止，前进或者后退），但对屏幕上显示的内容一无所知</p> <p><code>AnimationController</code> 对象管理着 <code>Animation</code></p> <p><code>CurvedAnimation</code> 是非线性运动的动画</p> <p><code>Listeners</code> 和 <code>StatusListeners</code> 来监听动画状态的变化</p> <p>controller常用方法</p> <ul><li>animateTo(double target, { Duration duration, Curve curve: Curves.linear }) ：将动画从其当前值驱动到目标值</li> <li>animateWith(Simulation simulation)：根据给定的需要模拟的物体运动（类似物体的速度，受到的力等）开展动画</li> <li>dispose() ：释放此对象使用的资源。调用此方法后，该对象不再可用。</li> <li>fling({double velocity: 1.0, AnimationBehavior animationBehavior }) ：使用临界阻尼弹簧（在lowerBound 和upperBound内）和初始速度驱动动画。</li> <li>forward({double from }) ：开始向前运行此动画（到最后）。</li> <li>repeat({double min, double max, Duration period }) ：以向前方向开始运行此动画，并在完成时重新启动动画。</li> <li>reset() ：将控制器的值设置为lowerBound，停止动画（如果正在进行中），并重置为其开始点或解除状态。</li> <li>reverse({double from })：开始反向运行此动画（朝向开头）。</li> <li>stop({bool canceled: true })：停止运行此动画。</li></ul> <p>AnimationStatus.completed表示动画结束的状态，AnimationStatus.dismissed表示动画回到起点的状态</p> <ul><li>didRegisterListener()：在添加动画状态监听前调用，该方法需融合withAnimationLocalStatusListenersMixin的类来实现</li> <li>addStatusListener(AnimationStatusListener listener)：添加动画状态监听</li> <li>removeStatusListener(AnimationStatusListener listener)：移除动画状态监听</li> <li>didUnregisterListener()：在移除动画状态监听后调用，该方法需融合withAnimationLocalStatusListenersMixin的类来实现</li> <li>notifyStatusListeners(AnimationStatus status)：动画状态变化的通知，通知所有注册的AnimationStatusListener</li></ul> <p>flutter页面切换时动画处理</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
     flutter_vallains<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">1.2</span><span class="token number">.1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter_villains/villain.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>动画分为两类，补间动画和物理动画</p> <p>补间动画就是</p> <p>Tween是一个无状态(stateless)对象，需要begin和end值。Tween的唯一职责就是定义从输入范围到输出范围的映射</p> <p>物理动画是在基于物理的动画中，运动被模拟为与真实世界的行为相似。例如，当你掷球时，它在何处落地，取决于抛球速度有多快、球有多重、距离地面有多远。 类似地，将连接在弹簧上的球落下（并弹起）与连接到绳子上的球放下的方式也是不同。</p> <p>flutter 的动画是基于</p> <h3 id="hero动画"><a href="#hero动画" class="header-anchor">#</a> hero动画</h3> <p>在路由转换之间添加动画成为hero动画，hero动画为共享动画</p> <h3 id="flare动画"><a href="#flare动画" class="header-anchor">#</a> flare动画</h3> <p>https://juejin.im/post/6861865147557183495#heading-5</p> <h3 id="实例1-闪屏动画"><a href="#实例1-闪屏动画" class="header-anchor">#</a> 实例1:闪屏动画</h3> <h3 id="实例2-加载动画"><a href="#实例2-加载动画" class="header-anchor">#</a> 实例2：加载动画</h3> <h3 id="_3d动画"><a href="#_3d动画" class="header-anchor">#</a> 3D动画</h3> <p>Flutter 中的 Transform 可以实现许多酷炫的动画效果，由于现在的智能手机都有用于图形计算的 GPU 单元，对于图形的计算与渲染进行了优化，因此即使是渲染 3D 图形也是非常快的。因此，基本上你看到的手机上的所有图形，都是通过 3D 的渲染方式来呈现的，即使是 2D 的图形素材。</p> <p>通过 Transfrom 来实现透视效果，而 Transfrom 是通过 Matrix4 进行矩阵变换来实现的这个效果。</p> <h2 id="grapgql"><a href="#grapgql" class="header-anchor">#</a> Grapgql</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
    grapgql_flutter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>首先将json数据转换为dart模型</p> <p>科学上网打开 转换 网站：<a href="https://app.quicktype.io/" target="_blank" rel="noopener noreferrer">app.quicktype.io/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>将json代码数据粘贴到左侧，右侧选择dart语言，会自动生成模型代码</p> <p>复制右侧代码，保存到dart文件中（如PostsData.dart)</p> <p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:graphql_flutter/graphql_flutter.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:tinylearn_client/PostsData.dart'</span><span class="token punctuation">;</span><span class="token comment">//导入模型文件</span>

<span class="token keyword">final</span> _uri <span class="token operator">=</span> <span class="token string">'http://10.0.0.10:4444/'</span><span class="token punctuation">;</span> <span class="token comment">//接口地址</span>

Future<span class="token operator">&lt;</span>PostsData<span class="token operator">&gt;</span> _postsData<span class="token punctuation">;</span>

  <span class="token metadata symbol">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">final</span> client <span class="token operator">=</span> <span class="token function">GraphQLClient</span><span class="token punctuation">(</span>
      cache<span class="token punctuation">:</span> <span class="token function">InMemoryCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      link<span class="token punctuation">:</span> <span class="token function">HttpLink</span><span class="token punctuation">(</span>uri<span class="token punctuation">:</span> _uri<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    _postsData <span class="token operator">=</span> <span class="token function">_createPostsData</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 Future<span class="token operator">&lt;</span>PostsData<span class="token operator">&gt;</span> <span class="token function">_createPostsData</span><span class="token punctuation">(</span>GraphQLClient client<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
        
    <span class="token keyword">final</span> result <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token function">QueryOptions</span><span class="token punctuation">(</span>
      documentNode<span class="token punctuation">:</span> <span class="token function">gql</span><span class="token punctuation">(</span><span class="token string">r'''
        query {
          posts {
            id
            created
            content
          }
        }
      '''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>hasException<span class="token punctuation">)</span> <span class="token keyword">throw</span> result<span class="token punctuation">.</span>exception<span class="token punctuation">;</span>
    <span class="token keyword">return</span> PostsData<span class="token punctuation">.</span><span class="token function">fromMap</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>https://juejin.im/post/5ed5a4d46fb9a047cf332f83#heading-3</p> <h2 id="数据存储"><a href="#数据存储" class="header-anchor">#</a> 数据存储</h2> <p>把一些轻量级的数据（如用户信息、APP配置信息等）写入SharedPreference做存储，flutter中使用第三方库实现。合理地使用持久化能够让App支持离线化操作，给用户带来极大的操作体验的提升。</p> <p>安装包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
    shared_preferences
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'packages:shared_preferences/shared_preferences.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>sp是通过key-value的方式存数据、取数据</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">//存数据</span>
Future <span class="token function">saveString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    SharedPreferences sharedPreferences<span class="token operator">=</span><span class="token keyword">await</span> SharedPreferences<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sharedPreferences<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>
       STORAGE_KEY<span class="token punctuation">,</span> _textFieldController<span class="token punctuation">.</span>value<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//取数据</span>
Future <span class="token function">getString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    SharedPreferences sharedPreferences<span class="token operator">=</span><span class="token keyword">await</span> SharedPreferences<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setState</span><span class="token punctuation">(</span>
       _storageString <span class="token operator">=</span> sharedPreferences<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>STORAGE_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把取出的数据保存到变量中</span>
<span class="token punctuation">}</span>
<span class="token comment">//删除数据</span>
SharedPreferences sharePreferences <span class="token operator">=</span> <span class="token keyword">await</span> SharedPreferences<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sharePreferences<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>把长期存储的数据写入文件或Sqlite3</p> <p>写入文件</p> <p>安装包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
    path_provider<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">0.5</span><span class="token number">.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Sqlite</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
    <span class="token key atrule">sqfliter</span><span class="token punctuation">:</span> ^1.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入文件</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:sqflite/sqflite.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="provider状态管理"><a href="#provider状态管理" class="header-anchor">#</a> Provider状态管理</h2> <p>InheritedWidget可以提供共享数据，并且通过getElementForInheritedWidgetOfExactType来解除didChangeDependencies的调用，但还是没有避免CountWidget的重新build，并没有将build最小化。</p> <p>我们今天就来解决如何避免不必要的build构建，将build缩小到最小的CountText。</p> <p>provider是一个依赖注入和状态管理的混合工具，通过组件来构建组件。</p> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">provider</span><span class="token punctuation">:</span> ^4.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:provider/provider.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过各种不同的provider来应对具体的需求</p> <p><code>Provider</code> 最基础的provider,它会获取一个值并将它暴露出来</p> <p><code>ListenableProvider</code> 用来暴露可监听的对象，该provider将会监听对象的改变以便及时更新组件状态</p> <p><code>ChangeNotifierProvider</code> ListerableProvider依托于ChangeNotifier的一个实现，它将会在需要的时候自动调用<code>ChangeNotifier.dispose</code>方法</p> <p><code>ValueListenableProvider</code> 监听一个可被监听的值，并且只暴露<code>ValueListenable.value</code>方法</p> <p><code>StreamProvider</code> 监听一个流，并且暴露出其最近发送的值</p> <p><code>FutureProvider</code> 接受一个<code>Future</code>作为参数，在这个<code>Future</code>完成的时候更新依赖</p> <p>暴露多个provider</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token function">MultiProvider</span><span class="token punctuation">(</span>
  providers<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    Provider<span class="token operator">&lt;</span>Something<span class="token operator">&gt;</span><span class="token punctuation">(</span>create<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">Something</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Provider<span class="token operator">&lt;</span>SomethingElse<span class="token operator">&gt;</span><span class="token punctuation">(</span>create<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">SomethingElse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Provider<span class="token operator">&lt;</span>AnotherThing<span class="token operator">&gt;</span><span class="token punctuation">(</span>create<span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">AnotherThing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  child<span class="token punctuation">:</span> someWidget<span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>selector</p> <p>不要在只会调用一次的组件生命周期中调用Provider,如create、initstate</p> <p><code>provider</code>暴露了许多细节api以便使用者封装自己的provider，它们包括：<code>SingleChildCloneableWidget</code>、<code>InheritedProvider</code>、<code>DelegateWidget</code>、<code>BuilderDelegate</code>、<code>ValueDelegate</code>,</p> <p>https://juejin.im/post/6844904145774870536#heading-10</p> <h2 id="fishredux"><a href="#fishredux" class="header-anchor">#</a> Fishredux</h2> <p>安装fishredux</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">fish_redux</span><span class="token punctuation">:</span> ^0.3.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:fish_redux/fish_redux.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>reducer是负责（state）的更新，effect 负责 state 更新之外的事情。</p> <p>store维持全局的状态（state），应用只有一个单一的 store 。</p> <h2 id="bloc"><a href="#bloc" class="header-anchor">#</a> Bloc</h2> <p>状态管理插件</p> <p>https://juejin.im/post/6844903689082109960#heading-4</p> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <p>路由是在不同页面之间跳转。在Android中通常指一个Activity，在iOS中指一个ViewController。flutter中管理多个页面时有两个核心概念和类：<a href="https://docs.flutter.io/flutter/widgets/Route-class.html" target="_blank" rel="noopener noreferrer">Route<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://docs.flutter.io/flutter/widgets/Navigator-class.html" target="_blank" rel="noopener noreferrer">Navigator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。一个 route 是一个屏幕或页面的抽象，Navigator 是管理 route 的 Widget。路由入栈 (push) 操作对应打开一个新页面，路由出栈 (pop) 操作对应页面关闭操作，</p> <p><code>Navigator</code>是一个路由管理的组件，它提供了打开和退出路由页方法。<code>Navigator</code>通过一个栈来管理活动路由集合。通常当前屏幕显示的页面就是栈顶的路由。<code>Navigator</code>提供了一系列方法来管理路由栈，</p> <p>注册路由表</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>routes<span class="token punctuation">:</span><span class="token punctuation">{</span>
   <span class="token string">&quot;new_page&quot;</span><span class="token punctuation">:</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">NewRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// 省略其它路由注册信息</span>
  <span class="token punctuation">}</span> <span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>路由表是一个Map类型的键值对集合，key是路由的名字，是字符串，value是builder函数，</p> <p>普通跳转方式与返回</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Navigator<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
  context<span class="token punctuation">,</span>
  <span class="token function">MaterialPageRoute</span><span class="token punctuation">(</span>
    builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">TipRoute</span><span class="token punctuation">(</span>
        <span class="token comment">// 路由参数</span>
        text<span class="token punctuation">:</span> <span class="token string">&quot;我是提示xxxx&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//在路由页添加返回函数</span>
Navigator<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">&quot;我是返回值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>MaterialPageRoute</code> 是<code>Material</code>组件库的一个Widget，它可以针对不同平台，实现与平台页面切换动画风格一致的路由切换动画</p> <p>命名路由</p> <p>一般推荐使用命名路由的方式管理路由，因为：</p> <p>语义化更明确。</p> <p>代码更好维护；如果使用匿名路由，则必须在调用<code>Navigator.push</code>的地方创建新路由页，这样不仅需要import新路由页的dart文件，而且这样的代码将会非常分散。</p> <p>可以通过<code>onGenerateRoute</code>做一些全局的路由跳转前置处理逻辑。</p> <p>方法</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Future <span class="token function">pushNamed</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">,</span> String routeName<span class="token punctuation">,</span><span class="token punctuation">{</span>Object arguments<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="路由参数"><a href="#路由参数" class="header-anchor">#</a> 路由参数</h3> <p>注册路由与正常相同，路由页与路由跳转添加参数</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">EchoRoute</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>

  <span class="token metadata symbol">@override</span>
  Widget <span class="token function">build</span><span class="token punctuation">(</span>BuildContext context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//通过RouteSetting对象获取路由参数  </span>
    <span class="token keyword">var</span> args<span class="token operator">=</span>ModalRoute<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>settings<span class="token punctuation">.</span>arguments<span class="token punctuation">;</span>
    <span class="token comment">//...省略无关代码</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>跳转路由时填写参数</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pushNamed</span><span class="token punctuation">(</span><span class="token string">&quot;new_page&quot;</span><span class="token punctuation">,</span> arguments<span class="token punctuation">:</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其他跳转方式</p> <p>PushReplacement会替换当前的路由，也就是说新push进入的route会替换原来route。</p> <p>PushReplacementNamed是根据路由名称（routeName），找寻对应的route，并实现见面的跳转。<code>PushReplacementNamed</code>会替换当前的路由，也就是说新push进入的route会替换原来route。</p> <p>PopAndPushNamed是先pop原来的route，再push新的route。</p> <p>pushAndRemoveUntil/pushNamedAndRemoveUntil,,跳转到新的路由，并删除路由栈中的其他路由，可以应用于支付流程。在支付的过程中，我们会跳转多个界面（填写金额、选择支付方式、输入密码、支付结果...），当我们支付成功后，pop时不应该一层一层的，而应该直接返回根界面。</p> <p>canPop判断当前route是否可以pop，返回bool；maybePop先判断当前route是否可以pop，可以则直接pop，不行则没有任何效果。</p> <p>popUntil一直返回route，直到<code>predicate</code>返回true时停止。</p> <p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pushNamed</span><span class="token punctuation">(</span><span class="token string">'a_router_widget'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pushReplacementNamed</span><span class="token punctuation">(</span><span class="token string">'d_router_widget'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">popAndPushNamed</span><span class="token punctuation">(</span><span class="token string">'d_router_widget'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pushNamedAndRemoveUntil</span><span class="token punctuation">(</span><span class="token string">'d_router_widget'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>Route<span class="token operator">&lt;</span><span class="token keyword">dynamic</span><span class="token operator">&gt;</span> route<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">maybePop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">canPop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Navigator<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Navigator<span class="token punctuation">.</span><span class="token function">popUntil</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ModalRoute<span class="token punctuation">.</span><span class="token function">withName</span><span class="token punctuation">(</span><span class="token string">'a_router_widget'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="路由钩子函数"><a href="#路由钩子函数" class="header-anchor">#</a> 路由钩子函数</h3> <h2 id="时间组件"><a href="#时间组件" class="header-anchor">#</a> 时间组件</h2> <p>DateTime表示一个时间点，创建之后将是固定不变的，不可被修改，datetime默认是本地时区</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">var</span> today <span class="token operator">=</span> DateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//获取当前时间</span>
DateTime victoryDay <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">1992</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>  <span class="token comment">//创建指定时间</span>
DateTime<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token comment">//字符串转datetime</span>
<span class="token function">formatDate</span><span class="token punctuation">(</span>DateTime<span class="token punctuation">,</span><span class="token punctuation">[</span>yyyy<span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span>mm<span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span>dd<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//datetime转字符串</span>
fromMillisecondsSinceEpoch<span class="token comment">//时间戳转datetime</span>
today<span class="token punctuation">.</span>millisecondsSinceEpoch<span class="token comment">//datetime转时间戳</span>
today<span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token comment">//时间比较 在之前</span>
today<span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token comment">//时间比较 在之后</span>
today<span class="token punctuation">.</span><span class="token function">isAtSameMomentAs</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token comment">//时间比较 是否相等</span>
<span class="token function">compareTo</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token comment">//大于返回1，等于返回0，小于返回-1</span>
today<span class="token punctuation">.</span><span class="token function">difference</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token comment">//两个时间相差 小时数</span>
today<span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Duration</span><span class="token punctuation">(</span>days<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//时间加5天</span>
today<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Duration</span><span class="token punctuation">(</span>days<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//时间减五天</span>
today<span class="token punctuation">.</span>timeZoneOffset<span class="token comment">//返回utc与本地时差小时数</span>
today<span class="token punctuation">.</span>year<span class="token comment">//返回年year、月month、日day、时hour、分minute、秒second、毫秒millisecond、微秒microsecond</span>
today<span class="token punctuation">.</span>weekday<span class="token comment">//返回星期几</span>
<span class="token comment">//计算时间</span>
Duration timeremain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Duration</span><span class="token punctuation">(</span>days<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>hours<span class="token punctuation">:</span><span class="token number">56</span><span class="token punctuation">,</span>minutes<span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//104:14:00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="屏幕适配"><a href="#屏幕适配" class="header-anchor">#</a> 屏幕适配</h2> <h2 id="瀑布流"><a href="#瀑布流" class="header-anchor">#</a> 瀑布流</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">flutter_staggered_grid_view</span><span class="token punctuation">:</span> <span class="token string">&quot;^0.3.2&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>导入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter_staggered_grid_view/flutter_staggered_grid_view.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">new</span> <span class="token class-name">StaggeredGridView<span class="token punctuation">.</span>countBuilder</span><span class="token punctuation">(</span>
  crossAxisCount<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  itemCount<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
  itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>BuildContext context<span class="token punctuation">,</span> int index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
      color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>green<span class="token punctuation">,</span>
      child<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
        child<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CircleAvatar</span><span class="token punctuation">(</span>
          backgroundColor<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>white<span class="token punctuation">,</span>
          child<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">'$index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  staggeredTileBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>int index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span>
      <span class="token keyword">new</span> <span class="token class-name">StaggeredTile<span class="token punctuation">.</span>count</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> index<span class="token punctuation">.</span>isEven <span class="token operator">?</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  mainAxisSpacing<span class="token punctuation">:</span> <span class="token number">4.0</span><span class="token punctuation">,</span>
  crossAxisSpacing<span class="token punctuation">:</span> <span class="token number">4.0</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="剪切板"><a href="#剪切板" class="header-anchor">#</a> 剪切板</h2> <p>https://jianshu.com/p/c71b150f85f0</p> <p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter/service.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
   flutter_clipboard_manager<span class="token punctuation">:</span>^0.2.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter_clipboard_manager/flutter_clipboard_manager.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">//定义函数，写入剪贴板</span>
<span class="token keyword">static</span> Future<span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token function">copyToClipboard</span><span class="token punctuation">(</span>String text<span class="token punctuation">)</span> asyc<span class="token punctuation">{</span>
    <span class="token keyword">return</span> FlutterClipboardManager<span class="token punctuation">.</span><span class="token function">copyToClipBoard</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//支持调用.then方法</span>
<span class="token punctuation">}</span>
<span class="token comment">//从剪贴板导出</span>
<span class="token keyword">static</span> Future<span class="token operator">&lt;</span>bool<span class="token operator">&gt;</span> <span class="token function">copyFromClipboard</span><span class="token punctuation">(</span>String text<span class="token punctuation">)</span> asyc<span class="token punctuation">{</span>
    <span class="token keyword">return</span> FlutterClipboardManager<span class="token punctuation">.</span><span class="token function">copyFromClipBoard</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//支持调用.then方法</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="国际化"><a href="#国际化" class="header-anchor">#</a> 国际化</h2> <p>使用intl包可以实现国际化，也方便</p> <p>添加sdk</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">flutter_localization</span><span class="token punctuation">:</span>
   <span class="token key atrule">sdk</span><span class="token punctuation">:</span> flutter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'packages:flutter_localization/flutter_localization.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="权限管理"><a href="#权限管理" class="header-anchor">#</a> 权限管理</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
    <span class="token key atrule">permission_handler</span><span class="token punctuation">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:permission_handler/permission_handler.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Future <span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
  <span class="token comment">// 申请权限</span>
  Map<span class="token operator">&lt;</span>PermissionGroup<span class="token punctuation">,</span> PermissionStatus<span class="token operator">&gt;</span> permissions <span class="token operator">=</span>
      <span class="token keyword">await</span> <span class="token function">PermissionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>PermissionGroup<span class="token punctuation">.</span>storage<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 申请结果</span>
  PermissionStatus permission <span class="token operator">=</span>
      <span class="token keyword">await</span> <span class="token function">PermissionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkPermissionStatus</span><span class="token punctuation">(</span>PermissionGroup<span class="token punctuation">.</span>storage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">==</span> PermissionStatus<span class="token punctuation">.</span>granted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Fluttertoast<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> <span class="token string">&quot;权限申请通过&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    Fluttertoast<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span>msg<span class="token punctuation">:</span> <span class="token string">&quot;权限申请被拒绝&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="版本管理"><a href="#版本管理" class="header-anchor">#</a> 版本管理</h2> <p>安装包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>version
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>引入包</p> <h2 id="svg插件"><a href="#svg插件" class="header-anchor">#</a> SVG插件</h2> <p>可以在flutter中使用svg文件，安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
   flutter_svg<span class="token punctuation">:</span>^0.17.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'packages:flutter_svg/flutter_svg.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">//将svg格式的文件放在asset中，在yaml文件中引入资源</span>
SvgPicture <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SvgPicture<span class="token punctuation">.</span>asset</span><span class="token punctuation">(</span>
   <span class="token string">&quot;assets/set.svg&quot;</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>red
<span class="token punctuation">)</span><span class="token comment">//引入名为set的图标,宽度、颜色等样式可以自定义</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="插入web-view"><a href="#插入web-view" class="header-anchor">#</a> 插入web_view</h2> <p>安装插件</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
   flutter_webview_plugin<span class="token punctuation">:</span>^0.2.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter_webview_plugin/flutter_webview_plugin.dart'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">new</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
      routes<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;/&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">WebviewScaffold</span><span class="token punctuation">(</span>
          url<span class="token punctuation">:</span> <span class="token string">&quot;https://www.google.com&quot;</span><span class="token punctuation">,</span>
          appBar<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
            title<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string">&quot;Widget webview&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="网络状态"><a href="#网络状态" class="header-anchor">#</a> 网络状态</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">connectivity</span><span class="token punctuation">:</span> ^0.4.8+6
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:connectivity/connectivity.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">var</span> connectivityResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token function">Connectivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkConnectivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>connectivityResult <span class="token operator">==</span> ConnectivityResult<span class="token punctuation">.</span>mobile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// I am connected to a mobile network.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>connectivityResult <span class="token operator">==</span> ConnectivityResult<span class="token punctuation">.</span>wifi<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 连接到wifi</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="地图组件"><a href="#地图组件" class="header-anchor">#</a> 地图组件</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">flutter_map</span><span class="token punctuation">:</span> 0.9.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>允许</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.INTERNET<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter_map/flutter_map.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="保存图片"><a href="#保存图片" class="header-anchor">#</a> 保存图片</h2> <p>可以在flutter中保存图片，安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">image_gallery_saver</span><span class="token punctuation">:</span> <span class="token string">'^1.5.0'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>导入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:image_gallery_saver/image_gallery_saver.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token function">_save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">Dio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>
           <span class="token string">&quot;https://ss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=a62e824376d98d1069d40a31113eb807/838ba61ea8d3fd1fc9c7b6853a4e251f94ca5f46.jpg&quot;</span><span class="token punctuation">,</span>
           options<span class="token punctuation">:</span> <span class="token function">Options</span><span class="token punctuation">(</span>responseType<span class="token punctuation">:</span> ResponseType<span class="token punctuation">.</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">final</span> result <span class="token operator">=</span> <span class="token keyword">await</span> ImageGallerySaver<span class="token punctuation">.</span><span class="token function">saveImage</span><span class="token punctuation">(</span>
           Uint8List<span class="token punctuation">.</span><span class="token function">fromList</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>
           quality<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
           name<span class="token punctuation">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="键盘管理"><a href="#键盘管理" class="header-anchor">#</a> 键盘管理</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
   <span class="token key atrule">keyboard_visibility</span><span class="token punctuation">:</span> any
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:keyboard_visibility/keyboard_visibility.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token metadata symbol">@protected</span>
<span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">KeyboardVisibilityNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addNewListener</span><span class="token punctuation">(</span>
    onChange<span class="token punctuation">:</span> <span class="token punctuation">(</span>bool visible<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span>visible<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="资源管理"><a href="#资源管理" class="header-anchor">#</a> 资源管理</h2> <p>flutter可以将asset打包在程序安装包中，在程序运行时访问，常见的资源包括json文件、配置文件、图标和图片。构建时flutter将asset放置到称为asset bundle的特殊存档。</p> <p>在pubspec.yaml中 指定资源</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">flutter</span><span class="token punctuation">:</span>
     <span class="token key atrule">assets</span><span class="token punctuation">:</span>
       <span class="token punctuation">-</span> assets/1.png
       <span class="token punctuation">-</span> assets/2.png
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>加载方法</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>Image<span class="token punctuation">.</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token string">'路径'</span><span class="token punctuation">)</span><span class="token comment">//加载图片</span>
future<span class="token punctuation">:</span> DefaultAssetBundle<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadString</span><span class="token punctuation">(</span><span class="token string">&quot;assets/sword.json&quot;</span><span class="token punctuation">)</span><span class="token comment">//加载json，加载后可以将json转化为dart进行显示</span>
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter/services.dart'</span> <span class="token keyword">show</span> rootBundle<span class="token punctuation">;</span>

Future<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span class="token function">loadAsset</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">await</span> rootBundle<span class="token punctuation">.</span><span class="token function">loadString</span><span class="token punctuation">(</span><span class="token string">'assets/sword.json'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>加载依赖包中的图片</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token function">AssetImage</span><span class="token punctuation">(</span><span class="token string">'icons/phone.png'</span><span class="token punctuation">,</span>package<span class="token punctuation">:</span><span class="token string">'best_icons'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>指定某一目录的所有资源，直接指定目录名称</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>flutter<span class="token punctuation">:</span>
     assets<span class="token punctuation">:</span>
       <span class="token operator">-</span> assets<span class="token operator">/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="搜索页"><a href="#搜索页" class="header-anchor">#</a> 搜索页</h2> <h2 id="录音管理"><a href="#录音管理" class="header-anchor">#</a> 录音管理</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:audio_recorder/audio_recorder.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>开启权限</p> <p>安卓</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.RECORD_AUDIO<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>IOS</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>key</span><span class="token punctuation">&gt;</span></span>NSMicrophoneUsageDescription<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>key</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>Record audio for playback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>string</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">// 检查权限</span>
bool hasPermissions <span class="token operator">=</span> <span class="token keyword">await</span> AudioRecorder<span class="token punctuation">.</span>hasPermissions<span class="token punctuation">;</span>

<span class="token comment">// 获取目前状态</span>
bool isRecording <span class="token operator">=</span> <span class="token keyword">await</span> AudioRecorder<span class="token punctuation">.</span>isRecording<span class="token punctuation">;</span>
<span class="token comment">// 开始录音</span>
<span class="token keyword">await</span> AudioRecorder<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> _controller<span class="token punctuation">.</span>text<span class="token punctuation">,</span> audioOutputFormat<span class="token punctuation">:</span> AudioOutputFormat<span class="token punctuation">.</span>AAC<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结束录音</span>
Recording recording <span class="token operator">=</span> <span class="token keyword">await</span> AudioRecorder<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Path : ${recording.path},  Format : ${recording.audioOutputFormat},  Duration : ${recording.duration},  Extension : ${recording.extension},&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="长按复制"><a href="#长按复制" class="header-anchor">#</a> 长按复制</h2> <h2 id="qq和微信"><a href="#qq和微信" class="header-anchor">#</a> QQ和微信</h2> <h2 id="手机震动"><a href="#手机震动" class="header-anchor">#</a> 手机震动</h2> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code> <span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
   <span class="token key atrule">vibration</span><span class="token punctuation">:</span> ^1.2.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:vibration/vibration.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在AndroidManifest.xml文件中开启权限</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.VIBRATE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>震动函数以ms为单位，
Vibration<span class="token punctuation">.</span><span class="token function">vibrate</span><span class="token punctuation">(</span>duration<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//振动1s</span>
Vibration<span class="token punctuation">.</span><span class="token function">vibrate</span><span class="token punctuation">(</span>pattern<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//振动0.5s，休息一秒，振动0.5秒，休息两秒</span>
Vibration<span class="token punctuation">.</span><span class="token function">vibrate</span><span class="token punctuation">(</span>pattern<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">]</span><span class="token punctuation">,</span> intensities<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//震动强度变化</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="flutter美化进阶组件"><a href="#flutter美化进阶组件" class="header-anchor">#</a> flutter美化进阶组件</h2> <h3 id="液体效果页面切换"><a href="#液体效果页面切换" class="header-anchor">#</a> 液体效果页面切换</h3> <p>安装包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
  liquid_swipe<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">1.3</span><span class="token number">.0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:liquid_swipe/Constants/Helpers.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:liquid_swipe/liquid_swipe.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>https://juejin.im/post/5ddb54146fb9a07a8f412d62</p> <h3 id="点赞按钮动画"><a href="#点赞按钮动画" class="header-anchor">#</a> 点赞按钮动画</h3> <p>安装包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
  like_button<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">0.1</span><span class="token number">.9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:like_button/like_button.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>https://juejin.im/post/5db4f54bf265da4d02625c17</p> <h3 id="加载中过渡动画"><a href="#加载中过渡动画" class="header-anchor">#</a> 加载中过渡动画</h3> <p>安装包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
  liquid_progress_indicator<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">0.3</span><span class="token number">.2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:liquid_progress_indicator/liquid_progress_indicator.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>圆形进度器</p> <div class="language-node line-numbers-mode"><pre class="language-text"><code>LiquidCircularProgressIndicator(
    value: 0.8, //当前进度 0-1
    valueColor: AlwaysStoppedAnimation(Colors.blue[200]), // 进度值的颜色.
    backgroundColor: Colors.white, // 背景颜色.
    borderColor: Colors.blue,//边框颜色
    borderWidth: 2.0,//边框宽度
    direction: Axis.vertical, // 进度方向 (Axis.vertical = 从下到上, Axis.horizontal = 从左到右). 默认：Axis.vertical
    center: Text(&quot;正在上传...&quot;), //中间显示的组件 
)

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>https://juejin.im/post/5dde3194f265da06074f13c6</p> <h3 id="粘性header组件"><a href="#粘性header组件" class="header-anchor">#</a> 粘性header组件</h3> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">sticky_headers</span><span class="token punctuation">:</span> ^0.1.8+1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:sticky_headers/sticky_headers.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code>ListView<span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>
    itemCount<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    itemBuilder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">StickyHeader</span><span class="token punctuation">(</span>
            header<span class="token punctuation">:</span> <span class="token function">Container</span><span class="token punctuation">(</span> <span class="token comment">//header组件</span>
                height<span class="token punctuation">:</span> <span class="token number">50.0</span><span class="token punctuation">,</span>
                color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>blueGrey<span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                padding<span class="token punctuation">:</span> EdgeInsets<span class="token punctuation">.</span><span class="token function">symmetric</span><span class="token punctuation">(</span>horizontal<span class="token punctuation">:</span> <span class="token number">16.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                alignment<span class="token punctuation">:</span> Alignment<span class="token punctuation">.</span>centerLeft<span class="token punctuation">,</span>
                child<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Header #$index'</span><span class="token punctuation">,</span>
                    style<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token function">TextStyle</span><span class="token punctuation">(</span>color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            content<span class="token punctuation">:</span> <span class="token function">Container</span><span class="token punctuation">(</span><span class="token comment">//内容组件</span>
                child<span class="token punctuation">:</span> Image<span class="token punctuation">.</span><span class="token function">network</span><span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> fit<span class="token punctuation">:</span> BoxFit<span class="token punctuation">.</span>cover<span class="token punctuation">,</span>width<span class="token punctuation">:</span> double<span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">200.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

链接：https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">5</span>dce4a845188254c9479f0af
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="可翻转卡片"><a href="#可翻转卡片" class="header-anchor">#</a> 可翻转卡片</h3> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">flip_card</span><span class="token punctuation">:</span> ^0.4.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flip_card/flip_card.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token function">FlipCard</span><span class="token punctuation">(</span>
    direction<span class="token punctuation">:</span> FlipDirection<span class="token punctuation">.</span>VERTICAL<span class="token punctuation">,</span> <span class="token comment">//基于X轴翻转</span>
    front<span class="token punctuation">:</span> <span class="token function">Container</span><span class="token punctuation">(</span>
        height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> <span class="token number">345</span><span class="token punctuation">,</span>
        margin<span class="token punctuation">:</span> EdgeInsets<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>teal<span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token function">Center</span><span class="token punctuation">(</span>
            child<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">&quot;《遮天》&quot;</span><span class="token punctuation">,</span>style<span class="token punctuation">:</span><span class="token function">TextStyle</span><span class="token punctuation">(</span>
                fontSize<span class="token punctuation">:</span><span class="token number">40</span><span class="token punctuation">,</span>
                color<span class="token punctuation">:</span>Colors<span class="token punctuation">.</span>white
            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    back<span class="token punctuation">:</span> <span class="token function">Container</span><span class="token punctuation">(</span>
        height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> <span class="token number">345</span><span class="token punctuation">,</span>
        margin<span class="token punctuation">:</span> EdgeInsets<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>pink<span class="token punctuation">,</span>
        padding<span class="token punctuation">:</span> EdgeInsets<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'....'</span>
        <span class="token punctuation">,</span>style<span class="token punctuation">:</span> <span class="token function">TextStyle</span><span class="token punctuation">(</span>
            color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>white<span class="token punctuation">,</span>
            height<span class="token punctuation">:</span><span class="token number">2.0</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span>

链接：https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">5</span>dd4f84e5188254e0c036d5f
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="自制刮刮卡效果"><a href="#自制刮刮卡效果" class="header-anchor">#</a> 自制刮刮卡效果</h3> <p>安装包</p> <div class="language-node line-numbers-mode"><pre class="language-text"><code>dependencies:
  scratcher: &quot;^1.3.0&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-node line-numbers-mode"><pre class="language-text"><code>import 'package:scratcher/scratcher.dart';
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token function">Scratcher</span><span class="token punctuation">(</span>
    brushSize<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token comment">//刷子大小（手指刮动的笔刷）</span>
    threshold<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token comment">//完全刮开的阈值 百分比</span>
    color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>grey<span class="token punctuation">,</span> <span class="token comment">//覆盖层的颜色</span>
    onChange<span class="token punctuation">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//被刮动的回调 返回当前刮开区域百分比</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;当前刮开比例: $value%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onThreshold<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//触发完全刮开的阈值回调</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;已触发设置的全部刮开阈值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    child<span class="token punctuation">:</span> <span class="token function">Container</span><span class="token punctuation">(</span> <span class="token comment">//覆盖层下的原本组件 一般是刮卡结果展示</span>
        height<span class="token punctuation">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> Colors<span class="token punctuation">.</span>blue<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

链接：https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>juejin<span class="token punctuation">.</span>im<span class="token operator">/</span>post<span class="token operator">/</span><span class="token number">5</span>df5c48ae51d4558096d5887
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="自制评分组件"><a href="#自制评分组件" class="header-anchor">#</a> 自制评分组件</h3> <p>安装包</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
  <span class="token key atrule">flutter_rating_bar</span><span class="token punctuation">:</span> ^3.0.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>引入包</p> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string">'package:flutter_rating_bar/flutter_rating_bar.dart'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>实例</p> <div class="language-node line-numbers-mode"><pre class="language-text"><code>RatingBar(
    initialRating: rate1, //初始评分 double
    allowHalfRating: true,//允许0.5评分
    itemCount: 5,//评分组件个数
    itemPadding: EdgeInsets.symmetric(horizontal: 4.0),
    itemBuilder: (context, _) =&gt; Icon(
        Icons.star,
        color: Colors.amber,
    ),
    onRatingUpdate: (rating) {
        setState(() {
            this.rate1=rating;
        });
    },
)

链接：https://juejin.im/post/5dd1f9eae51d454014386435
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tech/移动端/flutter.html" class="prev">
        Flutter移动开发（一）
      </a></span> <span class="next"><a href="/tech/移动端/flutter3.html">
        flutter移动开发（三）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.528f3631.js" defer></script><script src="/assets/js/2.619c82a8.js" defer></script><script src="/assets/js/44.357ba709.js" defer></script>
  </body>
</html>
