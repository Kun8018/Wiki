<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kun&#39;s Wiki</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="meta的描述内容">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.107701cb.js" as="script"><link rel="preload" href="/assets/js/2.619c82a8.js" as="script"><link rel="preload" href="/assets/js/61.1fbe0671.js" as="script"><link rel="prefetch" href="/assets/js/10.4c94b81d.js"><link rel="prefetch" href="/assets/js/11.f5303132.js"><link rel="prefetch" href="/assets/js/12.0450625b.js"><link rel="prefetch" href="/assets/js/13.cd86f0f8.js"><link rel="prefetch" href="/assets/js/14.4a9f97de.js"><link rel="prefetch" href="/assets/js/15.dbdc93f4.js"><link rel="prefetch" href="/assets/js/16.006f93ff.js"><link rel="prefetch" href="/assets/js/17.ad3cdb92.js"><link rel="prefetch" href="/assets/js/18.1b7ef2b7.js"><link rel="prefetch" href="/assets/js/19.0a7bdbd0.js"><link rel="prefetch" href="/assets/js/20.0d56d304.js"><link rel="prefetch" href="/assets/js/21.3190efab.js"><link rel="prefetch" href="/assets/js/22.4e836b52.js"><link rel="prefetch" href="/assets/js/23.03993835.js"><link rel="prefetch" href="/assets/js/24.a01f0216.js"><link rel="prefetch" href="/assets/js/25.6781aead.js"><link rel="prefetch" href="/assets/js/26.ddf559ad.js"><link rel="prefetch" href="/assets/js/27.46e966a4.js"><link rel="prefetch" href="/assets/js/28.5c6a09d7.js"><link rel="prefetch" href="/assets/js/29.5db34a2c.js"><link rel="prefetch" href="/assets/js/3.c6ec38c3.js"><link rel="prefetch" href="/assets/js/30.9f2849c6.js"><link rel="prefetch" href="/assets/js/31.5815c55c.js"><link rel="prefetch" href="/assets/js/32.574798bd.js"><link rel="prefetch" href="/assets/js/33.0d623fd7.js"><link rel="prefetch" href="/assets/js/34.83890c8c.js"><link rel="prefetch" href="/assets/js/35.89b4b514.js"><link rel="prefetch" href="/assets/js/36.5a1b2b99.js"><link rel="prefetch" href="/assets/js/37.702be7e9.js"><link rel="prefetch" href="/assets/js/38.0063f952.js"><link rel="prefetch" href="/assets/js/39.787f0c14.js"><link rel="prefetch" href="/assets/js/4.e268862a.js"><link rel="prefetch" href="/assets/js/40.c99cd2ad.js"><link rel="prefetch" href="/assets/js/41.f5621bfc.js"><link rel="prefetch" href="/assets/js/42.c7540d40.js"><link rel="prefetch" href="/assets/js/43.4c36a635.js"><link rel="prefetch" href="/assets/js/44.b9cba9f3.js"><link rel="prefetch" href="/assets/js/45.69b2d954.js"><link rel="prefetch" href="/assets/js/46.5534b655.js"><link rel="prefetch" href="/assets/js/47.f16f43f3.js"><link rel="prefetch" href="/assets/js/48.fb20e8b3.js"><link rel="prefetch" href="/assets/js/49.0f580aeb.js"><link rel="prefetch" href="/assets/js/5.0c896d33.js"><link rel="prefetch" href="/assets/js/50.f9b08984.js"><link rel="prefetch" href="/assets/js/51.1cf6d401.js"><link rel="prefetch" href="/assets/js/52.d08beb36.js"><link rel="prefetch" href="/assets/js/53.12958900.js"><link rel="prefetch" href="/assets/js/54.5054df3f.js"><link rel="prefetch" href="/assets/js/55.b71ef02a.js"><link rel="prefetch" href="/assets/js/56.c4c0ace1.js"><link rel="prefetch" href="/assets/js/57.2353a8bb.js"><link rel="prefetch" href="/assets/js/58.30db1013.js"><link rel="prefetch" href="/assets/js/59.2b1f1022.js"><link rel="prefetch" href="/assets/js/6.2958d7f8.js"><link rel="prefetch" href="/assets/js/60.ee89bede.js"><link rel="prefetch" href="/assets/js/62.84e1e2cf.js"><link rel="prefetch" href="/assets/js/63.2e3baa5f.js"><link rel="prefetch" href="/assets/js/64.56588b49.js"><link rel="prefetch" href="/assets/js/65.69bba41a.js"><link rel="prefetch" href="/assets/js/66.f7708893.js"><link rel="prefetch" href="/assets/js/67.a93cc627.js"><link rel="prefetch" href="/assets/js/68.bbe764d2.js"><link rel="prefetch" href="/assets/js/69.7d632097.js"><link rel="prefetch" href="/assets/js/7.4f3f4813.js"><link rel="prefetch" href="/assets/js/70.9fbcc14a.js"><link rel="prefetch" href="/assets/js/71.e4b8c89d.js"><link rel="prefetch" href="/assets/js/72.b7d8c12a.js"><link rel="prefetch" href="/assets/js/73.d033e936.js"><link rel="prefetch" href="/assets/js/74.6b83aade.js"><link rel="prefetch" href="/assets/js/8.af6b4dfd.js"><link rel="prefetch" href="/assets/js/9.0ac2d280.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Kun's Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="/tech/" class="nav-link router-link-active">
  技术
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  科研
</a></div><div class="nav-item"><a href="/shoot/" class="nav-link">
  摄影
</a></div><div class="nav-item"><a href="https://www.github.com/kun8018" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="/tech/" class="nav-link router-link-active">
  技术
</a></div><div class="nav-item"><a href="/research/" class="nav-link">
  科研
</a></div><div class="nav-item"><a href="/shoot/" class="nav-link">
  摄影
</a></div><div class="nav-item"><a href="https://www.github.com/kun8018" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Tech</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/" aria-current="page" class="sidebar-link">Blogging Like a Hacker</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>周边开发技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>数据库相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>服务器技术</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>桌面端开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>移动端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>进阶前端技术</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech/进阶前端技术/H5游戏开发.html" class="sidebar-link">H5游戏开发</a></li><li><a href="/tech/进阶前端技术/前端工程化一.html" class="sidebar-link">前端进阶（一）-前端工程化</a></li><li><a href="/tech/进阶前端技术/前端工程化二.html" class="sidebar-link">前端进阶（二）-前端工程化</a></li><li><a href="/tech/进阶前端技术/前端进阶三.html" class="sidebar-link">前端进阶（三）-webgl</a></li><li><a href="/tech/进阶前端技术/前端进阶五.html" class="active sidebar-link">/tech/进阶前端技术/前端进阶五.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#数据可视化库概述" class="sidebar-link">数据可视化库概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#d3-可视化库的jquery" class="sidebar-link">D3--可视化库的jquery</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#vega-图表库也能低代码" class="sidebar-link">Vega - 图表库也能低代码</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#g2" class="sidebar-link">G2</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#chart-js" class="sidebar-link">chart.js</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#highcharts" class="sidebar-link">Highcharts</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#anychart" class="sidebar-link">AnyChart</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#fusioncharts" class="sidebar-link">FusionCharts</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#amcharts" class="sidebar-link">amCharts</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#google-chart" class="sidebar-link">Google chart</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#g6" class="sidebar-link">G6</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#keylines" class="sidebar-link">keylines</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#其他开源图表库" class="sidebar-link">其他开源图表库</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#连线图表" class="sidebar-link">连线图表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#jsplumb" class="sidebar-link">jsPlumb</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#vivagraphjs" class="sidebar-link">vivaGraphJs</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#springy" class="sidebar-link">springy</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#graphviz" class="sidebar-link">graphviz</a></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#visjs" class="sidebar-link">visjs</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#echart" class="sidebar-link">echart</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#基础的数据可视化" class="sidebar-link">基础的数据可视化</a></li></ul></li><li class="sidebar-sub-header"><a href="/tech/进阶前端技术/前端进阶五.html#骨架屏实现" class="sidebar-link">骨架屏实现</a></li></ul></li><li><a href="/tech/进阶前端技术/前端进阶六.html" class="sidebar-link">前端进阶（六）</a></li><li><a href="/tech/进阶前端技术/前端进阶四.html" class="sidebar-link">前端进阶（四）</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>静态语言</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>业余研究</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>科学研究</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>前端进阶四：渲染引擎</p> <h2 id="数据可视化库概述"><a href="#数据可视化库概述" class="header-anchor">#</a> 数据可视化库概述</h2> <p>https://zhuanlan.zhihu.com/p/149398216</p> <h3 id="d3-可视化库的jquery"><a href="#d3-可视化库的jquery" class="header-anchor">#</a> D3--可视化库的jquery</h3> <p>安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> d3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>全局导入或者部分导入</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//全局导入</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> d3 <span class="token keyword">from</span> <span class="token string">&quot;d3&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//部分导入</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>scaleLinear<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;d3-scale&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>D3 API，共八种：</p> <p>第一章：核心函数：选择、过渡、数组、数学、请求、格式化、本地化</p> <p>第二章：比例尺：线性比例尺、恒等比例尺、乘方比例尺、对数比例尺、量化比例尺、分位数比例尺、临界值比例尺</p> <p>第三章：可缩放矢量图形。SVG元素、线生成器、径向线生成器、面积生成器、弧生成器、符号生成器、弦生成器、对角线生成器、轴、刷子</p> <p>第四章：时间。时间格式、时间间隔、时间计数</p> <p>第五章：布局。布局有捆绑布局、弦布局、簇布局、力布局、层次布局、直方图布局、包布局、分区布局、饼布局、堆叠布局、树布局、矩形树布局</p> <p>第六章：地理。地理有地理路径、经纬网生成器、球面数学运算、标准抽象投影、标准投影、流</p> <p>第七章：几何：有四叉树、凸包、多边形和泰森多边形</p> <p>第八章：行为：包括拖拽和缩放</p> <p>初始化布局</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>force <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">forceSimulation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">alphaDecay</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>
							 	<span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">,</span>d3<span class="token punctuation">.</span><span class="token function">forceLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
								<span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">'collide'</span><span class="token punctuation">,</span>d3<span class="token punctuation">.</span><span class="token function">forceCollide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">radius</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
								<span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">&quot;charge&quot;</span><span class="token punctuation">,</span>d3<span class="token punctuation">.</span><span class="token function">forceManyBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">strength</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>force<span class="token punctuation">.</span><span class="token function">nodes</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">,</span>d3<span class="token punctuation">.</span><span class="token function">forceLink</span><span class="token punctuation">(</span>links<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">.</span><span class="token function">alpha</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">.</span><span class="token function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>force<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'tick'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>node<span class="token punctuation">.</span>lock<span class="token punctuation">)</span><span class="token punctuation">{</span>
      d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">.</span>uid<span class="token punctuation">]</span><span class="token punctuation">.</span>attr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  links<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">link</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>links<span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>link<span class="token punctuation">.</span>source<span class="token punctuation">.</span>uid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>link<span class="token punctuation">.</span>target<span class="token punctuation">.</span>uid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x1'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> link<span class="token punctuation">.</span>source<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y1'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> link<span class="token punctuation">.</span>source<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x2'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> link<span class="token punctuation">.</span>target<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
    	<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y2'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> link<span class="token punctuation">.</span>target<span class="token punctuation">.</span>y<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-react line-numbers-mode"><pre class="language-text"><code>render(){
  const { width,heigth, nodes, links, scale, translate, selecting, grabbing} = this.props.store;
  return (
  	&lt;svg id=&quot;svg&quot; ref=&quot;svg&quot; width={width} height={height}
      className={cn({
        grab: !selecting &amp;&amp; grabbing,
        grabbing: !selecting &amp;&amp; grabbing
      })}
      &gt;
      &lt;g id=&quot;outg&quot; ref=&quot;outg&quot; transform{`translate(${translate})scale(${scale})`}&gt;
        &lt;g ref=&quot;lines&quot; className=&quot;lines&quot;&gt;
          links.map(link =&gt; (
          	&lt;line
              key = {`${link.source.uid}_${link.target.uid}`}
              ref = {child =&gt; this.links[`${link.source.uid}_${link.target.uid}`] = child}
              x1 = {links.source.x}
              y1 = {links.source.y}
              x2 = {links.target.x}
              y2 = {links.target.y}
              /&gt;          
          ))
        &lt;/g&gt;
        &lt;g ref=&quot;nodes&quot; className=&quot;nodes&quot;&gt;
          {
            nodes.map(node =&gt; (
            	&lt;Node
                key = {node.uid}
                node = {node}
                store = {this.props.store}
                addRef = {child =&gt; this.nodes[node.uid] = child}
                /&gt;
            ))
          }
        &lt;/g&gt;
      &lt;/g&gt;
    &lt;/svg&gt;
  )
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><div class="language-react line-numbers-mode"><pre class="language-text"><code>class Node extends Component {
  render() {
    const { node, addRef, store } = this.props;
    const { force } = store;
    return (
    	&lt;g className=&quot;node&quot;
        ref={child =&gt; {
          this._node = child;
          addRef(child);
        }}
        transform={`translate(${node.x || width / 2}, ${node.y})`}
        &gt;
      	&lt;g id={node.nodeIndex}&gt;
          // 节点图片dom
        &lt;/g&gt;
        {
          node.locked &amp;&amp; (
          	&lt;Lock
              x = {10}
              y = {10}
              release = {()=&gt;{
                node.fixed = false;
                node.locked = false;
                node.fx = null;
                node.fy = null;
                force.alpha(0.3).restart();
              }}
              /&gt;
          )
        }
      &lt;/g&gt;
    )
  }
  
  componentDidMount() {
    this._node._data_ = this.props.node;
    d3.select(this._node)
    	.on('click',d=&gt;{
       // code
    	})
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>drag <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
							<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'start'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  							start <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  							d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>sourceEvent<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">{</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>force<span class="token punctuation">.</span><span class="token function">alphaTarget</span><span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">restart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
  							d<span class="token punctuation">.</span>fx <span class="token operator">=</span> d<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  							d<span class="token punctuation">.</span>fy <span class="token operator">=</span> d<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
							<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'drag'</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  							<span class="token keyword">this</span><span class="token punctuation">.</span>grabbing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  							d<span class="token punctuation">.</span>fx <span class="token operator">=</span> d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
  							d<span class="token punctuation">.</span>fy <span class="token operator">=</span> d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
							<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  							<span class="token keyword">const</span> nowTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  							<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>active<span class="token punctuation">)</span><span class="token punctuation">{</span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>force<span class="token punctuation">.</span><span class="token function">alphaTarget</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
  							<span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> startTime <span class="token operator">&gt;=</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  
                <span class="token punctuation">}</span>
							<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> outg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#outg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>zoomObj <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">zoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
								 	<span class="token punctuation">.</span><span class="token function">scaleExtent</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
									<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'zoom'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  									<span class="token keyword">const</span> <span class="token operator">=</span> transform <span class="token operator">=</span> d3<span class="token punctuation">.</span>event<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
  									self<span class="token punctuation">.</span>scale <span class="token operator">=</span> transform<span class="token punctuation">.</span>k<span class="token punctuation">;</span>
  									self<span class="token punctuation">.</span>translate <span class="token operator">=</span> <span class="token punctuation">[</span>transform<span class="token punctuation">.</span>x<span class="token punctuation">,</span>transform<span class="token punctuation">.</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
  									outg<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
									<span class="token punctuation">}</span><span class="token punctuation">)</span>
									<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="添加元素"><a href="#添加元素" class="header-anchor">#</a> 添加元素</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>D3测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d3.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;New paragraph!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="操作svg"><a href="#操作svg" class="header-anchor">#</a> 操作svg</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> w <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> h <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>

<span class="token comment">// 数据</span>
<span class="token keyword">var</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 创建SVG容器</span>
<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建圆</span>
<span class="token keyword">var</span> circles <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 根据数据设置每个圆的属性</span>
circles<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> h<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="条形图"><a href="#条形图" class="header-anchor">#</a> 条形图</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
  div <span class="token punctuation">.</span>bar <span class="token punctuation">{</span>
    display<span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
    width<span class="token operator">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
    margin<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">2</span>px<span class="token punctuation">;</span>
    background<span class="token operator">:</span> teal<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token keyword">const</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span>

d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  		<span class="token keyword">return</span> <span class="token punctuation">(</span>d <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="散点图"><a href="#散点图" class="header-anchor">#</a> 散点图</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> w <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> h <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> dataset <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">480.90</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">330</span><span class="token punctuation">,</span><span class="token number">95</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">410</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">475</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span>w<span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span>

svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  		<span class="token keyword">return</span> d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  		<span class="token keyword">return</span> d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  		<span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>h<span class="token operator">-</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  		<span class="token keyword">return</span> d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  		<span class="token keyword">return</span> d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  		<span class="token keyword">return</span> d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-family&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sans-serif&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;11px&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h4 id="力导向图"><a href="#力导向图" class="header-anchor">#</a> 力导向图</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>testD3-22-force.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d3.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> h<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> w<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">;</span>
<span class="token comment">// 颜色函数</span>
<span class="token keyword">var</span> colors<span class="token operator">=</span>d3<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">category20</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//创建序数比例尺和包括20中颜色的输出范围</span>
 
<span class="token comment">//(1)定义节点和联系对象数组</span>
<span class="token keyword">var</span> dataset<span class="token operator">=</span><span class="token punctuation">{</span>
    nodes<span class="token operator">:</span><span class="token punctuation">[</span><span class="token comment">//节点</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Adam&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Carride&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Donovan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Edward&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Felicity&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;George&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Hannah&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Iris&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> name<span class="token operator">:</span><span class="token string">&quot;Jerry&quot;</span><span class="token punctuation">}</span> 
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    edges<span class="token operator">:</span><span class="token punctuation">[</span><span class="token comment">//边</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">65</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">76</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">879</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">989</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">643</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">54</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">54</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">45</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">243</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">351</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> source<span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>target<span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">,</span>weight<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>color<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token comment">//(2)转化数据为适合生成力导向图的对象数组</span>
<span class="token keyword">var</span> force<span class="token operator">=</span>d3<span class="token punctuation">.</span>layout<span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">nodes</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span><span class="token comment">//加载节点数据</span>
    <span class="token punctuation">.</span><span class="token function">links</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>edges<span class="token punctuation">)</span><span class="token comment">//加载边数据</span>
    <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">[</span>w<span class="token punctuation">,</span>h<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//设置有效空间的大小</span>
    <span class="token punctuation">.</span><span class="token function">linkDistance</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token comment">//连线的长度</span>
    <span class="token punctuation">.</span><span class="token function">charge</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token comment">//负电荷量，相互排斥设置的负值越大越排斥</span>
    <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置生效</span>
 
<span class="token keyword">var</span> svg<span class="token operator">=</span>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span>w<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">//(3)创建作为连线的svg直线</span>
<span class="token keyword">var</span> edges<span class="token operator">=</span>svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>edges<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//  设置线的颜色</span>
        <span class="token keyword">return</span> <span class="token function">colors</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//设置线的宽度</span>
        <span class="token keyword">return</span> d<span class="token punctuation">.</span>weight<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">//(4) 创建作为连线的svg圆形</span>
<span class="token keyword">var</span> nodes<span class="token operator">=</span>svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>dataset<span class="token punctuation">.</span>nodes<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//设置圆点的半径，圆点的度越大weight属性值越大，可以对其做一点数学变换</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">colors</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>weight<span class="token operator">*</span>d<span class="token punctuation">.</span>weight<span class="token operator">*</span>d<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>force<span class="token punctuation">.</span>drag<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以拖动</span>
 
 <span class="token comment">//(5)打点更新，没有的话就显示不出来了</span>
force<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;tick&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//边</span>
    edges<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x1&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span>  d<span class="token punctuation">.</span>source<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y1&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span>  d<span class="token punctuation">.</span>source<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x2&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span>  d<span class="token punctuation">.</span>target<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y2&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span>  d<span class="token punctuation">.</span>target<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">//节点</span>
    nodes<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> d<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> d<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br></div></div><p>其他函数：</p> <p>d3.forceCenter([x,y])：中心力，将所有节点都推向图标的中心，默认坐标是0，0，施加力时，所有节点的相对位置保持不变</p> <p>d3.forceCollide([radius])：collision，碰撞力，使两个节点接触时像弹簧球一样弹开</p> <p>d3.forceLink([links])：连接力，拉动节点相互连接，好像节点之间有个弹簧一样</p> <p>d3.forceManyBody()：排斥力，类似带电电子的排斥方式，推动所有节点彼此远离</p> <p>d3.force,d3.forceY:定位力，将节点推向期望的点，不同于forceCenter，它们会改变节点的相对位置</p> <h4 id="力导向图带文字"><a href="#力导向图带文字" class="header-anchor">#</a> 力导向图带文字</h4> <h4 id="点替换文字、图片、提示"><a href="#点替换文字、图片、提示" class="header-anchor">#</a> 点替换文字、图片、提示</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>node<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg:image&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;xlink:href&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;http://localhost:8080/spring/imgs/myself.PNG&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-8px&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-8px&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;16px&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;16px&quot;</span><span class="token punctuation">)</span>

node<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg:title&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="弧形箭头连线"><a href="#弧形箭头连线" class="header-anchor">#</a> 弧形箭头连线</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg:defs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;marker&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;suit&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;licensing&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;resolved&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg:marker&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>String<span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;viewBox&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0 -5 10 10&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;refX&quot;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="缩放与拖拽"><a href="#缩放与拖拽" class="header-anchor">#</a> 缩放与拖拽</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="连线link箭头"><a href="#连线link箭头" class="header-anchor">#</a> 连线link箭头</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> defs <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'defs'</span><span class="token punctuation">)</span>

defs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'marker'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string">'marker'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;markerUnits&quot;</span><span class="token punctuation">,</span><span class="token string">'userSpace'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;viewBox&quot;</span><span class="token punctuation">,</span><span class="token string">'-20 -10 20 20'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;refX&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;refY&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;orient&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;markerWidth&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;markerHeight&quot;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;xoverflow&quot;</span><span class="token punctuation">,</span><span class="token string">'visible'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'M-10,-5 L 0, 0 L -10,5'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span><span class="token string">'#595959'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'stroke'</span><span class="token punctuation">,</span><span class="token string">'#595959'</span><span class="token punctuation">)</span>
defs<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'marker'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string">'marker-actived'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;markerUnits&quot;</span><span class="token punctuation">,</span><span class="token string">'userSpace'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;viewBox&quot;</span><span class="token punctuation">,</span><span class="token string">'-20 -10 20 20'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;refX&quot;</span><span class="token punctuation">,</span><span class="token number">25.5</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;refY&quot;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;orient&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;auto&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;markerWidth&quot;</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;markerHeight&quot;</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;xoverflow&quot;</span><span class="token punctuation">,</span><span class="token string">'visible'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">,</span><span class="token string">'M-16,-8 L 0, 0 L -16,8'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span><span class="token string">'#0091FF'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'stroke'</span><span class="token punctuation">,</span><span class="token string">'#0091FF'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill-opacity'</span><span class="token punctuation">,</span><span class="token string">'0.9'</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'stroke-opacity'</span><span class="token punctuation">,</span><span class="token string">'0.6'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h4 id="selection方法"><a href="#selection方法" class="header-anchor">#</a> selection方法</h4> <p>selection.each()</p> <p>selection.sort()</p> <p>selection.filter()</p> <p>selection.node()：返回选择集中第一个非空元素，如果选择集为空则返回null</p> <p>selection.nodes()：返回选择集中所有被选中元素的元素数组</p> <p>selection.empty()：当选择集中没有任何元素时返回true</p> <p>Selection.size()：返回选择集中包含的DOM元素个数</p> <p>selection.clone():</p> <p>Selection.append():</p> <p>selection.remove():</p> <p>selection.insert():</p> <p>selection.raise():</p> <p>selection.lower():</p> <h4 id="映射与集合"><a href="#映射与集合" class="header-anchor">#</a> 映射与集合</h4> <p>d3.set([array])</p> <p>set.has(value):</p> <p>Set.add(value):添加</p> <p>setremove移除</p> <h4 id="d3-graphviz"><a href="#d3-graphviz" class="header-anchor">#</a> d3-graphviz</h4> <p>d3-graphviz可以对d3的点进行操作,各种变化</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//d3js.org/d3.v5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>graph<span class="token punctuation">&quot;</span></span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token style language-css"><span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">var</span> dotIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> graphviz <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#graph&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">graphviz</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> d3<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">ease</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>easeLinear<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">logEvents</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;initEnd&quot;</span><span class="token punctuation">,</span> render<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dotLines <span class="token operator">=</span> dots<span class="token punctuation">[</span>dotIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> dot <span class="token operator">=</span> dotLines<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    graphviz
        <span class="token punctuation">.</span><span class="token function">renderDot</span><span class="token punctuation">(</span>dot<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dotIndex <span class="token operator">=</span> <span class="token punctuation">(</span>dotIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> dots<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> dots <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;, shape=&quot;box&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;, shape=&quot;parallelogram&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;, shape=&quot;pentagon&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'    b -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;yellow&quot;, shape=&quot;star&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;yellow&quot;, shape=&quot;star&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;yellow&quot;, shape=&quot;star&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'    b -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;, shape=&quot;triangle&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;, shape=&quot;diamond&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;, shape=&quot;trapezium&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'    b -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;, shape=&quot;box&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;, shape=&quot;parallelogram&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;, shape=&quot;pentagon&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'    b -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a [fillcolor=&quot;#d62728&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'    a -&gt; c'</span><span class="token punctuation">,</span>
        <span class="token string">'    c -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c [fillcolor=&quot;#2ca02c&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    c -&gt; b'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
        <span class="token string">'digraph  {'</span><span class="token punctuation">,</span>
        <span class="token string">'    node [style=&quot;filled&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'    b [fillcolor=&quot;#1f77b4&quot;]'</span><span class="token punctuation">,</span>
        <span class="token string">'}'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br></div></div><h4 id="d3资源"><a href="#d3资源" class="header-anchor">#</a> d3资源</h4> <p>Https://d3js.org.cn</p> <p>d3案例：https://csacademy.com/app/graph_editor/</p> <p>https://bl.ocks.org/mohdsanadzakirizvi/6fc325042ce110e1afc1a7124d087130</p> <h3 id="vega-图表库也能低代码"><a href="#vega-图表库也能低代码" class="header-anchor">#</a> Vega - 图表库也能低代码</h3> <h3 id="g2"><a href="#g2" class="header-anchor">#</a> G2</h3> <p>G2 是支付宝前端团队开发的，虽然当时 Echarts 已经很成熟了，但支付宝还是选择了自己做了一个，也就是 G2 的前身 <a href="https://link.zhihu.com/?target=https%3A//github.com/acharts/acharts" target="_blank" rel="noopener noreferrer">acharts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它的 API 和 Echarts 基本类似，后来作者看了《The Grammar Of Graphics》那本书，就调整了方向，开始基于这本书的思路开发 G2，这个 G2 的命名就是这本书名里的两个 G。</p> <p>受这本书影响的可视化库有很多，前面说的 Vega-Lite 在作者的论文里就<a href="https://link.zhihu.com/?target=http%3A//idl.cs.washington.edu/papers/vega-lite/" target="_blank" rel="noopener noreferrer">提到过借鉴了不少<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>了，和 G2 一样参考那本书的还有 <a href="https://link.zhihu.com/?target=https%3A//github.com/microsoft/chart-parts" target="_blank" rel="noopener noreferrer">chart-parts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，不过别看它是微软的项目，其实也只有一个人在开发，提交次数非常不稳定，作者同时还在忙另一个更知名的项目 react-dnd，所以大概率以后会弃坑。</p> <p>《The Grammar Of Graphics》里作者主要是借鉴了面向对象的思想，将图表拆分成了很多组成部分，比如数据源、数据转换、坐标系、图形等，通过将它们组装起来实现各种展现效果，从技术角度倒是不新奇，但这本书通过数学的方式来进行组合和分析，看起来非常高级。</p> <h3 id="chart-js"><a href="#chart-js" class="header-anchor">#</a> chart.js</h3> <p>我之前对 Chart.js 这个库了解比较少，几年前第一次发现的时候它的 Star 数就很高了，它现在的 Star 数量高达 49.3k，在 npm 上的周下载量达到百万，和 D3 是一个量级的，恐怕是最火的前端图表库了。</p> <p>既然怎么火，它在技术上情况怎样呢？这个项目的最早提交时间是 2013 年，7 年来提交没怎么中断，然而整个项目代码量只有 1w 多行，它的图表种类少，可配置项也不多，整体来说比 Echarts/Highcharts 都差很远，看了半天实在没搞懂为什么那么火，或许反应出大部分人对图表要求不高，能显示几种场景图表，有点交互和动画就够了。</p> <h3 id="highcharts"><a href="#highcharts" class="header-anchor">#</a> Highcharts</h3> <p>创始在 2006 的时候只想给自己的主页加个图表，当时虽然有 FusionCharts/AnyChart 这些 Flash 的商业方案，但他用不惯就开始自己基于 SVG/VML 开发，可能他是最早这么做，极有可能是 Highcharts 后来居上的原因，使用 SVG/VML 最大的好处是方便前端使用，而之前基于 Flash 的方案和 JavaScript 通信麻烦，往往导致整个页面都得用 Flash 开发，成本比较高，所以后来 FusionCharts/AnyChart 也都转向了 SVG/VML 方案。</p> <p>十四年过去了，它的创始人至今还几乎<a href="https://link.zhihu.com/?target=https%3A//github.com/TorsteinHonsi" target="_blank" rel="noopener noreferrer">天天提交代码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这个项目的贡献者中不少是同一个小镇的，多半是他手把手培养起来的乡亲。。。</p> <p>Highcharts 虽然开源，但商用是需要收费的，很多人看到要花钱就不往下看了，但其实专门做这块的商业公司往往更有优势，前面介绍 D3 的时候提到过，在所有基于 D3 开源的图表库中做得最好的是一个商业公司的产品。</p> <h3 id="anychart"><a href="#anychart" class="header-anchor">#</a> AnyChart</h3> <p>如果你想用商业软件又觉得 Highcharts 太丑，AnyChart 就是个不错的候选，和 Highcharts 类似，AnyChart 也是开源但商用必须收费，它的整体设计比 Highcharts 要漂亮，但影响力远比不上 Highcharts，甚至在 GitHub 上的 Star 只有 <a href="https://link.zhihu.com/?target=https%3A//github.com/AnyChart/AnyChart" target="_blank" rel="noopener noreferrer">248<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，还不如许多个人发布的玩具项目。</p> <p>然而在国内某卖控件的网站上，AnyChart 的下载量很靠前，远高于 Highcharts，它们之间的差距甚至达到百倍，所以 AnyChart 可能更好卖，其中颜值可能是主要原因。</p> <h3 id="fusioncharts"><a href="#fusioncharts" class="header-anchor">#</a> FusionCharts</h3> <p>FusionCharts 来自印度，它的创始人 Pallav Nadhani 的父亲是做 Web 设计的，所以他很早就接触网络，在 16 岁的时候就会用 Excel 来做高中作业，他用的过程中觉得 Excel 里的图表不好用，于是给 <a href="https://link.zhihu.com/?target=http%3A//ASPToday.com" target="_blank" rel="noopener noreferrer">http://ASPToday.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 投稿了一篇文章，提出了 Flash 不仅能用来做小广告，还可以实现交互式图表的想法，这篇文章给他带来了 <code>1500$</code> 的零花钱，普通高中生拿到零花钱多半会很快就和小伙伴们一起挥霍掉，而 Nadhani 拿着这笔钱在 17 岁（2002 年）时候成立了公司，开始开发基于 Flash 的图表库，然而高中辍学创业并不容易，没有投资人会相信一个还没成年的小孩，Nadhani 独自在家开发了三年后才招到第一个人，早期只在网上卖，因为网上不容易发现你是个小孩，发现了肯定不敢买，好在图表方面的需求很旺盛，所以公司不断做大，图表库不仅卖给了很多公司，还卖给了美国联邦政府，连美国总统<a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/File%3AObama_testing_the_Federal_Government_IT_Dashboard.jpg" target="_blank" rel="noopener noreferrer">都在用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="amcharts"><a href="#amcharts" class="header-anchor">#</a> amCharts</h3> <p>amCharts 也来自小国家，它的总部在立陶宛，最开始是只做地图类的图表，后来才有的饼图折线图，它应该是这里面最小的商业公司，整个团队只有 7 个人，其中参与开发的大概 4-5 个，因为人少，所以它的功能相对其它几个商业库要少点，比如不支持 vml（不过现在没人用 IE8 了），可能正是因为觉得做不过，所以它采用了不同的商业策略，是唯一可以免费商用，只有去 logo 才需要付费，这个策略看起来效果不错，它的搜索量是这几个商业库中排名第二的，使用的网站数仅次于 Highcharts。</p> <h3 id="google-chart"><a href="#google-chart" class="header-anchor">#</a> Google chart</h3> <p>Google Charts 在 2008 年就推出了，做得非常早，虽然国内现在没人用，但国外用得很多，有个数据分析说它是最流行的图表库，在网站中的使用量 Highcharts 的<a href="https://link.zhihu.com/?target=https%3A//www.similartech.com/categories/charting" target="_blank" rel="noopener noreferrer">两倍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>Google Charts 有两个版本，一个是通过链接来生成图表图片，另一个是外链的 JavaScript 图表库。</p> <p>通过链接生成图表图片的做法在十几年前非常常见，比如性能监控领域用了好多年的 <a href="https://link.zhihu.com/?target=https%3A//oss.oetiker.ch/rrdtool/" target="_blank" rel="noopener noreferrer">RRDtool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，即便现在你都能在一些股票网站的 k 线图里看到这种做法，使用它的主要原因是当时的前端技术不成熟，浏览器兼容性差，使用这种方式可以轻松在所有浏览器里得到一致的显示效果，下面是一个例子：</p> <h3 id="g6"><a href="#g6" class="header-anchor">#</a> G6</h3> <p><a href="https://github.com/antvis/g6" target="_blank" rel="noopener noreferrer">G6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一个图可视化引擎。它提供了图的绘制、布局、分析、交互、动画等图可视化的基础能力。旨在让关系变得透明，简单。让用户获得关系数据的 Insight。</p> <p>安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> @antv/g6
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>导入</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token constant">G6</span> <span class="token keyword">from</span> <span class="token string">'@antv/g6'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建步骤：1.在html中创建容器</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;mountNode&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.引入 G6 的数据源为 JSON 格式的对象。该对象中需要有节点（<code>nodes</code>）和边（<code>edges</code>）字段，分别用数组表示：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 点集</span>
  nodes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">'node1'</span><span class="token punctuation">,</span> <span class="token comment">// String，该节点存在则必须，节点的唯一标识</span>
      x<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// Number，可选，节点位置的 x 值</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// Number，可选，节点位置的 y 值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      id<span class="token operator">:</span> <span class="token string">'node2'</span><span class="token punctuation">,</span> <span class="token comment">// String，该节点存在则必须，节点的唯一标识</span>
      x<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token comment">// Number，可选，节点位置的 x 值</span>
      y<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">// Number，可选，节点位置的 y 值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 边集</span>
  edges<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      source<span class="token operator">:</span> <span class="token string">'node1'</span><span class="token punctuation">,</span> <span class="token comment">// String，必须，起始点 id</span>
      target<span class="token operator">:</span> <span class="token string">'node2'</span><span class="token punctuation">,</span> <span class="token comment">// String，必须，目标点 id</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>3.创建关系图（实例化）时，至少需要为图设置容器、宽和高。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">G6<span class="token punctuation">.</span>Graph</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token operator">:</span> <span class="token string">'mountNode'</span><span class="token punctuation">,</span> <span class="token comment">// String | HTMLElement，必须，在 Step 1 中创建的容器 id 或容器本身</span>
  width<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token comment">// Number，必须，图的宽度</span>
  height<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// Number，必须，图的高度</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>4.配置数据源，渲染</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>graph<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读取 Step 2 中的数据源到图上</span>
graph<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 渲染图</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="keylines"><a href="#keylines" class="header-anchor">#</a> keylines</h3> <h3 id="其他开源图表库"><a href="#其他开源图表库" class="header-anchor">#</a> 其他开源图表库</h3> <p>开源图表库还有很多 Star 数量比较高的，这里简单汇总一下：</p> <ul><li><a href="https://link.zhihu.com/?target=https%3A//github.com/nhn/tui.chart" target="_blank" rel="noopener noreferrer">TOAST UI Chart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是韩国 NHN 公司搞的，贡献者比较少，感觉快要弃坑了，大公司里的非主业项目经常这样，表示理解。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/gionkunz/chartist-js" target="_blank" rel="noopener noreferrer">Chartist.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 别看它有 12.2k 的 Star，看提交历史肯定弃坑了，3 年只提交了 20 次。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/frappe/charts" target="_blank" rel="noopener noreferrer">Frappe Charts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 代码只有 3.5k 行，最近提交很少且文档很简陋，13.4k Star 说明他们的推广策略很厉害，也是个值得学的案例。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/DmitryBaranovskiy/raphael" target="_blank" rel="noopener noreferrer">Raphael<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 特别古老的前端图形库，2008 年就有了，不少图表库的底层基于它，它自己也有个 <a href="https://link.zhihu.com/?target=https%3A//github.com/DmitryBaranovskiy/g.raphael" target="_blank" rel="noopener noreferrer">g.Raphaël<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 图表库，不过只开发了两年就停了，可能是作者在 Adobe 忙别的事情去了，比如折腾过 <a href="https://link.zhihu.com/?target=https%3A//github.com/adobe-webplatform/Snap.svg" target="_blank" rel="noopener noreferrer">Snap.svg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，但也弃坑了。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/visjs" target="_blank" rel="noopener noreferrer">vis.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 主要是绘制关系图的，曾经有段时间弃坑过，不过最近还有少量更新，类似的还有 <a href="https://link.zhihu.com/?target=https%3A//github.com/dagrejs/dagre" target="_blank" rel="noopener noreferrer">dagre<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://link.zhihu.com/?target=https%3A//gojs.net/latest/index.html" target="_blank" rel="noopener noreferrer">GoJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和 <a href="https://link.zhihu.com/?target=http%3A//www.draw2d.org/" target="_blank" rel="noopener noreferrer">Draw2D<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/tradingview/lightweight-charts" target="_blank" rel="noopener noreferrer">TradingView<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 专注做股票类的，似乎很专业，有不少分析 k 线的小工具。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/leeoniya/uPlot" target="_blank" rel="noopener noreferrer">uPlot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以体积小巧作为主要优点，然而体积小只是因为功能少，2k 多行代码做不了啥，所以它的配置项和交互都很少。</li> <li><a href="https://link.zhihu.com/?target=https%3A//github.com/ankane/chartkick.js" target="_blank" rel="noopener noreferrer">Chartkick.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将 Chart.js、Google Charts 和 Highcharts 的接口封装起来，提供一套更简单的 API，一方面是更简单，另一方面是万一其中某个挂掉了可以直接换别的，然而这也意味着它的功能非常有限，毕竟是取交集。</li> <li>另外还有些 gis 领域的专用可视化库，比如 <a href="https://link.zhihu.com/?target=https%3A//cesium.com/cesiumjs/" target="_blank" rel="noopener noreferrer">cesium<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://link.zhihu.com/?target=https%3A//deck.gl/" target="_blank" rel="noopener noreferrer">deck.gl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，但国内对测绘是有规定的，最好直接用百度、高德。</li></ul> <h2 id="连线图表"><a href="#连线图表" class="header-anchor">#</a> 连线图表</h2> <h3 id="jsplumb"><a href="#jsplumb" class="header-anchor">#</a> jsPlumb</h3> <p>jsPlumb适用于必须绘制图表的Web应用程序.例如类似于Visio的应用程序或工作流程设计器等。由于图表项目和连接的所有参数都是非常精细可控的，因此您可以绘制您可以想到的任何类型的图表的！</p> <p>基本概念</p> <p>Souce 源节点、Target 目标节点、Anchor 锚点、Endpoint 端点、Connector 连接</p> <h3 id="vivagraphjs"><a href="#vivagraphjs" class="header-anchor">#</a> vivaGraphJs</h3> <h3 id="springy"><a href="#springy" class="header-anchor">#</a> springy</h3> <h3 id="graphviz"><a href="#graphviz" class="header-anchor">#</a> graphviz</h3> <h3 id="visjs"><a href="#visjs" class="header-anchor">#</a> visjs</h3> <h2 id="echart"><a href="#echart" class="header-anchor">#</a> echart</h2> <p>高效率绘制各种美观图表</p> <p>安装echart</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> echarts --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装完成后 ECharts 和 zrender 会放在 node_modules 目录下</p> <p>引入echart</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> echarts <span class="token keyword">from</span> <span class="token string">&quot;echarts&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="基础的数据可视化"><a href="#基础的数据可视化" class="header-anchor">#</a> 基础的数据可视化</h3> <p>基本名词解释</p> <table><thead><tr><th style="text-align:left;">名词</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">chart</td> <td style="text-align:left;">是指一个完整的图表，如折线图，饼图等“基本”图表类型或由基本图表组合而成的“混搭”图表，可能包括坐标轴、图例等</td></tr> <tr><td style="text-align:left;">axis</td> <td style="text-align:left;">直角坐标系中的一个坐标轴，坐标轴可分为类目型、数值型或时间型</td></tr> <tr><td style="text-align:left;">xAxis</td> <td style="text-align:left;">直角坐标系中的横轴，通常并默认为类目型</td></tr> <tr><td style="text-align:left;">yAxis</td> <td style="text-align:left;">直角坐标系中的纵轴，通常并默认为数值型</td></tr> <tr><td style="text-align:left;">grid</td> <td style="text-align:left;">直角坐标系中除坐标轴外的绘图网格，用于定义直角系整体布局</td></tr> <tr><td style="text-align:left;">legend</td> <td style="text-align:left;">图例，表述数据和图形的关联</td></tr> <tr><td style="text-align:left;">dataRange</td> <td style="text-align:left;">值域选择，常用于展现地域数据时选择值域范围</td></tr> <tr><td style="text-align:left;">dataZoom</td> <td style="text-align:left;">数据区域缩放，常用于展现大量数据时选择可视范围</td></tr> <tr><td style="text-align:left;">roamController</td> <td style="text-align:left;">缩放漫游组件，搭配地图使用</td></tr> <tr><td style="text-align:left;">toolbox</td> <td style="text-align:left;">辅助工具箱，辅助功能，如添加标线，框选缩放等</td></tr> <tr><td style="text-align:left;">tooltip</td> <td style="text-align:left;">气泡提示框，常用于展现更详细的数据</td></tr> <tr><td style="text-align:left;">timeline</td> <td style="text-align:left;">时间轴，常用于展现同一系列数据在时间维度上的多份数据</td></tr> <tr><td style="text-align:left;">series</td> <td style="text-align:left;">数据系列，一个图表可能包含多个系列，每一个系列可能包含多个数据</td></tr></tbody></table> <p>图表名词</p> <table><thead><tr><th style="text-align:left;">名词</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">line</td> <td style="text-align:left;">折线图，堆积折线图，区域图，堆积区域图。</td></tr> <tr><td style="text-align:left;">bar</td> <td style="text-align:left;">柱形图（纵向），堆积柱形图，条形图（横向），堆积条形图。</td></tr> <tr><td style="text-align:left;">scatter</td> <td style="text-align:left;">散点图，气泡图。散点图至少需要横纵两个数据，更高维度数据加入时可以映射为颜色或大小，当映射到大小时则为气泡图</td></tr> <tr><td style="text-align:left;">k</td> <td style="text-align:left;">K线图，蜡烛图。常用于展现股票交易数据。</td></tr> <tr><td style="text-align:left;">pie</td> <td style="text-align:left;">饼图，圆环图。饼图支持两种（半径、面积）南丁格尔玫瑰图模式。</td></tr> <tr><td style="text-align:left;">radar</td> <td style="text-align:left;">雷达图，填充雷达图。高维度数据展现的常用图表。</td></tr> <tr><td style="text-align:left;">chord</td> <td style="text-align:left;">和弦图。常用于展现关系数据，外层为圆环图，可体现数据占比关系，内层为各个扇形间相互连接的弦，可体现关系数据</td></tr> <tr><td style="text-align:left;">force</td> <td style="text-align:left;">力导布局图。常用于展现复杂关系网络聚类布局。</td></tr> <tr><td style="text-align:left;">map</td> <td style="text-align:left;">地图。内置世界地图、中国及中国34个省市自治区地图数据、可通过标准GeoJson扩展地图类型。支持svg扩展类地图应用，如室内地图、运动场、物件构造等。</td></tr> <tr><td style="text-align:left;">heatmap</td> <td style="text-align:left;">热力图。用于展现密度分布信息，支持与地图、百度地图插件联合使用。</td></tr> <tr><td style="text-align:left;">gauge</td> <td style="text-align:left;">仪表盘。用于展现关键指标数据，常见于BI类系统。</td></tr> <tr><td style="text-align:left;">funnel</td> <td style="text-align:left;">漏斗图。用于展现数据经过筛选、过滤等流程处理后发生的数据变化，常见于BI类系统。</td></tr> <tr><td style="text-align:left;">evnetRiver</td> <td style="text-align:left;">事件河流图。常用于展示具有时间属性的多个事件，以及事件随时间的演化。</td></tr> <tr><td style="text-align:left;">treemap</td> <td style="text-align:left;">矩形式树状结构图，简称：矩形树图。用于展示树形数据结构，优势是能最大限度展示节点的尺寸特征。</td></tr> <tr><td style="text-align:left;">venn</td> <td style="text-align:left;">韦恩图。用于展示集合以及它们的交集。</td></tr> <tr><td style="text-align:left;">tree</td> <td style="text-align:left;">树图。用于展示树形数据结构各节点的层级关系</td></tr> <tr><td style="text-align:left;">wordCloud</td> <td style="text-align:left;">词云。词云是关键词的视觉化描述，用于汇总用户生成的标签或一个网站的文字内容</td></tr></tbody></table> <p>实例</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">//基于准备好的dom,初始化echart图表  </span>
    <span class="token keyword">var</span> myChart <span class="token operator">=</span> ec<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'mainBar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">//定义图表option  </span>
    <span class="token keyword">var</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>  
      <span class="token comment">//标题，每个图表最多仅有一个标题控件，每个标题控件可设主副标题  </span>
      title<span class="token operator">:</span> <span class="token punctuation">{</span>  
        <span class="token comment">//主标题文本，'\n'指定换行  </span>
        text<span class="token operator">:</span> <span class="token string">'2013年广州降水量与蒸发量统计报表'</span><span class="token punctuation">,</span>  
        <span class="token comment">//主标题文本超链接  </span>
        link<span class="token operator">:</span> <span class="token string">'http://www.tqyb.com.cn/weatherLive/climateForecast/2014-01-26/157.html'</span><span class="token punctuation">,</span>  
        <span class="token comment">//副标题文本，'\n'指定换行  </span>
        subtext<span class="token operator">:</span> <span class="token string">'www.stepday.com'</span><span class="token punctuation">,</span>  
        <span class="token comment">//副标题文本超链接  </span>
        sublink<span class="token operator">:</span> <span class="token string">'http://www.stepday.com/myblog/?Echarts'</span><span class="token punctuation">,</span>  
        <span class="token comment">//水平安放位置，默认为左侧，可选为：'center' | 'left' | 'right' | {number}（x坐标，单位px）  </span>
        x<span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span>  
        <span class="token comment">//垂直安放位置，默认为全图顶端，可选为：'top' | 'bottom' | 'center' | {number}（y坐标，单位px）  </span>
        y<span class="token operator">:</span> <span class="token string">'top'</span>  
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//提示框，鼠标悬浮交互时的信息提示  </span>
      tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>  
        <span class="token comment">//触发类型，默认（'item'）数据触发，可选为：'item' | 'axis'  </span>
        trigger<span class="token operator">:</span> <span class="token string">'axis'</span>  
      <span class="token punctuation">}</span><span class="token punctuation">,</span>  
      <span class="token comment">//图例，每个图表最多仅有一个图例  </span>
      legend<span class="token operator">:</span> <span class="token punctuation">{</span>  
        <span class="token comment">//显示策略，可选为：true（显示） | false（隐藏），默认值为true  </span>
        show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
        <span class="token comment">//水平安放位置，默认为全图居中，可选为：'center' | 'left' | 'right' | {number}（x坐标，单位px）  </span>
        x<span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>  
        <span class="token comment">//垂直安放位置，默认为全图顶端，可选为：'top' | 'bottom' | 'center' | {number}（y坐标，单位px）  </span>
        y<span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>  
        <span class="token comment">//legend的data: 用于设置图例，data内的字符串数组需要与sereis数组内每一个series的name值对应  </span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'蒸发量'</span><span class="token punctuation">,</span><span class="token string">'降水量'</span><span class="token punctuation">]</span>  
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//工具箱，每个图表最多仅有一个工具箱  </span>
      toolbox<span class="token operator">:</span> <span class="token punctuation">{</span>  
        <span class="token comment">//显示策略，可选为：true（显示） | false（隐藏），默认值为false  </span>
        show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
        <span class="token comment">//启用功能，目前支持feature，工具箱自定义功能回调处理  </span>
        feature<span class="token operator">:</span> <span class="token punctuation">{</span>  
          <span class="token comment">//辅助线标志  </span>
          mark<span class="token operator">:</span> <span class="token punctuation">{</span>show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//dataZoom，框选区域缩放，自动与存在的dataZoom控件同步，分别是启用，缩放后退  </span>
          dataZoom<span class="token operator">:</span> <span class="token punctuation">{</span>  
            show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
            title<span class="token operator">:</span> <span class="token punctuation">{</span>  
              dataZoom<span class="token operator">:</span> <span class="token string">'区域缩放'</span><span class="token punctuation">,</span>  
              dataZoomReset<span class="token operator">:</span> <span class="token string">'区域缩放后退'</span>  
            <span class="token punctuation">}</span>  
          <span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//数据视图，打开数据视图，可设置更多属性,readOnly 默认数据视图为只读(即值为true)，可指定readOnly为false打开编辑功能  </span>
          dataView<span class="token operator">:</span> <span class="token punctuation">{</span>show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> readOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//magicType，动态类型切换，支持直角系下的折线图、柱状图、堆积、平铺转换  </span>
          magicType<span class="token operator">:</span> <span class="token punctuation">{</span>show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> type<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//restore，还原，复位原始图表  </span>
          restore<span class="token operator">:</span> <span class="token punctuation">{</span>show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//saveAsImage，保存图片（IE8-不支持）,图片类型默认为'png'  </span>
          saveAsImage<span class="token operator">:</span> <span class="token punctuation">{</span>show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
      <span class="token punctuation">}</span><span class="token punctuation">,</span> 
      <span class="token comment">//是否启用拖拽重计算特性，默认关闭(即值为false)  </span>
      calculable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
      <span class="token comment">//直角坐标系中横轴数组，数组中每一项代表一条横轴坐标轴，仅有一条时可省略数值  </span>
      <span class="token comment">//横轴通常为类目型，但条形图时则横轴为数值型，散点图时则横纵均为数值型  </span>
      xAxis<span class="token operator">:</span> <span class="token punctuation">[</span>  
        <span class="token punctuation">{</span>  
          <span class="token comment">//显示策略，可选为：true（显示） | false（隐藏），默认值为true  </span>
          show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
          <span class="token comment">//坐标轴类型，横轴默认为类目型'category'  </span>
          type<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>  
          <span class="token comment">//类目型坐标轴文本标签数组，指定label内容。 数组项通常为文本，'\n'指定换行  </span>
          data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'1月'</span><span class="token punctuation">,</span><span class="token string">'2月'</span><span class="token punctuation">,</span><span class="token string">'3月'</span><span class="token punctuation">,</span><span class="token string">'4月'</span><span class="token punctuation">,</span><span class="token string">'5月'</span><span class="token punctuation">,</span><span class="token string">'6月'</span><span class="token punctuation">,</span><span class="token string">'7月'</span><span class="token punctuation">,</span><span class="token string">'8月'</span><span class="token punctuation">,</span><span class="token string">'9月'</span><span class="token punctuation">,</span><span class="token string">'10月'</span><span class="token punctuation">,</span><span class="token string">'11月'</span><span class="token punctuation">,</span><span class="token string">'12月'</span><span class="token punctuation">]</span>  
        <span class="token punctuation">}</span>  
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">//直角坐标系中纵轴数组，数组中每一项代表一条纵轴坐标轴，仅有一条时可省略数值  </span>
      <span class="token comment">//纵轴通常为数值型，但条形图时则纵轴为类目型  </span>
      yAxis<span class="token operator">:</span> <span class="token punctuation">[</span>  
        <span class="token punctuation">{</span>  
          <span class="token comment">//显示策略，可选为：true（显示） | false（隐藏），默认值为true  </span>
          show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  
          <span class="token comment">//坐标轴类型，纵轴默认为数值型'value'  </span>
          type<span class="token operator">:</span> <span class="token string">'value'</span><span class="token punctuation">,</span>  
          <span class="token comment">//分隔区域，默认不显示  </span>
          splitArea<span class="token operator">:</span> <span class="token punctuation">{</span>show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">//sereis的数据: 用于设置图表数据之用。series是一个对象嵌套的结构；对象内包含对象  </span>
      series<span class="token operator">:</span> <span class="token punctuation">[</span>  
        <span class="token punctuation">{</span>  
          <span class="token comment">//系列名称，如果启用legend，该值将被legend.data索引相关  </span>
          name<span class="token operator">:</span> <span class="token string">'蒸发量'</span><span class="token punctuation">,</span>  
          <span class="token comment">//图表类型，必要参数！如为空或不支持类型，则该系列数据不被显示。  </span>
          type<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span>  
          <span class="token comment">//系列中的数据内容数组，折线图以及柱状图时数组长度等于所使用类目轴文本标签数组axis.data的长度，并且他们间是一一对应的。数组项通常为数值  </span>
          data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">4.9</span><span class="token punctuation">,</span> <span class="token number">7.0</span><span class="token punctuation">,</span> <span class="token number">23.2</span><span class="token punctuation">,</span> <span class="token number">25.6</span><span class="token punctuation">,</span> <span class="token number">76.7</span><span class="token punctuation">,</span> <span class="token number">135.6</span><span class="token punctuation">,</span> <span class="token number">162.2</span><span class="token punctuation">,</span> <span class="token number">32.6</span><span class="token punctuation">,</span> <span class="token number">20.0</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">,</span> <span class="token number">3.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  
          <span class="token comment">//系列中的数据标注内容  </span>
          markPoint<span class="token operator">:</span> <span class="token punctuation">{</span>  
            data<span class="token operator">:</span> <span class="token punctuation">[</span>  
              <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'最大值'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
              <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'min'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'最小值'</span><span class="token punctuation">}</span>  
            <span class="token punctuation">]</span>  
          <span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//系列中的数据标线内容  </span>
          markLine<span class="token operator">:</span> <span class="token punctuation">{</span>  
            data<span class="token operator">:</span> <span class="token punctuation">[</span>  
              <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'average'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'平均值'</span><span class="token punctuation">}</span>  
            <span class="token punctuation">]</span>  
          <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span><span class="token punctuation">,</span>  
        <span class="token punctuation">{</span>  
          <span class="token comment">//系列名称，如果启用legend，该值将被legend.data索引相关  </span>
          name<span class="token operator">:</span> <span class="token string">'降水量'</span><span class="token punctuation">,</span>  
          <span class="token comment">//图表类型，必要参数！如为空或不支持类型，则该系列数据不被显示。  </span>
          type<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span>  
          <span class="token comment">//系列中的数据内容数组，折线图以及柱状图时数组长度等于所使用类目轴文本标签数组axis.data的长度，并且他们间是一一对应的。数组项通常为数值  </span>
          data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2.6</span><span class="token punctuation">,</span> <span class="token number">5.9</span><span class="token punctuation">,</span> <span class="token number">9.0</span><span class="token punctuation">,</span> <span class="token number">26.4</span><span class="token punctuation">,</span> <span class="token number">28.7</span><span class="token punctuation">,</span> <span class="token number">70.7</span><span class="token punctuation">,</span> <span class="token number">175.6</span><span class="token punctuation">,</span> <span class="token number">182.2</span><span class="token punctuation">,</span> <span class="token number">48.7</span><span class="token punctuation">,</span> <span class="token number">18.8</span><span class="token punctuation">,</span> <span class="token number">6.0</span><span class="token punctuation">,</span> <span class="token number">2.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  
          <span class="token comment">//系列中的数据标注内容  </span>
          markPoint<span class="token operator">:</span> <span class="token punctuation">{</span>  
            data<span class="token operator">:</span> <span class="token punctuation">[</span>  
              <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'最大值'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
              <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'min'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'最小值'</span><span class="token punctuation">}</span>  
            <span class="token punctuation">]</span>  
          <span class="token punctuation">}</span><span class="token punctuation">,</span>  
          <span class="token comment">//系列中的数据标线内容  </span>
          markLine<span class="token operator">:</span> <span class="token punctuation">{</span>  
            data<span class="token operator">:</span> <span class="token punctuation">[</span>  
              <span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'average'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'平均值'</span><span class="token punctuation">}</span>  
            <span class="token punctuation">]</span>  
          <span class="token punctuation">}</span>  
        <span class="token punctuation">}</span>  
      <span class="token punctuation">]</span>  
    <span class="token punctuation">}</span><span class="token punctuation">;</span> 
      <span class="token comment">//为echarts对象加载数据              </span>
      myChart<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br></div></div><h2 id="骨架屏实现"><a href="#骨架屏实现" class="header-anchor">#</a> 骨架屏实现</h2> <p>骨架屏(Skeleton Screen)是指在页面数据加载完成前，先给用户展示出页面的大致结构（灰色占位图），在拿到接口数据后渲染出实际页面内容然后替换掉。Skeleton Screen 是近两年开始流行的加载控件，本质上是界面加载过程中的过渡效果。</p> <p>假如能在加载前把网页的大概轮廓预先显示，接着再逐渐加载真正内容，这样既降低了用户的焦灼情绪，又能使界面加载过程变得自然通畅，不会造成网页长时间白屏或者闪烁。这就是 Skeleton Screen ！</p> <p>骨架屏的实现方案：</p> <p>1.使用图片、svg 或者手动编写骨架屏代码：使用 HTML + CSS 的方式，我们可以很快的完成骨架屏效果，但是面对视觉设计的改版以及需求的更迭，我们对骨架屏的跟进修改会非常被动，这种机械化重复劳作的方式此时未免显得有些机动性不足；</p> <p>2.通过预渲染手动书写的代码生成相应的骨架屏：该方案做的比较成熟的是 vue-skeleton-webpack-plugin，通过 vueSSR 结合 webpack 在构建时渲染写好的 vue 骨架屏组件，将预渲染生成的 DOM 节点和相关样式插入到最终输出的 html 中。</p> <p>3.饿了么内部的生成骨架页面的工具：该方案通过一个 webpack 插件 page-skeleton-webpack-plugin 的方式与项目开发无缝集成，属于在自动生成骨架屏方面做的非常强大的了，并且可以启动 UI 界面专门调整骨架屏，但是在面对复杂的页面也会有不尽如人意的地方，而且生成的骨架屏节点是基于页面本身的结构和 CSS，存在嵌套比较深的情况，体积不会太小，并且只支持 history 模式。</p> <p>https://mp.weixin.qq.com/s/yLtk5dNfmXK92b7qe9Eyfw</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/8/2021, 10:45:23 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/tech/进阶前端技术/前端进阶三.html" class="prev">
        前端进阶（三）-webgl
      </a></span> <span class="next"><a href="/tech/进阶前端技术/前端进阶六.html">
        前端进阶（六）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.107701cb.js" defer></script><script src="/assets/js/2.619c82a8.js" defer></script><script src="/assets/js/61.1fbe0671.js" defer></script>
  </body>
</html>
