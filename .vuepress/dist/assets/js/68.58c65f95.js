(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{350:function(t,s,n){"use strict";n.r(s);var a=n(14),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("â€‹      å‰ç«¯æ¡†æ¶ï¼Œå¿«é€Ÿå¼€å‘é¡µé¢ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸åç«¯apiå¿«é€Ÿæ­å»º")]),t._v(" "),n("h2",{attrs:{id:"hooks-åŸç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hooks-åŸç†"}},[t._v("#")]),t._v(" Hooks åŸç†")]),t._v(" "),n("h3",{attrs:{id:"hooksä¸é—­åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hooksä¸é—­åŒ…"}},[t._v("#")]),t._v(" hooksä¸é—­åŒ…")]),t._v(" "),n("p",[n("strong",[t._v("é—­åŒ…æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡")])]),t._v(" "),n("p",[n("strong",[t._v("å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡Aä»¥åŠåœ¨Aä¸­åˆ›å»ºçš„å‡½æ•°B")]),t._v("ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("å½“Bæ‰§è¡Œæ—¶ï¼Œå¦‚æœè®¿é—®äº†Aä¸­çš„å˜é‡å¯¹è±¡ï¼Œé‚£ä¹ˆé—­åŒ…å°±ä¼šäº§ç”Ÿã€‚")])]),t._v(" "),n("p",[n("strong",[t._v("æœ¬è´¨ä¸Šï¼ŒJavaScriptä¸­å¹¶æ²¡æœ‰è‡ªå·±çš„æ¨¡å—æ¦‚å¿µï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨å‡½æ•°/è‡ªæ‰§è¡Œå‡½æ•°æ¥æ¨¡æ‹Ÿæ¨¡å—ã€‚")])]),t._v(" "),n("p",[t._v("ç°åœ¨çš„å‰ç«¯å·¥ç¨‹ä¸­ï¼ˆES6çš„æ¨¡å—è¯­æ³•è§„èŒƒï¼‰ï¼Œä½¿ç”¨çš„æ¨¡å—ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯å‡½æ•°æˆ–è€…è‡ªæ‰§è¡Œå‡½æ•°ã€‚")]),t._v(" "),n("p",[t._v("webpackç­‰æ‰“åŒ…å·¥å…·ä¼šå¸®åŠ©æˆ‘ä»¬å°†å…¶æ‰“åŒ…æˆä¸ºå‡½æ•°")]),t._v(" "),n("p",[t._v("åœ¨reactä¸­ï¼Œä¸€ä¸ªå‡½æ•°ç»„ä»¶è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œå°±å¿…ç„¶äº§ç”Ÿé—­åŒ…")]),t._v(" "),n("p",[t._v("æ¯”å¦‚è¯´")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// Counter.jsx\nexport default function Counter() {}\n\n\n// App.jsx\nimport Counter from './Counter';\nexport default function App() {\n // todo\n   return (\n    <Counter />\n  )\n}\n")])])]),n("p",[t._v("è½¬æ¢æˆä¼ªä»£ç ")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CounterModule "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" AppModule "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Counter "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CounterModule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Counter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("æ¯ä¸€ä¸ªJSæ¨¡å—éƒ½å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå½“ä»£ç æ‰§è¡Œæ—¶ï¼Œè¯¥è¯æ³•ä½œç”¨åŸŸåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¦‚æœåœ¨æ¨¡å—å†…éƒ¨ï¼Œåˆ›å»ºäº†å¯ä¾›å¤–éƒ¨å¼•ç”¨è®¿é—®çš„å‡½æ•°æ—¶ï¼Œå°±ä¸ºé—­åŒ…çš„äº§ç”Ÿæä¾›äº†æ¡ä»¶ï¼Œåªè¦è¯¥å‡½æ•°åœ¨å¤–éƒ¨æ‰§è¡Œè®¿é—®äº†æ¨¡å—å†…éƒ¨çš„å…¶ä»–å˜é‡ï¼Œé—­åŒ…å°±ä¼šäº§ç”Ÿã€‚")])]),t._v(" "),n("p",[t._v("é‚£hookså‘¢ï¼Ÿ")]),t._v(" "),n("p",[t._v("useStateçš„ç®€å•ä»£ç å¦‚ä¸‹")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("useState")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ²¡æœ‰åˆå§‹å€¼ï¼Œå› æ­¤ä½¿ç”¨ä¼ å…¥çš„åˆå§‹å€¼èµ‹å€¼")]),t._v("\n  state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    state "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‡è®¾æ­¤æ–¹æ³•èƒ½è§¦å‘é¡µé¢æ¸²æŸ“")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("åœ¨å…¶ä»–æ¨¡å—ä¸­å¼•å…¥æ—¶")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React from 'react';\nimport {useState} from './state';\n\nfunction Demo() {\n  // ä½¿ç”¨æ•°ç»„è§£æ„çš„æ–¹å¼ï¼Œå®šä¹‰å˜é‡\n  const [counter, setCounter] = useState(0);\n\n  return (\n    <div onClick={() => setCounter(counter + 1)}>hello world, {counter}</div>\n  )\n}\n\nexport default Demo();\n")])])]),n("p",[n("strong",[t._v("å½“useStateåœ¨Demoä¸­æ‰§è¡Œæ—¶ï¼Œè®¿é—®äº†stateä¸­çš„å˜é‡å¯¹è±¡ï¼Œé‚£ä¹ˆé—­åŒ…å°±ä¼šäº§ç”Ÿ")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æ ¹æ®é—­åŒ…çš„ç‰¹æ€§ï¼Œstateæ¨¡å—ä¸­çš„stateå˜é‡ï¼Œä¼šæŒä¹…å­˜åœ¨ã€‚å› æ­¤å½“Demoå‡½æ•°å†æ¬¡æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½è·å–åˆ°ä¸Šä¸€æ¬¡Demoå‡½æ•°æ‰§è¡Œç»“æŸæ—¶stateçš„å€¼ã€‚")]),t._v(" "),n("p",[t._v("https://mp.weixin.qq.com/s/IMgHzeDXIbxMsVomnqx7AQ")]),t._v(" "),n("h3",{attrs:{id:"hookçš„ä½¿ç”¨è§„åˆ™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookçš„ä½¿ç”¨è§„åˆ™"}},[t._v("#")]),t._v(" hookçš„ä½¿ç”¨è§„åˆ™")]),t._v(" "),n("p",[t._v("hookæœ‰ä»¥ä¸‹ä½¿ç”¨è§„åˆ™ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook")]),t._v(" "),n("li",[t._v("ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚")]),t._v(" "),n("li",[t._v("é¡ºåºè°ƒç”¨ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ Hook åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© React èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ useState å’Œ useEffect è°ƒç”¨ä¹‹é—´ä¿æŒ hook çŠ¶æ€çš„æ­£ç¡®ã€‚")])]),t._v(" "),n("p",[t._v("åœ¨å•ä¸ªç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨å¤šä¸ª State Hook æˆ– Effect Hookï¼Œä½†æ˜¯React æ€ä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª "),n("code",[t._v("useState")]),t._v("ï¼Ÿç­”æ¡ˆæ˜¯ React é çš„æ˜¯ Hook è°ƒç”¨çš„é¡ºåºã€‚å› ä¸ºæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼ŒHook çš„è°ƒç”¨é¡ºåºåœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚åªè¦ Hook çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼ŒReact å°±èƒ½æ­£ç¡®åœ°å°†å†…éƒ¨ state å’Œå¯¹åº”çš„ Hook è¿›è¡Œå…³è”ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœåœ¨è¯­å¥ä¸­ä½¿ç”¨hook")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ Hook è¿åç¬¬ä¸€æ¡è§„åˆ™")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("persistForm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'formData'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸­ "),n("code",[t._v("name !== ''")]),t._v(" è¿™ä¸ªæ¡ä»¶å€¼ä¸º "),n("code",[t._v("true")]),t._v("ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæ‰§è¡Œè¿™ä¸ª Hookã€‚ä½†æ˜¯ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶æˆ‘ä»¬å¯èƒ½æ¸…ç©ºäº†è¡¨å•ï¼Œè¡¨è¾¾å¼å€¼å˜ä¸º "),n("code",[t._v("false")]),t._v("ã€‚æ­¤æ—¶çš„æ¸²æŸ“ä¼šè·³è¿‡è¯¥ Hookï¼ŒHook çš„è°ƒç”¨é¡ºåºå‘ç”Ÿäº†æ”¹å˜ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Mary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è¯»å–å˜é‡åä¸º name çš„ stateï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useEffect(persistForm)  // ğŸ”´ æ­¤ Hook è¢«å¿½ç•¥ï¼")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Poppins'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ 2 ï¼ˆä¹‹å‰ä¸º 3ï¼‰ã€‚è¯»å–å˜é‡åä¸º surname çš„ state å¤±è´¥")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updateTitle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ 3 ï¼ˆä¹‹å‰ä¸º 4ï¼‰ã€‚æ›¿æ¢æ›´æ–°æ ‡é¢˜çš„ effect å¤±è´¥")]),t._v("\n")])])]),n("p",[t._v("React ä¸çŸ¥é“ç¬¬äºŒä¸ª "),n("code",[t._v("useState")]),t._v(" çš„ Hook åº”è¯¥è¿”å›ä»€ä¹ˆã€‚React ä¼šä»¥ä¸ºåœ¨è¯¥ç»„ä»¶ä¸­ç¬¬äºŒä¸ª Hook çš„è°ƒç”¨åƒä¸Šæ¬¡çš„æ¸²æŸ“ä¸€æ ·ï¼Œå¯¹åº”çš„æ˜¯ "),n("code",[t._v("persistForm")]),t._v(" çš„ effectï¼Œä½†å¹¶éå¦‚æ­¤ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œåé¢çš„ Hook è°ƒç”¨éƒ½è¢«æå‰æ‰§è¡Œï¼Œå¯¼è‡´ bug çš„äº§ç”Ÿã€‚")]),t._v(" "),n("h4",{attrs:{id:"ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨hook"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨hook"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨hook")]),t._v(" "),n("p",[t._v("react hookæ‰§è¡Œæ—¶ä»¥æ•°ç»„çš„ç»“æ„æ‰§è¡Œï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œå¦‚æœä½¿ç”¨æ¡ä»¶è¯­å¥å°±ä¼šå‡ºç°ç¼ºå°‘æŸä¸€ä¸ªhookï¼Œç„¶åå‡ºç°é”™ä½å¯¼è‡´é”™è¯¯ã€‚")]),t._v(" "),n("p",[t._v("react hookåº•å±‚æ˜¯é“¾è¡¨ï¼Œæ¯ä¸€ä¸ªhookçš„nextæ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªhookçš„ï¼Œifä¼šå¯¼è‡´é¡ºåºä¸æ­£ç¡®ï¼Œä»è€Œå¯¼è‡´æŠ¥é”™ï¼Œæ‰€ä»¥reactæ˜¯ä¸å…è®¸è¿™æ ·ä½¿ç”¨hookçš„ã€‚")]),t._v(" "),n("p",[t._v("å¾ªç¯è¯­å¥ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸èƒ½ç»å¯¹ä¿è¯hookçš„æ‰§è¡Œé¡ºåºã€‚å¦‚æœéè¦åœ¨å¾ªç¯ä¸­ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨reactå®˜æ–¹çš„lint")]),t._v(" "),n("h3",{attrs:{id:"hookçš„é—­åŒ…é™·é˜±-useeffectä¸­å®šæ—¶å™¨çš„ä½¿ç”¨-è¿‡æœŸé—­åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookçš„é—­åŒ…é™·é˜±-useeffectä¸­å®šæ—¶å™¨çš„ä½¿ç”¨-è¿‡æœŸé—­åŒ…"}},[t._v("#")]),t._v(" Hookçš„é—­åŒ…é™·é˜±(useEffectä¸­å®šæ—¶å™¨çš„ä½¿ç”¨ï¼Œè¿‡æœŸé—­åŒ…)")]),t._v(" "),n("p",[t._v("é—­åŒ…é™·é˜±å°±æ˜¯åœ¨React Hookè¿›è¡Œå¼€å‘æ—¶ï¼Œé€šè¿‡useStateå®šä¹‰çš„å€¼æ‹¿åˆ°çš„éƒ½ä¸æ˜¯æœ€æ–°çš„å€¼")]),t._v(" "),n("p",[t._v("ä¸Šä»£ç ")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = () =>{\n   const [count,setCount] = useState(0)\n   useEffect(()=>{\n     const timeId = setInterval(()=>{\n        setCount(count+1)\n     },1000)\n     return ()=>{clearInterval(timeId)}\n   },[])\n   return (\n      <span>{count}</span>\n   )\n}\n")])])]),n("p",[t._v("ä¸Šé¢çš„ä»£ç ä¸­ï¼Œcountå¹¶ä¸ä¼šå’Œç†æƒ³ä¸­ä¸€æ ·æ¯è¿‡ä¸€ç§’è‡ªåŠ¨+1å¹¶æ›´æ–°DOMï¼Œè€Œæ˜¯ä»0å˜æˆ1åï¼Œconsoleæ‰“å°å‡ºçš„countä¸€ç›´æ˜¯è®¾ç«‹çš„é»˜è®¤å€¼0")]),t._v(" "),n("p",[t._v("å› ä¸ºuseEffectçš„ä¾èµ–æ•°ç»„æ˜¯ç©ºæ•°ç»„ï¼Œé‚£setIntervalé‡Œé¢çš„countæ˜¯é€šè¿‡é—­åŒ…å–å¾—çš„å€¼ï¼Œä»–è¯»å–åˆ°çš„ç¬¬ä¸€æ¬¡çš„countï¼Œå¹¶ä¸”useEffectå¹¶æ²¡æœ‰æ›´æ–°ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯0")]),t._v(" "),n("p",[t._v("å¦‚æœå»æ‰useEffectçš„ä¾èµ–æ•°ç»„å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç„¶è€Œä¼šé€ æˆæ¯æ¬¡Appç»„ä»¶æ¸²æŸ“éƒ½ä¼šè¿è¡ŒuseEffecté‡Œé¢çš„å‡½æ•°ï¼Œå°±ä¼šé€ æˆä¸å¿…è¦çš„æµªè´¹å’Œéšè—çš„bug")]),t._v(" "),n("h4",{attrs:{id:"äº§ç”Ÿçš„åŸå› "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#äº§ç”Ÿçš„åŸå› "}},[t._v("#")]),t._v(" äº§ç”Ÿçš„åŸå› ")]),t._v(" "),n("p",[t._v("Reactä»react16ä¹‹åï¼Œæ›´æ¢äº†fiberæ¶æ„ï¼Œå¼•å…¥äº†hooksã€‚Fiberæ¶æ„ä¸­ï¼Œä¸€ä¸ª FiberèŠ‚ç‚¹å°±å¯¹åº”çš„æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚å¯¹äº "),n("code",[t._v("classComponent")]),t._v(" è€Œè¨€ï¼Œæœ‰ "),n("code",[t._v("state")]),t._v(" æ˜¯ä¸€ä»¶å¾ˆæ­£å¸¸çš„äº‹æƒ…ï¼ŒFiberå¯¹è±¡ä¸Šæœ‰ä¸€ä¸ª "),n("code",[t._v("memoizedState")]),t._v(" ç”¨äºå­˜æ”¾ç»„ä»¶çš„ "),n("code",[t._v("state")]),t._v("ã€‚okï¼Œç°åœ¨çœ‹ hooks æ‰€é’ˆå¯¹çš„ "),n("code",[t._v("FunctionComponnet")]),t._v("ã€‚ æ— è®ºå¼€å‘è€…æ€ä¹ˆæŠ˜è…¾ï¼Œä¸€ä¸ªå¯¹è±¡éƒ½åªèƒ½æœ‰ä¸€ä¸ª "),n("code",[t._v("state")]),t._v(" å±æ€§æˆ–è€… "),n("code",[t._v("memoizedState")]),t._v("  å±æ€§ï¼Œå¯æ˜¯ï¼Œè°çŸ¥é“å¯çˆ±çš„å¼€å‘è€…ä»¬ä¼šåœ¨ "),n("code",[t._v("FunctionComponent")]),t._v(" é‡Œå†™ä¸Šå¤šå°‘ä¸ª "),n("code",[t._v("useState")]),t._v("ï¼Œ"),n("code",[t._v("useEffect")]),t._v(" ç­‰ç­‰ ? æ‰€ä»¥ï¼Œreactç”¨äº†é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„æ¥å­˜å‚¨ "),n("code",[t._v("FunctionComponent")]),t._v(" é‡Œé¢çš„ hooks")]),t._v(" "),n("p",[t._v("æ¯”å¦‚")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function App(){\n    const [count, setCount] = useState(1)\n    const [name, setName] = useState('chechengyi')\n    useEffect(()=>{\n        \n    }, [])\n    const text = useMemo(()=>{\n        return 'ddd'\n    }, [])\n}\n")])])]),n("p",[t._v("åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œä¸ºæ¯ä¸ªhookséƒ½åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡")]),t._v(" "),n("div",{staticClass:"language-typescript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Hook")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  memoizedState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  baseState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  baseUpdate"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Update"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  queue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UpdateQueue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  next"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Hook "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("è¿™ä¸ªå¯¹è±¡çš„"),n("code",[t._v("memoizedState")]),t._v("å±æ€§å°±æ˜¯ç”¨æ¥å­˜å‚¨ç»„ä»¶ä¸Šä¸€æ¬¡æ›´æ–°åçš„ "),n("code",[t._v("state")]),t._v(","),n("code",[t._v("next")]),t._v("æ¯«æ— ç–‘é—®æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªhookå¯¹è±¡ã€‚åœ¨ç»„ä»¶æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œhookså‡½æ•°æ‰§è¡Œçš„é¡ºåºæ˜¯ä¸å˜çš„ï¼Œå°±å¯ä»¥æ ¹æ®è¿™ä¸ªé“¾è¡¨æ‹¿åˆ°å½“å‰hookså¯¹åº”çš„"),n("code",[t._v("Hook")]),t._v("å¯¹è±¡ï¼Œå‡½æ•°å¼ç»„ä»¶å°±æ˜¯è¿™æ ·æ‹¥æœ‰äº†stateçš„èƒ½åŠ›ã€‚")]),t._v(" "),n("p",[t._v("æ‰€ä»¥hooksä¸èƒ½å†™åˆ°if elseè¯­å¥ä¸­äº†ã€‚å› ä¸ºè¿™æ ·å¯èƒ½ä¼šå¯¼è‡´é¡ºåºé”™ä¹±ï¼Œå¯¼è‡´å½“å‰hooksæ‹¿åˆ°çš„ä¸æ˜¯è‡ªå·±å¯¹åº”çš„Hookå¯¹è±¡ã€‚")]),t._v(" "),n("p",[t._v("å›åˆ°useEffectä¸­é—­åŒ…çš„é—®é¢˜ã€‚")]),t._v(" "),n("p",[t._v("æ¯”å¦‚ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ‰§è¡Œ "),n("code",[t._v("App()")]),t._v("ï¼Œæ‰§è¡Œ "),n("code",[t._v("useState")]),t._v(" è®¾ç½®äº†åˆå§‹çŠ¶æ€ä¸º1ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ "),n("code",[t._v("count")]),t._v(" ä¸º1ã€‚ç„¶åæ‰§è¡Œäº† "),n("code",[t._v("useEffect")]),t._v("ï¼Œå›è°ƒå‡½æ•°æ‰§è¡Œï¼Œè®¾ç½®äº†ä¸€ä¸ªå®šæ—¶å™¨æ¯éš” 1s æ‰“å°ä¸€æ¬¡ "),n("code",[t._v("count")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("æ¥ç€æƒ³è±¡å¦‚æœ "),n("code",[t._v("click")]),t._v(" å‡½æ•°è¢«è§¦å‘äº†ï¼Œè°ƒç”¨ "),n("code",[t._v("setCount(2)")]),t._v(" è‚¯å®šä¼šè§¦å‘reactçš„æ›´æ–°ï¼Œæ›´æ–°åˆ°å½“å‰ç»„ä»¶çš„æ—¶å€™ä¹Ÿæ˜¯æ‰§è¡Œ "),n("code",[t._v("App()")]),t._v("ï¼Œä¹‹å‰è¯´çš„é“¾è¡¨å·²ç»å½¢æˆäº†å“ˆï¼Œæ­¤æ—¶ "),n("code",[t._v("useState")]),t._v(" å°† "),n("code",[t._v("Hook")]),t._v(" å¯¹è±¡ ä¸Šä¿å­˜çš„çŠ¶æ€ç½®ä¸º2ï¼Œ é‚£ä¹ˆæ­¤æ—¶ "),n("code",[t._v("count")]),t._v(" ä¹Ÿä¸º2äº†ã€‚ç„¶ååœ¨æ‰§è¡Œ "),n("code",[t._v("useEffect")]),t._v(" ç”±äºä¾èµ–æ•°ç»„æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œæ‰€ä»¥æ­¤æ—¶å›è°ƒå¹¶ä¸ä¼šè¢«æ‰§è¡Œã€‚")]),t._v(" "),n("p",[t._v("okï¼Œè¿™æ¬¡æ›´æ–°çš„è¿‡ç¨‹ä¸­æ ¹æœ¬å°±æ²¡æœ‰æ¶‰åŠåˆ°è¿™ä¸ªå®šæ—¶å™¨ï¼Œè¿™ä¸ªå®šæ—¶å™¨è¿˜åœ¨åšæŒçš„ï¼Œé»˜é»˜çš„ï¼Œæ¯éš”1sæ‰“å°ä¸€æ¬¡ "),n("code",[t._v("count")]),t._v("ã€‚ æ³¨æ„è¿™é‡Œæ‰“å°çš„ "),n("code",[t._v("count")]),t._v(" ï¼Œæ˜¯ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ "),n("code",[t._v("App()")]),t._v(" æ—¶çš„ "),n("code",[t._v("count")]),t._v("ï¼Œ "),n("code",[t._v("count")]),t._v("çš„å€¼ä¸º1ï¼Œ"),n("strong",[t._v("å› ä¸ºåœ¨å®šæ—¶å™¨çš„å›è°ƒå‡½æ•°é‡Œé¢è¢«å¼•ç”¨äº†ï¼Œå½¢æˆäº†é—­åŒ…ä¸€ç›´è¢«ä¿å­˜")])]),t._v(" "),n("p",[t._v("æ‰€ä»¥useEffectæˆ–è€…useMemoä¾èµ–æ•°ç»„å­˜åœ¨çš„æ„ä¹‰ï¼Œæ˜¯reactä¸ºäº†åˆ¤å®šï¼Œåœ¨"),n("strong",[t._v("æœ¬æ¬¡æ›´æ–°")]),t._v("ä¸­ï¼Œæ˜¯å¦éœ€è¦æ‰§è¡Œå…¶ä¸­çš„å›è°ƒå‡½æ•°ï¼Œè¿™é‡Œä¾èµ–äº†çš„num2ï¼Œè€Œnum2æ”¹å˜äº†ã€‚å›è°ƒå‡½æ•°è‡ªç„¶ä¼šæ‰§è¡Œï¼Œ è¿™æ—¶å½¢æˆçš„é—­åŒ…å¼•ç”¨çš„å°±æ˜¯æœ€æ–°çš„num1å’Œnum2ï¼Œæ‰€ä»¥ï¼Œè‡ªç„¶èƒ½å¤Ÿæ‹¿åˆ°æ–°é²œçš„å€¼ã€‚é—®é¢˜çš„å…³é”®ï¼Œåœ¨äºå›è°ƒå‡½æ•°æ‰§è¡Œçš„æ—¶æœºï¼Œé—­åŒ…å°±åƒæ˜¯ä¸€ä¸ªç…§ç›¸æœºï¼ŒæŠŠå›è°ƒå‡½æ•°æ‰§è¡Œçš„é‚£ä¸ªæ—¶æœºçš„é‚£äº›å€¼ä¿å­˜äº†ä¸‹æ¥ã€‚")]),t._v(" "),n("p",[t._v("useRefçš„åŸç†")]),t._v(" "),n("p",[t._v("åˆå§‹åŒ–çš„ "),n("code",[t._v("useRef")]),t._v(" æ‰§è¡Œä¹‹åï¼Œè¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚")]),t._v(" "),n("p",[t._v("ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç»„ä»¶æ¯ä¸€æ¬¡æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ã€‚ æ¯”å¦‚ "),n("code",[t._v("ref = useRef()")]),t._v(" æ‰€è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œæ¯æ¬¡ç»„ä»¶æ›´æ–°æ‰€ç”Ÿæˆçš„"),n("code",[t._v("ref")]),t._v("æŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œ é‚£ä¹ˆå½“ç„¶èƒ½å¤Ÿæ¯æ¬¡éƒ½æ‹¿åˆ°æœ€æ–°é²œçš„å€¼äº†ã€‚")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("    /* å°†è¿™äº›ç›¸å…³çš„å˜é‡å†™åœ¨å‡½æ•°å¤– ä»¥æ¨¡æ‹Ÿreact hookså¯¹åº”çš„å¯¹è±¡ */\n\tlet isC = false\n\tlet isInit = true; // æ¨¡æ‹Ÿç»„ä»¶ç¬¬ä¸€æ¬¡åŠ è½½\n\tlet ref = {\n\t\tcurrent: null\n\t}\n\n\tfunction useEffect(cb){\n\t\t// è¿™é‡Œç”¨æ¥æ¨¡æ‹Ÿ useEffect ä¾èµ–ä¸º [] çš„æ—¶å€™åªæ‰§è¡Œä¸€æ¬¡ã€‚\n \t\tif (isC) return\n\t\tisC = true\t\n\t\tcb()\t\n\t}\n\n\tfunction useRef(value){\n\t\t// ç»„ä»¶æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½çš„è¯è®¾ç½®å€¼ å¦åˆ™ç›´æ¥è¿”å›å¯¹è±¡\n\t\tif ( isInit ) {\n\t\t\tref.current = value\n\t\t\tisInit = false\n\t\t}\n\t\treturn ref\n\t}\n\n\tfunction App(){\n\t\tlet ref_ = useRef(1)\n\t\tref_.current++\n\t\tuseEffect(()=>{\n\t\t\tsetInterval(()=>{\n\t\t\t\tconsole.log(ref.current) // 3\n\t\t\t}, 2000)\n\t\t})\n\t}\n\n\t\t// è¿ç»­æ‰§è¡Œä¸¤æ¬¡ ç¬¬ä¸€æ¬¡ç»„ä»¶åŠ è½½ ç¬¬äºŒæ¬¡ç»„ä»¶æ›´æ–°\n\tApp()\n\tApp()\n")])])]),n("p",[t._v("å¦å¤–çš„è§£å†³æ–¹å¼æ˜¯ï¼Œåªè¦æˆ‘ä»¬èƒ½ä¿è¯æ¯æ¬¡ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œ"),n("code",[t._v("useState")]),t._v(" è¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Ÿæˆ‘ä»¬ä¹Ÿèƒ½ç»•å¼€é—­åŒ…é™·é˜±è¿™ä¸ªæƒ…æ™¯")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function App() {\n  // return <Demo1 />\n  return <Demo2 />\n}\n\nfunction Demo2(){\n  const [obj, setObj] = useState({name: 'chechengyi'})\n\n  useEffect(()=>{\n    setInterval(()=>{\n      console.log(obj)\n    }, 2000)\n  }, [])\n  \n  function handClick(){\n    setObj((prevState)=> {\n      var nowObj = Object.assign(prevState, {\n        name: 'baobao',\n        age: 24\n      })\n      console.log(nowObj == prevState)\n      return nowObj\n    })\n  }\n  return (\n    <div>\n      <div>\n        <span>name: {obj.name} | age: {obj.age}</span>\n        <div><button onClick={handClick}>click!</button></div>\n      </div>\n    </div>\n  )\n}\n")])])]),n("h4",{attrs:{id:"è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("p",[n("strong",[t._v("ä½¿ç”¨setstateå›è°ƒ")])]),t._v(" "),n("p",[t._v("æŠŠsetCount(count+1)æ”¹æˆsetCount(count=>count+1)ï¼Œå‡½æ•°å¼æ›´æ–°")]),t._v(" "),n("p",[t._v("å®ƒå…è®¸æˆ‘ä»¬æŒ‡å®šstateå¦‚ä½•æ”¹å˜è€Œä¸å¼•ç”¨å½“å‰çš„stateï¼Œå› ä¸ºå›è°ƒå‡½æ•°ä¸­çš„å‚æ•°æ˜¯æœ€æ–°çš„countå€¼")]),t._v(" "),n("p",[n("strong",[t._v("ä½¿ç”¨useReducerä»£æ›¿")])]),t._v(" "),n("p",[t._v("æŠŠsetCountæ”¹æˆuseReducerçš„dispatchï¼Œå› ä¸ºuseReducerçš„dispatchçš„èº«ä»½æ°¸è¿œæ˜¯ç¨³å®šçš„ã€‚å³ä½¿reducerå‡½æ•°æ˜¯å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨ä¸”ä¾èµ–props")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const setCountReducer = (state,action)=>{\n   switch(action.type){\n     case 'add':\n       return state+action.value \n     case 'minus':\n       return state-action.value\n     default: \n       return state\n   }\n}\n\nconst App = () =>{\n  const [count,dispatch] = useReducer(setCountReducer,0)\n  useEffect(()=>{\n    const timeId = setInterval(()=>{\n      dispatch({type:'add',value:1})\n    },1000)\n    return ()=> clearInterval(timeId)\n  },[])\n  return (\n     <span>{count}</span>\n  )\n} \n")])])]),n("p",[n("strong",[t._v("ä½¿ç”¨useRefå­˜å‚¨å˜é‡")])]),t._v(" "),n("p",[t._v("é€šè¿‡useRefç”Ÿæˆçš„å¯¹è±¡é»˜è®¤éƒ½æ˜¯{current:{}},æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä»–ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸ä¼šå› ä¸ºç»„ä»¶çš„é‡æ–°æ¸²æŸ“å¯¼è‡´å–å¾—é—­åŒ…çš„å¯¹è±¡å¼•ç”¨ï¼Œå› æ­¤å®ƒä¸ä»…å¯ä»¥ç»‘å®šDOMï¼Œä¹Ÿå¯ä»¥ç»‘å®šä»»æ„æˆ‘ä»¬æƒ³ç»‘å®šçš„æ•°æ®")]),t._v(" "),n("p",[t._v("æ”¹é€ ä»£ç å¦‚ä¸‹")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = () =>{\n  const [count,setCount] = useState(0)\n  const countRef = useRef()\n  countRef.current = count\n  useEffect(()=>{\n    const timeId = setInterval(()=>{\n      setCount(countRef.current+1)\n    },1000)\n    return ()=> clearInterval(timeId)\n  },[])\n  return (\n     <span>{countRef.current}</span>\n  )\n}\n")])])]),n("h4",{attrs:{id:"å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ"}},[t._v("#")]),t._v(" å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ")]),t._v(" "),n("p",[t._v("å¼‚æ­¥å‡½æ•°")]),t._v(" "),n("p",[t._v("ä½¿ç”¨setIntervalå’ŒsetTimeoutå‡½æ•°æ—¶ï¼Œå†…éƒ¨çš„å˜é‡è¯»å–çš„æ˜¯å¼‚æ­¥å‡½æ•°åœ¨è¿è¡Œæ—¶ç»„ä»¶å¤„åœ¨é—­åŒ…æƒ…å†µä¸‹çš„å½“å‰å€¼ï¼Œå› ä¸ºåœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨çš„æ•°æ®å¹¶ä¸ä¼šåœ¨domæ›´æ–°ä¹‹åæ›´æ–°ä¸ºæ–°çš„å€¼ï¼Œä»–ä»¬çš„å˜é‡å¼•ç”¨å·²ç»ä¸æ˜¯åŒä¸€ä¸ªäº†")]),t._v(" "),n("p",[t._v("ä¸Šä»£ç ")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = ()=>{\n  const [count,setCount] = useState(0)\n  const consoleCount = ()=>{\n    const timeId = setTimeout(()=>{\n       console.log(count)\n    },2000)\n    return ()=> clearTimeout(timeId)\n  }\n  return (\n    <div>\n      <span>{count}</span>\n      <button onClick={()=>setCount(count+1)}>æŒ‰æˆ‘åŠ 1</button>\n      <button onClick={consoleCount}>è¾“å‡ºcount</button>\n    </div>\n  )\n}\n")])])]),n("p",[t._v("å…ˆç‚¹å‡»ä¸‰æ¬¡åŠ 1æŒ‰é’®ï¼ŒæŠŠcountå˜æˆ3ï¼Œç„¶åç‚¹å‡»è¾“å‡ºæŒ‰é’®ï¼Œæ­¤æ—¶å†ç‚¹å‡»åŠ 1æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºçš„countè¿˜æ˜¯3ï¼Œå³è¾“å‡ºçš„countæ˜¯æ—§å€¼")]),t._v(" "),n("p",[t._v("domç›‘å¬å‡½æ•°äº‹ä»¶ä¸­çš„åŒ¿åå‡½æ•°")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = () =>{\n    const [count,setCount] = useState(0)\n    const consoleCount = ()=>{\n      console.log(count)\n    }\n    useEffect(()=>{\n      window.addEventListener('scroll',consoleCount)\n      return ()=>{\n         window.removeEventListener('scroll',consoleCount)\n      }\n    },[])\n  \n    return (\n       <div style={{height:'400vh'}}>\n         <span>{count}</span>\n        <button onClick={()=>setCount(count+1)}>æŒ‰æˆ‘åŠ 1</button>\n      <button onClick={consoleCount}>è¾“å‡ºcount</button>\n      </div>\n    )\n}\n")])])]),n("p",[t._v("å¯ä»¥çœ‹åˆ°ä¸ç®¡é¡µé¢æ€ä¹ˆæ»šåŠ¨ï¼Œè¾“å‡ºçš„countæ°¸è¿œæ˜¯0ã€‚å› ä¸ºaddEventListeneråªåœ¨useEffectåˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œäº†ç»‘å®šï¼Œæ‰§è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œcountè¯»å–çš„æ˜¯ç»‘å®šå‡½æ•°æ—¶çš„æ—§å€¼")]),t._v(" "),n("p",[t._v("ä½¿ç”¨useRef()å­˜å‚¨å®ä¾‹å˜é‡ä¹Ÿèƒ½è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯reactå®˜æ–¹æ¨èçš„æ–¹æ³•ã€‚")]),t._v(" "),n("p",[t._v("æ¯”å¦‚ä¸Šé¢çš„countï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ userefä¸stateè¿›è¡Œå¯¹æ¯”")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('import React, { useState, useRef, useEffect } from "react";\n\nexport default function App() {\n\n  const [count, setCount] = useState(0);\n  const latestCount = useRef(count);\n\n  useEffect(() => {\n    latestCount.current = count;\n  });\n\n  function handleAlertclick() {\n    setTimeout(() => {\n      alert("latestCount.current:" + latestCount.current + \'.. count: \' + count);\n    }, 2000);\n  }\n  \n  return (\n    <div>\n      <p>å½“å‰countï¼š {count} </p>\n      <button onClick={() => setCount(count + 1)}>count + 1</button>\n      <button onClick={handleAlertclick}> æç¤º </button>\n    </div>\n  )\n}\n')])])]),n("h3",{attrs:{id:"ä½¿ç”¨react-hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨react-hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡"}},[t._v("#")]),t._v(" ä½¿ç”¨react hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡")]),t._v(" "),n("p",[t._v("ä½¿ç”¨useRefä¿å­˜å­ç»„ä»¶çŠ¶æ€ï¼Œå½“çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œç›´æ¥æ›´æ–°refå€¼ï¼Œå½“å­ç»„ä»¶clickæ—¶ï¼Œåœ¨æ›´æ–°refå€¼åï¼Œå†è°ƒç”¨ä¸€æ¬¡updateè§¦å‘å­ç»„ä»¶æ¸²æŸ“")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React,{useEffect,useMemo,useState,useRef} from 'react'\nfunction A(){\n   const [count,setCount] = useState(0);\n   \n   return (\n      <div>\n        <p>æˆ‘æ˜¯çˆ¶ç»„ä»¶</p>\n        <p>çˆ¶ç»„ä»¶çš„countæ˜¯{count}</p>\n        <button>click</button>\n        <B count={count}/>\n      </div>\n   );\n}\n\nconst B = React.memo(({count:}{count:number})=>{\n  const numberRef = useRef(0);\n  const [,update] = useState({});\n  const updateNumber = () =>{\n    numberRef.current++;\n    update({});\n  };\n  \n  useMemo(()=>{\n    numberRef.current = count;\n  },[count])\n  \n  console.log('å­ç»„ä»¶Render')\n  \n  return(\n     <div>\n       <p>æˆ‘æ˜¯å­ç»„ä»¶</p>\n       <p>å­ç»„ä»¶çš„numberæ˜¯{numberRef.current}</p>\n       <button onClick={updateNumber}>click</button>\n     </div>\n  )\n})\n")])])]),n("h3",{attrs:{id:"hookä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«"}},[t._v("#")]),t._v(" Hookä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«")]),t._v(" "),n("p",[t._v("Hookæœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¸æ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢")]),t._v(" "),n("p",[t._v("1ã€‚è°ƒç”¨æ—¶æœºå’Œè°ƒç”¨æ–¹æ³•ä¸åŒ")]),t._v(" "),n("p",[t._v("åœ¨FCä¸­ä½¿ç”¨æ—¶ï¼Œè‡ªå®šä¹‰hookå’Œcommon functionéƒ½é€šè¿‡importä½œä¸ºFCçš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯è°ƒç”¨çš„æ—¶æœºä¸åŒï¼Œhookæ˜¯åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ï¼Œè€Œé€šç”¨å‡½æ•°åˆ™éœ€è¦æ‰‹åŠ¨è°ƒç”¨")]),t._v(" "),n("p",[t._v("2.å‘½åæ–¹å¼ä¸åŒ")]),t._v(" "),n("p",[t._v("hookä¸€èˆ¬ä½¿ç”¨useXXXå‘½åï¼ŒCFå°±ä¼šæ¯”è¾ƒçµæ´»")]),t._v(" "),n("p",[t._v("3.èƒ½ä½¿ç”¨çš„å·¥å…·ä¸åŒ")]),t._v(" "),n("p",[t._v("è‡ªå®šä¹‰hookä¸­ä¸€èˆ¬ä¼šè°ƒç”¨å…¶ä»–hookï¼Œæ¯”å¦‚useeffectã€useStateï¼Œä½†æ˜¯æ™®é€šå‡½æ•°åªèƒ½å¤„ç†æ²¡æœ‰hookçš„é€»è¾‘")]),t._v(" "),n("p",[t._v("4.ä½¿ç”¨åœºæ™¯ä¸åŒ")]),t._v(" "),n("p",[t._v("CFå¯ä»¥è¢«ä½¿ç”¨åœ¨ä»»ä½•åœ°æ–¹ï¼Œä½†hookåªèƒ½è¢«ç”¨åœ¨FCæˆ–å…¶ä»–hookä¸­")]),t._v(" "),n("h3",{attrs:{id:"æ›´æ–°æ¬¡æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ–°æ¬¡æ•°"}},[t._v("#")]),t._v(" æ›´æ–°æ¬¡æ•°")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function setStateProps () {\n  const [count, setCount] = useState(-1);\n  \n  useEffect(()=> {\n    setCount(1)\n  })\n  \n  console.log('render') \n  \n  return (\n \t\t<div>\n    \t<h3>page</h3>\n      <p>{count}</p>\n    </div>\n  )\n}\n")])])]),n("p",[t._v("ä¸Šé¢çš„ä»£ç ä¼šlogä¸‰æ¬¡ï¼Œä¸€æ¬¡åœ¨åˆå§‹åŒ–ï¼Œä¸€æ¬¡åœ¨setStateï¼Œè¿˜æœ‰ä¸€æ¬¡æ˜¯æ¯”è¾ƒpropsï¼Œç›¸åŒåˆ™ä¸å†æ‰§è¡Œ")]),t._v(" "),n("h2",{attrs:{id:"hookå†™æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookå†™æ³•"}},[t._v("#")]),t._v(" Hookå†™æ³•")]),t._v(" "),n("h3",{attrs:{id:"hookè°ƒç”¨å¼‚æ­¥æ¥å£å†™æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookè°ƒç”¨å¼‚æ­¥æ¥å£å†™æ³•"}},[t._v("#")]),t._v(" Hookè°ƒç”¨å¼‚æ­¥æ¥å£å†™æ³•")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nfunction App() {\n  const [data, setData] = useState({ products: [{\n    productId: '123',\n    productName: 'macbook'\n  }] });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError,setIsError] = useState(false);\n  \n  useEffect(()=> {\n    const fetchData = async()=> {\n      setIsError(false);\n      setIsLoading(true);\n      \n      try {\n        const result = await axios (\n        \t'https://c.com/api/products?date=today',\n        )\n        setData(result.data);\n      }catch(e){\n        setIsError(true);\n      }\n      \n      setIsLoading(false);\n    }\n    fetchData();\n  },[]);\n  \n  return (\n  \t<div>\n      { isError && <div></div>}\n      { isLoading ? (\n      \t<div>Loading...</div>\n      ):(\n      \t<ul>\n        \t{data.products.map(i=> (\n          \t<li key=\"{i.productId}\">\n              {i.productName}\n            </li>\n          ))}\n        </ul>\n      )};\n    </div>\n  )\n}\n\nexport default App;\n")])])]),n("p",[t._v("ä¹Ÿå¯ä»¥ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const MyFunctionnalComponent: React.FC = props => {\n  useEffect(()=>{\n    (async function anyNameFunction() {\n      await loadContent();\n    })();\n  },[]);\n  return <div></div>\n}\n")])])]),n("h3",{attrs:{id:"hook-tså†™æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hook-tså†™æ³•"}},[t._v("#")]),t._v(" hook tså†™æ³•")]),t._v(" "),n("p",[t._v("usestateå¦‚æœåˆå§‹å€¼ä¸æ˜¯null/undefinedï¼Œæ˜¯å…·å¤‡ç±»å‹æ¨å¯¼èƒ½åŠ›çš„ã€‚æ ¹æ®ä¼ å…¥çš„åˆå§‹å€¼æ¨æ–­å‡ºç±»å‹ã€‚åˆå§‹å€¼å¦‚æœæ˜¯null/undefinedåˆ™éœ€è¦ä¼ é€’ç±»å‹å®šä¹‰æ‰èƒ½è¿›è¡Œçº¦æŸã€‚ä¸€èˆ¬æƒ…å†µä¸‹è¿˜æ˜¯æ¨èä¼ å…¥ç±»å‹")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const [value, setValue] = useState(0)\n\nconst [value, setValue] = useState<number>(0)\n\nconst [string, setString] = useState<string>('')\n\nconst [array, setArray] = useState<any[]>([])\n")])])]),n("p",[t._v("useContextä¸€èˆ¬æ ¹æ®ä¼ å…¥çš„contextå€¼å°±å¯ä»¥æ¨æ–­å‡ºè¿”å›ç±»å‹ï¼Œä¸éœ€è¦ä¼ é€’ç±»å‹")]),t._v(" "),n("p",[t._v("useEffectå’ŒuseLayoutEffectæ— è¿”å›å€¼ï¼Œæ— éœ€ä¼ é€’ç±»å‹")]),t._v(" "),n("p",[t._v("useMemoæ— éœ€ä¼ é€’ç±»å‹ï¼Œæ ¹æ®å‡½æ•°çš„è¿”å›å€¼å¯ä»¥åˆ¤æ–­ç±»å‹")]),t._v(" "),n("p",[t._v("useCallbackæ— éœ€ä¼ é€’ç±»å‹ï¼Œæ ¹æ®å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ¨æ–­ç±»å‹ï¼Œä½†æ˜¯æ³¨æ„å‡½æ•°çš„å…¥å‚éœ€è¦å®šä¹‰ç±»å‹ï¼Œä¸ç„¶å°±æ˜¯æ¨æ–­ä¸ºany")]),t._v(" "),n("p",[t._v("useReféœ€è¦çº¦æŸref.currentçš„ç±»å‹")]),t._v(" "),n("p",[t._v("useReduceréœ€è¦å¯¹reducerå‡½æ•°çš„å…¥å‚stateå’Œactionè¿›è¡Œç±»å‹çº¦æŸæ¨æ–­ç±»å‹")]),t._v(" "),n("h3",{attrs:{id:"hookså®ç°è¯·æ±‚çŠ¶æ€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookså®ç°è¯·æ±‚çŠ¶æ€"}},[t._v("#")]),t._v(" hookså®ç°è¯·æ±‚çŠ¶æ€")]),t._v(" "),n("p",[t._v("useState")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\ninterface postType {\n  userId: number\n  id: number\n  title: string\n  body: string\n}\n\nfunction DataFetchingOne() {\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [post, setPost] = useState({} as postType)\n\n  useEffect(() => {\n    axios.get('https://jsonplaceholder.typicode.com/posts/1').then((res) => {\n      setLoading(false)\n      setPost(res.data)\n      setError('')\n    }).catch(() => {\n      setLoading(false)\n      setPost({} as postType)\n      setError('something went wrong')\n    })\n  }, [])\n\n  return (\n    <div>\n      {\n        loading\n          ? 'Loading...'\n          : post.title\n      }\n      {\n        error\n          ? error\n          : null\n      }\n    </div>\n  )\n}\n\nexport default DataFetchingOne\n")])])]),n("p",[t._v("useReducer")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React, { useEffect, useReducer } from 'react'\nimport axios from 'axios'\n\ninterface postType {\n  userId: number\n  id: number\n  title: string\n  body: string\n}\n\ntype stateType = {\n  loading: boolean\n  error: string\n  post?: postType | {}\n}\n\ntype actionType = {\n  type: 'FETCH_SUCCESS' | 'FETCH_ERROR'\n  payload?: postType | {}\n}\n\nconst initialState = {\n  loading: true,\n  error: '',\n  post: {},\n}\n\nconst reducer = (state: stateType, action: actionType) => {\n  switch (action.type) {\n    case 'FETCH_SUCCESS':\n      return {\n        loading: false,\n        error: '',\n        post: action.payload,\n      }\n    case 'FETCH_ERROR':\n      return {\n        loading: false,\n        error: 'something went wrong',\n        post: {},\n      }\n    default:\n      return state\n  }\n}\n\nfunction DataFetchingTwo() {\n  const [state, dispatch] = useReducer(reducer, initialState)\n\n  useEffect(() => {\n    axios.get('https://jsonplaceholder.typicode.com/posts/1').then((res) => {\n      dispatch({\n        type: 'FETCH_SUCCESS',\n        payload: res.data,\n      })\n    }).catch(() => {\n      dispatch({\n        type: 'FETCH_ERROR'\n      })\n    })\n  }, [])\n\n  return (\n    <div>\n      {\n        state.loading\n          ? 'Loading...'\n          // @ts-ignore\n          : state.post.title\n      }\n      {\n        state.error\n          ? state.error\n          : null\n      }\n    </div>\n  )\n}\n\nexport default DataFetchingTwo\n")])])]),n("h3",{attrs:{id:"ä½¿ç”¨react-hooké‡å†™react-redux"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨react-hooké‡å†™react-redux"}},[t._v("#")]),t._v(" ä½¿ç”¨react-hooké‡å†™react-redux")]),t._v(" "),n("p",[t._v("react-reduxä¸»è¦æä¾›çš„åŠŸèƒ½æ˜¯å°†reduxå’Œreacté“¾æ¥èµ·æ¥ã€‚ ä½¿ç”¨æä¾›çš„connectæ–¹æ³•å¯ä»¥ä½¿å¾—ä»»æ„ä¸€ä¸ªreactç»„ä»¶è·å–åˆ°å…¨å±€çš„storeä¸Šçš„çŠ¶æ€ã€‚ å®ç°æ–¹æ³•æ˜¯å°†storeå­˜æ”¾äºç”±provideræä¾›çš„contextä¸Šï¼Œåœ¨è°ƒç”¨connectæ—¶ï¼Œ å°±å¯å°†ç»„ä»¶çš„propsæ›¿æ¢ï¼Œ è®©å…¶å¯ä»¥è®¿é—®åˆ°å®šåˆ¶åŒ–çš„æ•°æ®æˆ–è€…æ–¹æ³•")]),t._v(" "),n("p",[t._v("é‡å†™è¦å®ç°ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å…¨å±€ç»´æŠ¤ä¸€ä¸ªstoreã€‚")]),t._v(" "),n("li",[t._v("ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥è·å–åˆ°storeï¼Œæœ€å¥½propså¯ä»¥å®šåˆ¶ï¼ˆmapStatetoPropsï¼‰ã€‚")]),t._v(" "),n("li",[t._v("æä¾›å¯ä»¥æ´¾å‘actionçš„èƒ½åŠ›ï¼ˆmapDispatchtoPropsï¼‰")])]),t._v(" "),n("p",[t._v("å…ˆä½¿ç”¨useContextåˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createContext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useContext "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" context "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" StoreProvider "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("provider"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("åˆ›å»ºä¸€ä¸ªdispatchåˆ†å‘çŠ¶æ€")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dispatch\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ç„¶åä½¿ç”¨useStoreStateæ‹¿åˆ°çŠ¶æ€")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useStoreState")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("mapState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mapStateFn")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setMappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapStateFn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If the store or mapState change, rerun mapState    ")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prevStore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setPrevStore"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("prevMapState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setPrevMapState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" mapState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevStore "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" store "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" prevMapState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" mapState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrevStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPrevMapState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" mapState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMappedState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapStateFn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lastRenderedMappedState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Set the last mapped state after rendering.")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       lastRenderedMappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Run the mapState callback and if the result has changed, make the      ")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// component re-render with the new state.         ")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("checkForUpdates")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newMappedState "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapStateFn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("shallowEqual")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newMappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lastRenderedMappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMappedState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newMappedState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Pull data from the store on first render.")]),t._v("\n\n       "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkForUpdates")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Subscribe to the store to be notified of subsequent changes.")]),t._v("\n\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unsubscribe "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("checkForUpdates"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The return value of useEffect will be called when unmounting, so           ")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// we use it to unsubscribe from the store.")]),t._v("\n\n       "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" unsubscribe"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mapState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    \n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" mappedState\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("å½“storeå˜åŒ–è¿‡åï¼Œå¹¶æ²¡æœ‰å’Œè§†å›¾å…³è”èµ·æ¥ã€‚å¦ä¸€ä¸ªé—®é¢˜æ˜¯æ²¡æœ‰å…³æ³¨mapStateå˜åŒ–çš„æƒ…å†µã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨useEffectè¿™ä¸ªå†…ç½®hookï¼Œåœ¨ç»„ä»¶mountæ—¶å®Œæˆåœ¨storeä¸Šçš„è®¢é˜…ï¼Œå¹¶åœ¨unmontçš„æ—¶å€™å–æ¶ˆè®¢é˜…ã€‚ mapStateçš„å˜æ›´å¯ä»¥ä½¿ç”¨useStateæ¥ç›‘å¬ï¼Œ æ¯æ¬¡æœ‰å˜æ›´æ—¶å°±æ‰§è¡Œå‘å¯¹åº”çš„setteræ–¹æ³•")]),t._v(" "),n("h2",{attrs:{id:"hookåŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookåŒ…"}},[t._v("#")]),t._v(" HookåŒ…")]),t._v(" "),n("h3",{attrs:{id:"ahooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ahooks"}},[t._v("#")]),t._v(" ahooks")]),t._v(" "),n("p",[t._v("å®‰è£…")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--save")]),t._v(" ahooks\n")])])]),n("p",[t._v("ahooks é»˜è®¤æ”¯æŒåŸºäº ES module çš„ tree shakingï¼Œå¯¹äº js éƒ¨åˆ†ï¼Œç›´æ¥å¼•å…¥ "),n("code",[t._v("import { useToggle } from 'ahooks'")]),t._v(" ä¹Ÿä¼šæœ‰æŒ‰éœ€åŠ è½½çš„æ•ˆæœã€‚")]),t._v(" "),n("p",[t._v("å¸¸ç”¨hook")]),t._v(" "),n("h4",{attrs:{id:"å¢å¼ºç‰ˆstate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¢å¼ºç‰ˆstate"}},[t._v("#")]),t._v(" å¢å¼ºç‰ˆstate")]),t._v(" "),n("p",[n("code",[t._v("useRequest")]),t._v(" æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¼‚æ­¥æ•°æ®ç®¡ç†çš„ Hooksï¼ŒReact é¡¹ç›®ä¸­çš„ç½‘ç»œè¯·æ±‚åœºæ™¯ä½¿ç”¨ "),n("code",[t._v("useRequest")]),t._v(" å°±å¤Ÿäº†ã€‚")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const { data, error, loading } = useRequest(getUsername, {\n  manaul: true;\n});\n")])])]),n("p",[n("code",[t._v("useRequest")]),t._v(" æä¾›äº†ä»¥ä¸‹å‡ ä¸ªç”Ÿå‘½å‘¨æœŸé…ç½®é¡¹ï¼Œä¾›ä½ åœ¨å¼‚æ­¥å‡½æ•°çš„ä¸åŒé˜¶æ®µåšä¸€äº›å¤„ç†ã€‚")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("onBefore")]),t._v("ï¼šè¯·æ±‚ä¹‹å‰è§¦å‘")]),t._v(" "),n("li",[n("code",[t._v("onSuccess")]),t._v("ï¼šè¯·æ±‚æˆåŠŸè§¦å‘")]),t._v(" "),n("li",[n("code",[t._v("onError")]),t._v("ï¼šè¯·æ±‚å¤±è´¥è§¦å‘")]),t._v(" "),n("li",[n("code",[t._v("onFinally")]),t._v("ï¼šè¯·æ±‚å®Œæˆè§¦å‘")])]),t._v(" "),n("p",[t._v("é€šè¿‡è®¾ç½® "),n("code",[t._v("options.pollingInterval")]),t._v("ï¼Œè¿›å…¥è½®è¯¢æ¨¡å¼ï¼Œ"),n("code",[t._v("useRequest")]),t._v(" ä¼šå®šæ—¶è§¦å‘ service æ‰§è¡Œã€‚")]),t._v(" "),n("p",[t._v("é€šè¿‡è®¾ç½® "),n("code",[t._v("options.debounceWait")]),t._v("ï¼Œè¿›å…¥é˜²æŠ–æ¨¡å¼ï¼Œæ­¤æ—¶å¦‚æœé¢‘ç¹è§¦å‘ "),n("code",[t._v("run")]),t._v(" æˆ–è€… "),n("code",[t._v("runAsync")]),t._v("ï¼Œåˆ™ä¼šä»¥é˜²æŠ–ç­–ç•¥è¿›è¡Œè¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("é€šè¿‡è®¾ç½® "),n("code",[t._v("options.throttleWait")]),t._v("ï¼Œè¿›å…¥èŠ‚æµæ¨¡å¼ï¼Œæ­¤æ—¶å¦‚æœé¢‘ç¹è§¦å‘ "),n("code",[t._v("run")]),t._v(" æˆ–è€… "),n("code",[t._v("runAsync")]),t._v("ï¼Œåˆ™ä¼šä»¥èŠ‚æµç­–ç•¥è¿›è¡Œè¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœè®¾ç½®äº† "),n("code",[t._v("options.cacheKey")]),t._v("ï¼Œ"),n("code",[t._v("useRequest")]),t._v(" ä¼šå°†å½“å‰è¯·æ±‚æˆåŠŸçš„æ•°æ®ç¼“å­˜èµ·æ¥ã€‚ä¸‹æ¬¡ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼Œå¦‚æœæœ‰ç¼“å­˜æ•°æ®ï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆè¿”å›ç¼“å­˜æ•°æ®ï¼Œç„¶ååœ¨èƒŒåå‘é€æ–°è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯ SWR çš„èƒ½åŠ›ã€‚")]),t._v(" "),n("p",[t._v("ä½ å¯ä»¥é€šè¿‡ "),n("code",[t._v("options.staleTime")]),t._v(" è®¾ç½®æ•°æ®ä¿æŒæ–°é²œæ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å†…ï¼Œæˆ‘ä»¬è®¤ä¸ºæ•°æ®æ˜¯æ–°é²œçš„ï¼Œä¸ä¼šé‡æ–°å‘èµ·è¯·æ±‚ã€‚")]),t._v(" "),n("p",[t._v("ä½ ä¹Ÿå¯ä»¥é€šè¿‡ "),n("code",[t._v("options.cacheTime")]),t._v(" è®¾ç½®æ•°æ®ç¼“å­˜æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´ï¼Œæˆ‘ä»¬ä¼šæ¸…ç©ºè¯¥æ¡ç¼“å­˜æ•°æ®ã€‚")]),t._v(" "),n("p",[t._v("é€šè¿‡è®¾ç½® "),n("code",[t._v("options.retryCount")]),t._v("ï¼ŒæŒ‡å®šé”™è¯¯é‡è¯•æ¬¡æ•°ï¼Œåˆ™ useRequest åœ¨å¤±è´¥åä¼šè¿›è¡Œé‡è¯•ã€‚")]),t._v(" "),n("p",[t._v("useTitle")]),t._v(" "),n("p",[t._v("æ”¹å˜é¡µé¢åœ¨tabé¡µä¸­çš„æ ‡é¢˜")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('import React, { useState } from "react";\nimport { useTitle } from "react-use";\n\nconst Demo = () => {\n  useTitle("Hello world!", {\n    restoreOnUnmount: true,\n  });\n\n  return <h1>document.title has changed</h1>;\n};\n\nexport default () => {\n  const [showDemo, setShowDemo] = useState(true);\n\n  return (\n    <div>\n      <button onClick={() => setShowDemo(!showDemo)}>\n        {showDemo ? "unmount" : "mount"}\n      </button>\n      {showDemo ? <Demo /> : ""}\n    </div>\n  );\n};\n')])])]),n("p",[t._v("æºç ")]),t._v(" "),n("div",{staticClass:"language-typescript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/useTitle.ts")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* eslint-disable */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useEffect "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UseTitleOptions")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  restoreOnUnmount"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_USE_TITLE_OPTIONS")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UseTitleOptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  restoreOnUnmount"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useTitle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UseTitleOptions "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT_USE_TITLE_OPTIONS")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prevTitleRef "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useRef")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" title"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restoreOnUnmount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prevTitleRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" document "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undefined"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("useTitle")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("useBoolean")]),t._v(" "),n("p",[t._v("useToggle")]),t._v(" "),n("p",[t._v("ç”¨äºåœ¨ä¸¤ä¸ªçŠ¶æ€å€¼é—´åˆ‡æ¢çš„ Hookã€‚")]),t._v(" "),n("p",[t._v("useUrlState")]),t._v(" "),n("p",[t._v("é€šè¿‡ url query æ¥ç®¡ç† state çš„ Hookã€‚")]),t._v(" "),n("p",[t._v("è¯¥ Hooks åŸºäº "),n("code",[t._v("react-router")]),t._v(" çš„ useLocation & useHistory & useNavigate è¿›è¡Œ query ç®¡ç†ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥ Hooks ä¹‹å‰ï¼Œä½ éœ€è¦ä¿è¯")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("ä½ é¡¹ç›®æ­£åœ¨ä½¿ç”¨ "),n("code",[t._v("react-router")]),t._v(" 5.x æˆ– 6.x ç‰ˆæœ¬æ¥ç®¡ç†è·¯ç”±")])]),t._v(" "),n("li",[n("p",[t._v("ç‹¬ç«‹å®‰è£…äº† @ahooksjs/use-url-state")])])]),t._v(" "),n("p",[t._v("è¯¥hookså¯ä»¥æ”¹å˜å½“å‰urlä¸­çš„query")]),t._v(" "),n("h4",{attrs:{id:"å­˜å‚¨ç›¸å…³çš„hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å­˜å‚¨ç›¸å…³çš„hooks"}},[t._v("#")]),t._v(" å­˜å‚¨ç›¸å…³çš„hooks")]),t._v(" "),n("p",[t._v("useCookieState")]),t._v(" "),n("p",[t._v("å°†çŠ¶æ€å­˜å‚¨åœ¨ Cookie ä¸­çš„ Hook ã€‚")]),t._v(" "),n("p",[t._v("useLocalStorageState")]),t._v(" "),n("p",[t._v("å°†çŠ¶æ€å­˜å‚¨åœ¨ localStorage ä¸­çš„ Hook ã€‚")]),t._v(" "),n("p",[t._v("useSessionStorageState")]),t._v(" "),n("p",[t._v("å°†çŠ¶æ€å­˜å‚¨åœ¨ sessionStorageä¸­çš„ Hook ã€‚")]),t._v(" "),n("h4",{attrs:{id:"æ€§èƒ½ä¼˜åŒ–hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½ä¼˜åŒ–hooks"}},[t._v("#")]),t._v(" æ€§èƒ½ä¼˜åŒ–hooks")]),t._v(" "),n("p",[n("code",[t._v("useCreation")]),t._v(" æ˜¯ "),n("code",[t._v("useMemo")]),t._v(" æˆ– "),n("code",[t._v("useRef")]),t._v(" çš„æ›¿ä»£å“ã€‚")]),t._v(" "),n("p",[t._v("å› ä¸º "),n("code",[t._v("useMemo")]),t._v(" ä¸èƒ½ä¿è¯è¢« memo çš„å€¼ä¸€å®šä¸ä¼šè¢«é‡è®¡ç®—ï¼Œè€Œ "),n("code",[t._v("useCreation")]),t._v(" å¯ä»¥ä¿è¯è¿™ä¸€ç‚¹ã€‚")]),t._v(" "),n("p",[t._v("è€Œç›¸æ¯”äº "),n("code",[t._v("useRef")]),t._v("ï¼Œä½ å¯ä»¥ä½¿ç”¨ "),n("code",[t._v("useCreation")]),t._v(" åˆ›å»ºä¸€äº›å¸¸é‡ï¼Œè¿™äº›å¸¸é‡å’Œ "),n("code",[t._v("useRef")]),t._v(" åˆ›å»ºå‡ºæ¥çš„ ref æœ‰å¾ˆå¤šä½¿ç”¨åœºæ™¯ä¸Šçš„ç›¸ä¼¼ï¼Œä½†å¯¹äºå¤æ‚å¸¸é‡çš„åˆ›å»ºï¼Œ"),n("code",[t._v("useRef")]),t._v(" å´å®¹æ˜“å‡ºç°æ½œåœ¨çš„æ€§èƒ½éšæ‚£ã€‚")]),t._v(" "),n("p",[t._v("useMemoizedFn")]),t._v(" "),n("p",[t._v("æŒä¹…åŒ– function çš„ Hookï¼Œç†è®ºä¸Šï¼Œå¯ä»¥ä½¿ç”¨ useMemoizedFn å®Œå…¨ä»£æ›¿ useCallbackã€‚")]),t._v(" "),n("p",[t._v("åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ useCallback æ¥è®°ä½ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯åœ¨ç¬¬äºŒä¸ªå‚æ•° deps å˜åŒ–æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆå‡½æ•°ï¼Œå¯¼è‡´å‡½æ•°åœ°å€å˜åŒ–ã€‚")]),t._v(" "),n("p",[t._v("ä½¿ç”¨ useMemoizedFnï¼Œå¯ä»¥çœç•¥ç¬¬äºŒä¸ªå‚æ•° depsï¼ŒåŒæ—¶ä¿è¯å‡½æ•°åœ°å€æ°¸è¿œä¸ä¼šå˜åŒ–ã€‚")]),t._v(" "),n("p",[t._v("useThrottleFn")]),t._v(" "),n("p",[t._v("å¤„ç†å‡½æ•°èŠ‚æµçš„hooks")]),t._v(" "),n("p",[t._v("useThrottleEffect")]),t._v(" "),n("p",[t._v("ä¸º "),n("code",[t._v("useEffect")]),t._v(" å¢åŠ èŠ‚æµçš„èƒ½åŠ›ã€‚")]),t._v(" "),n("p",[t._v("useDebounceFn")]),t._v(" "),n("p",[t._v("ç”¨æ¥å¤„ç†é˜²æŠ–å‡½æ•°çš„ Hookã€‚")]),t._v(" "),n("p",[n("strong",[t._v("é˜²æŠ–å®ç°")]),t._v("ï¼šuseDebounceFnçš„å†…éƒ¨æ˜¯ä½¿ç”¨useMemo + lodashçš„debounceæ–¹æ³•")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" debounced "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("debounce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Parameters"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ReturnType"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fnRef"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("current")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        wait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("useDebounceEffect")]),t._v(" "),n("p",[t._v("ä¸º "),n("code",[t._v("useEffect")]),t._v(" å¢åŠ é˜²æŠ–çš„èƒ½åŠ›ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("å®ç°")]),t._v("ï¼šuseState + useDebounce")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setFlag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" run "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useDebounceFn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFlag")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deps"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useUpdateEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("effect"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h4",{attrs:{id:"domç›¸å…³-åŠŸèƒ½å‹hook"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#domç›¸å…³-åŠŸèƒ½å‹hook"}},[t._v("#")]),t._v(" Domç›¸å…³ åŠŸèƒ½å‹Hook")]),t._v(" "),n("p",[t._v("useKeyPress")]),t._v(" "),n("p",[t._v("ç›‘å¬é”®ç›˜æŒ‰é”®ï¼Œæ”¯æŒç»„åˆé”®ï¼Œæ”¯æŒæŒ‰é”®åˆ«åã€‚")]),t._v(" "),n("p",[t._v("useLongPress")]),t._v(" "),n("p",[t._v("ç›‘å¬ç›®æ ‡å…ƒç´ çš„é•¿æŒ‰äº‹ä»¶ã€‚")]),t._v(" "),n("p",[t._v("useMouse")]),t._v(" "),n("p",[t._v("ç›‘å¬é¼ æ ‡ä½ç½®")]),t._v(" "),n("p",[t._v("useResponsive")]),t._v(" "),n("p",[t._v("è·å–å±å¹•å®½åº¦å“åº”å¼ä¿¡æ¯ã€‚")]),t._v(" "),n("p",[t._v("useSize")]),t._v(" "),n("p",[t._v("ç›‘å¬ DOM èŠ‚ç‚¹å°ºå¯¸å˜åŒ–çš„ Hookã€‚")]),t._v(" "),n("p",[t._v("useFavicon")]),t._v(" "),n("p",[t._v("è®¾ç½®é¡µé¢çš„ faviconã€‚")]),t._v(" "),n("p",[t._v("useInViewport")]),t._v(" "),n("p",[t._v("è§‚å¯Ÿå…ƒç´ æ˜¯å¦åœ¨å¯è§åŒºåŸŸï¼Œä»¥åŠå…ƒç´ å¯è§æ¯”ä¾‹ã€‚")]),t._v(" "),n("p",[t._v("useFocusWithin")]),t._v(" "),n("p",[t._v("ç›‘å¬å½“å‰ç„¦ç‚¹æ˜¯å¦åœ¨æŸä¸ªåŒºåŸŸä¹‹å†…ï¼ŒåŒ css å±æ€§ focus-within")]),t._v(" "),n("p",[t._v("useScroll")]),t._v(" "),n("p",[t._v("ç›‘å¬å…ƒç´ çš„æ»šåŠ¨ä½ç½®ã€‚")]),t._v(" "),n("p",[t._v("useFullscreen")]),t._v(" "),n("p",[t._v("ç®¡ç† DOM å…¨å±çš„ Hookã€‚")]),t._v(" "),n("p",[t._v("useLockFn")]),t._v(" "),n("p",[t._v("ç»™å¼‚æ­¥å‡½æ•°åŠ å¹¶å‘é”ã€‚å¦‚æœå½“å‰å¼‚æ­¥å‡½æ•°æ­£åœ¨æ‰§è¡Œä¸­æ²¡æœ‰è¿”å›ï¼Œé‚£ä¹ˆä¸èƒ½æ‰§è¡Œï¼Œä¸Šä¸€æ¬¡å¼‚æ­¥å‡½æ•°æœ‰è¿”å›åæ‰èƒ½å†æ¬¡æ‰§è¡Œ")]),t._v(" "),n("h4",{attrs:{id:"å¼€å‘è€…hook"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å‘è€…hook"}},[t._v("#")]),t._v(" å¼€å‘è€…hook")]),t._v(" "),n("p",[t._v("useWhyDidYouUpdate")]),t._v(" "),n("p",[t._v("å¸®åŠ©å¼€å‘è€…æ’æŸ¥æ˜¯é‚£ä¸ªå±æ€§æ”¹å˜å¯¼è‡´äº†ç»„ä»¶çš„ rerenderã€‚")]),t._v(" "),n("p",[t._v("useTrackedEffect")]),t._v(" "),n("p",[t._v("è¿½è¸ªæ˜¯å“ªä¸ªä¾èµ–å˜åŒ–è§¦å‘äº† "),n("code",[t._v("useEffect")]),t._v(" çš„æ‰§è¡Œã€‚")]),t._v(" "),n("h3",{attrs:{id:"react-use"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-use"}},[t._v("#")]),t._v(" react-use")]),t._v(" "),n("h3",{attrs:{id:"react-hooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks"}},[t._v("#")]),t._v(" react-hooks")]),t._v(" "),n("p",[t._v("https://github.com/ecomfe/react-hooks")]),t._v(" "),n("h3",{attrs:{id:"usehooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usehooks"}},[t._v("#")]),t._v(" usehooks")]),t._v(" "),n("p",[t._v("https://github.com/uidotdev/usehooks")]),t._v(" "),n("p",[t._v("https://usehooks-ts.com/react-hook/use-window-size")]),t._v(" "),n("h3",{attrs:{id:"react-router"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-router"}},[t._v("#")]),t._v(" react-router")]),t._v(" "),n("p",[t._v("useHistory useLocation useParams useRouteMatch")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('import {\n  useHistory,\n  useLocation,\n  useParams,\n  useRouteMatch,\n} from "react-router-dom"\n\nfunction HomeButton() {\n  let history = useHistory();\n  function haddleClick() {\n    history.push("/home");\n  }\n  \n  function usePageViews() {\n      let location = useLocation();\n    \tReact.useEffect(()=>{\n        ga.send(["pageview", location.pathname]);\n      },[location])\n  }\n  \n  let { slug } = useParams();\n  return <div>Now showing post {slug}</div>\n  \n  let match = useRouteMatch("/blog/:slug")\n  const match = useRouteMatch({\n    path: "/BLOG/:slug",\n    strict: true,\n    sensitive: true\n  })\n}\n')])])]),n("p",[t._v("useRoutes")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('import * as React from "react";\nimport { useRoutes } from "react-router-dom";\n\nfunction App() {\n  let element = useRoutes([\n    {\n      path: "/",\n      element: <Dashboard />,\n      children: [\n        {\n          path: "messages",\n          element: <DashboardMessages />,\n        },\n        { path: "tasks", element: <DashboardTasks /> },\n      ],\n    },\n    { path: "team", element: <AboutPage /> },\n  ]);\n\n  return element;\n}\n')])])])])}),[],!1,null,null,null);s.default=e.exports}}]);