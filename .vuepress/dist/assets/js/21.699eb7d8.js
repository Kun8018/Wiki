(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{379:function(t,s,n){"use strict";n.r(s);var a=n(44),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("â€‹      å‰ç«¯æ¡†æ¶ï¼Œå¿«é€Ÿå¼€å‘é¡µé¢ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸åç«¯apiå¿«é€Ÿæ­å»º")]),t._v(" "),n("h2",{attrs:{id:"purecomponent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#purecomponent"}},[t._v("#")]),t._v(" purecomponent")]),t._v(" "),n("p",[t._v("å½“ä½¿ç”¨componentæ—¶ï¼Œçˆ¶ç»„ä»¶çš„propsæˆ–è€…stateæ›´æ–°æ—¶ï¼Œæ— è®ºå­ç»„ä»¶çš„stateã€propsæ˜¯å¦æ›´æ–°ï¼Œéƒ½ä¼šè§¦å‘å­ç»„ä»¶çš„æ›´æ–°ï¼Œè¿™ä¼šé€ æˆå¾ˆå¤šæ²¡å¿…è¦çš„renderï¼Œæµªè´¹å¾ˆå¤šæ€§èƒ½ã€‚pureComponentçš„ä¼˜ç‚¹åœ¨äºï¼Œåœ¨shouldcomponentUpdateåªè¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œåªè¦å¤–å±‚å¯¹è±¡æ²¡æœ‰å˜åŒ–ï¼Œå°±ä¸ä¼šè§¦å‘renderï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦å¼€å‘è€…ä½¿ç”¨shouldComponentUpdateå°±å¯ä½¿ç”¨ç®€å•çš„åˆ¤æ–­æ¥æå‡æ€§èƒ½")]),t._v(" "),n("p",[t._v("ç¼ºç‚¹ï¼š")]),t._v(" "),n("p",[t._v("ç”±äºè¿›è¡Œçš„æ—¶æµ…æ¯”è¾ƒï¼Œå¯èƒ½ç”±äºæ·±å±‚çš„æ•°æ®ä¸ä¸€è‡´å¯¼è‡´äº§ç”Ÿé”™è¯¯çš„å¦å®šåˆ¤æ–­ï¼Œä»è€Œå¯¼è‡´é¡µé¢å¾—ä¸åˆ°æ›´æ–°")]),t._v(" "),n("p",[t._v("ä¸é€‚åˆç”¨äºåœ¨å«æœ‰å¤šå±‚åµŒå¥—å¯¹è±¡çš„stateå’Œpropsä¸­ï¼Œä¸€èˆ¬æ˜¯ä½œä¸ºå±•ç¤ºç»„ä»¶æ¥ä½¿ç”¨ã€‚å› ä¸ºå¯¹äºæ•°ç»„å’Œå¯¹è±¡ç­‰å¼•ç”¨ç±»å‹ï¼Œéœ€è¦å¼•ç”¨ä¸åŒæ‰ä¼šæ¸²æŸ“")]),t._v(" "),n("p",[t._v("å°¤å…¶æ˜¯å½“é‡åˆ°å¤æ‚ç»„ä»¶æ—¶ï¼Œå¯ä»¥å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†æˆå¤šä¸ªpureComponentï¼Œä»¥è¿™ç§æ–¹å¼æ¥å®ç°å¤æ‚æ•°æ®ç»“æ„ï¼Œä»¥æœŸè¾¾åˆ°èŠ‚çœä¸å¿…è¦æ¸²æŸ“çš„ç›®çš„ï¼Œå¦‚è¡¨å•ã€å¤æ‚åˆ—è¡¨ã€æ–‡æœ¬åŸŸç­‰")]),t._v(" "),n("p",[t._v("å¦‚æœpropså’Œstateæ¯æ¬¡éƒ½ä¼šå˜ï¼Œå»ºè®®ä½¿ç”¨Component")]),t._v(" "),n("p",[t._v("çˆ¶ç»„ä»¶æ˜¯pureComponentæ—¶ï¼Œå­ç»„ä»¶æ— è®ºæ˜¯purecomponentæˆ–è€…componentéƒ½ä¸å½±å“ï¼Œå› ä¸ºçˆ¶ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œ")]),t._v(" "),n("p",[t._v("çˆ¶ç»„ä»¶æ˜¯Componentæ—¶ï¼Œå­ç»„ä»¶æ˜¯componentæ—¶æ¯æ¬¡éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œå­ç»„ä»¶æ˜¯purecomponentæ—¶ï¼Œpropsä¸å˜æ—¶ä¸ä¼šé‡æ–°æ¸²æŸ“")]),t._v(" "),n("h3",{attrs:{id:"ä¸react-memoã€usememoçš„åŒºåˆ«"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸react-memoã€usememoçš„åŒºåˆ«"}},[t._v("#")]),t._v(" ä¸React.memoã€usememoçš„åŒºåˆ«")]),t._v(" "),n("p",[t._v("reacr.memoæ§åˆ¶å‡½æ•°ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œreacr.purecomponentæ§åˆ¶ç±»ç»„ä»¶çš„é‡æ–°æ¸²æŸ“")]),t._v(" "),n("p",[t._v("ä½¿ç”¨æ—¶å°†å‡½æ•°ç»„ä»¶ä¼ é€’ç»™react.memoå‡½æ•°å°±å¯ä»¥")]),t._v(" "),n("p",[t._v("å®ä¾‹")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const Funcomponent = () =>{\n  return (\n     <div>\n     hiya!i am a functional component!\n     </div>\n  )\n}\nconst MemoFuncComponent = React.memo(Funcomponent)\n")])])]),n("p",[t._v("React.memoè¿”å›è‹±å›½çº¯ç»„ä»¶MemoFuncComponentï¼Œjsxä¸­å°†æ ‡è®°æ¬¡ç»„ä»¶ï¼Œæ¯å½“ç»„ä»¶çš„propså’Œstateå‘ç”Ÿå˜åŒ–æ—¶ï¼Œreactä¼šæ£€æŸ¥ä¸Šä¸€ä¸ªpropså’Œstateä¸ä¸‹ä¸€ä¸ªproså’Œstateæ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰é‡æ–°æ¸²æŸ“ï¼Œç›¸ç­‰åˆ™ä¸ä¼šé‡æ–°æ¸²æŸ“")]),t._v(" "),n("p",[t._v("ç±»ç»„ä»¶ä¸­å³æˆpurecomponentå®ç°")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React from 'react'\nclass TestC extends React.PureComponent{\n   constructor(props){\n     super(props);\n     this.state = {\n       conut: 0\n     }\n   }\n  \n  render(){\n    return(\n      <div>\n        {this.state.count}\n        <button onClick={()=>this.setState({count:1})}>\n          click me\n        </button>\n      </div>\n    )\n  }\n}\n")])])]),n("h3",{attrs:{id:"propä½¿ç”¨åµŒå¥—å¯¹è±¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#propä½¿ç”¨åµŒå¥—å¯¹è±¡"}},[t._v("#")]),t._v(" propä½¿ç”¨åµŒå¥—å¯¹è±¡")]),t._v(" "),n("p",[t._v("ä½¿ç”¨immutableå±æ€§ã€‚")]),t._v(" "),n("h2",{attrs:{id:"hook"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hook"}},[t._v("#")]),t._v(" Hook")]),t._v(" "),n("p",[t._v("Https://juejin.cn/post/6844903985338400782")]),t._v(" "),n("p",[t._v("Hookæ˜¯react16.8æ–°å¢çš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ä¸ç¼–å†™class çš„æƒ…å†µä¸‹ä½¿ç”¨stateå’Œå…¶ä»–reactç‰¹æ€§ï¼Œreactnativeä»0.59ç‰ˆæœ¬å¼€å§‹æ”¯æŒhookã€‚")]),t._v(" "),n("h3",{attrs:{id:"hookå‡ºç°çš„åŸå› ä»¥åŠè§£å†³çš„é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookå‡ºç°çš„åŸå› ä»¥åŠè§£å†³çš„é—®é¢˜"}},[t._v("#")]),t._v(" hookå‡ºç°çš„åŸå› ä»¥åŠè§£å†³çš„é—®é¢˜")]),t._v(" "),n("p",[t._v("Class component åŠ£åŠ¿")]),t._v(" "),n("ol",[n("li",[t._v("çŠ¶æ€é€»è¾‘éš¾å¤ç”¨ï¼šåœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ï¼Œå¯èƒ½è¦ç”¨åˆ° render props ï¼ˆæ¸²æŸ“å±æ€§ï¼‰æˆ–è€… HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ï¼Œä½†æ— è®ºæ˜¯æ¸²æŸ“å±æ€§ï¼Œè¿˜æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œéƒ½ä¼šåœ¨åŸå…ˆçš„ç»„ä»¶å¤–åŒ…è£¹ä¸€å±‚çˆ¶å®¹å™¨ï¼ˆä¸€èˆ¬éƒ½æ˜¯ div å…ƒç´ ï¼‰ï¼Œå¯¼è‡´å±‚çº§å†—ä½™ è¶‹å‘å¤æ‚éš¾ä»¥ç»´æŠ¤ï¼š")]),t._v(" "),n("li",[t._v("åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ··æ‚ä¸ç›¸å¹²çš„é€»è¾‘ï¼ˆå¦‚ï¼šåœ¨ componentDidMount ä¸­æ³¨å†Œäº‹ä»¶ä»¥åŠå…¶ä»–çš„é€»è¾‘ï¼Œåœ¨ componentWillUnmount ä¸­å¸è½½äº‹ä»¶ï¼Œè¿™æ ·åˆ†æ•£ä¸é›†ä¸­çš„å†™æ³•ï¼Œå¾ˆå®¹æ˜“å†™å‡º bug ï¼‰ ç±»ç»„ä»¶ä¸­åˆ°å¤„éƒ½æ˜¯å¯¹çŠ¶æ€çš„è®¿é—®å’Œå¤„ç†ï¼Œå¯¼è‡´ç»„ä»¶éš¾ä»¥æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶")]),t._v(" "),n("li",[t._v("this æŒ‡å‘é—®é¢˜ï¼šçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°æ—¶ï¼Œå¿…é¡»ç»‘å®š this")])]),t._v(" "),n("p",[t._v("Hookä¸èƒ½åœ¨classä¸­ä½¿ç”¨ï¼Œåªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œä¸ºå‡½æ•°ç»„ä»¶å‹¾å…¥react stateåŠç”Ÿå‘½å‘¨æœŸç­‰å‡½æ•°")]),t._v(" "),n("p",[t._v("reactå†…ç½®çš„hookæœ‰ä»¥ä¸‹")]),t._v(" "),n("p",[t._v("åŸºç¡€hookï¼šuseStateã€useEffectã€useContext")]),t._v(" "),n("p",[t._v("é¢å¤–çš„hookï¼šuseReducerã€useCallbackã€useMemoã€useRefã€useLayoutEffectã€useDebugValueã€useImperativeHandle")]),t._v(" "),n("h3",{attrs:{id:"hooksä¸­å¯¹åº”classç”Ÿå‘½å‘¨æœŸ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hooksä¸­å¯¹åº”classç”Ÿå‘½å‘¨æœŸ"}},[t._v("#")]),t._v(" Hooksä¸­å¯¹åº”classç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),n("p",[t._v("constructorï¼šå‡½æ•°ç»„ä»¶ä¸éœ€è¦æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨useStateæ¥åˆå§‹åŒ–Stateï¼Œå¦‚æœä»£ä»·æ¯”è¾ƒæ˜‚è´µå¯ä»¥ç©¿ä¸€ä¸ªå‡½æ•°ç»™useState")]),t._v(" "),n("p",[t._v("getDerivedStateFromPropsï¼šæ”¹ä¸ºåœ¨æ¸²æŸ“æ—¶å®‰æ’ä¸€æ¬¡æ›´æ–°")]),t._v(" "),n("p",[t._v("shouldComponentUpdateï¼šä½¿ç”¨React.memoæ›¿ä»£")]),t._v(" "),n("p",[t._v("ä½¿ç”¨react.memoåŒ…è£¹ä¸€ä¸ªç»„ä»¶å¯¹propsè¿›è¡Œæµ…æ¯”è¾ƒ")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Button "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("memo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// component")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("react.memoä¸æ¯”è¾ƒstateï¼Œå› ä¸ºæ²¡æœ‰å•ä¸€çš„stateå¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œå¯ä»¥ç”¨usememoä¼˜åŒ–å­èŠ‚ç‚¹")]),t._v(" "),n("p",[t._v("renderï¼šå‡½æ•°ç»„ä»¶æœ¬èº«å°±æœ‰")]),t._v(" "),n("p",[t._v("componentDidMountã€componentDidUpdateã€componentWillUnmountï¼šé€šè¿‡ä½¿ç”¨UseEffectçš„ä¸åŒæ–¹å¼å¯ä»¥åˆ†åˆ«è¡¨è¾¾è¿™äº›ç”Ÿå‘½å‘¨æœŸ")]),t._v(" "),n("p",[t._v("getSnapshotBeforeUpdateã€ComponentDidCatchã€getDerivedFromErrorï¼šç›®å‰è¿˜æ²¡æœ‰è¿™äº›æ–¹æ³•çš„ç­‰ä»·å†™æ³•")]),t._v(" "),n("h3",{attrs:{id:"usestate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),n("p",[t._v("å®ä¾‹")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("useState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Example")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setCount"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("you click ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v(" times")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onClick")]),n("span",{pre:!0,attrs:{class:"token script language-javascript"}},[n("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n        click    \n        ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n     ")]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ä¸Šè¿°useStateæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªstateå˜é‡countï¼Œå¹¶ç»™ä»–åˆå§‹åŒ–çš„å€¼0ã€‚é€šè¿‡setCountæ–¹æ³•æ›´æ–°å½“å‰countçš„å€¼ã€‚")]),t._v(" "),n("p",[t._v("è°ƒç”¨countæ—¶ä¸éœ€è¦ç»‘å®šthisç›´æ¥è°ƒç”¨ï¼Œæ›´æ–°countæ—¶ä¹Ÿç›´æ¥è°ƒç”¨setCountæ–¹æ³•")]),t._v(" "),n("p",[t._v("usestateå®šä¹‰stateæ—¶è¿”å›ä¸€ä¸ªæœ‰ä¸¤ä¸ªå€¼çš„æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªæ˜¯å½“å‰stateï¼Œç¬¬äºŒä¸ªæ˜¯æ›´æ–°stateçš„å‡½æ•°ï¼Œ")]),t._v(" "),n("p",[t._v("countä¸setCountä¸classä¸­çš„this.state.countå’Œthis.setstateç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯éœ€è¦æˆå¯¹åœ°è·å–ä»–ä»¬ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœåˆå§‹åŒ–stateæ—¶éœ€è¦å¤æ‚è®¡ç®—ï¼Œå¯ä»¥è°ƒç”¨å‡½æ•°ï¼Œæ­¤å‡½æ•°åªåœ¨åˆæ¬¡æ¸²æŸ“æ—¶è¢«è°ƒç”¨")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" initialState"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("someExpensiveComputation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" initialState"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("countä¸setCountä¸classä¸­çš„this.state.countå’Œthis.setstateç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯éœ€è¦æˆå¯¹åœ°è·å–ä»–ä»¬ã€‚")]),t._v(" "),n("p",[t._v("å¯ä»¥åŒæ—¶å£°æ˜å¤šä¸ªstateå˜é‡")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("ExamplewithManyStates")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("age"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setAge"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("usestate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("42")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fruit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setFruit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("usestate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'banana'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("todos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("setTodos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("usestate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å­¦ä¹ '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("Hookåªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ï¼Œä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨")]),t._v(" "),n("h4",{attrs:{id:"usestateä¸setstateçš„å¼‚åŒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usestateä¸setstateçš„å¼‚åŒ"}},[t._v("#")]),t._v(" useStateä¸setStateçš„å¼‚åŒ")]),t._v(" "),n("p",[t._v("setStateä¼šè‡ªåŠ¨åˆå¹¶ï¼Œä¸åŒçš„useStateä¸ä¼š")]),t._v(" "),n("h3",{attrs:{id:"useeffectå’Œuselayouteffect"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#useeffectå’Œuselayouteffect"}},[t._v("#")]),t._v(" useEffectå’ŒuseLayoutEffect")]),t._v(" "),n("p",[t._v("å¯¹äºclassä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œä¸ºäº†èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ç±»ä¼¼åŠŸèƒ½ï¼Œä½¿ç”¨useEffectæ–¹æ³•ï¼Œå®ƒç›¸å½“äºcomponentDidMountã€componentDidupdateã€componentWillUnmountä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ")]),t._v(" "),n("div",{staticClass:"language-jsx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-jsx"}},[n("code",[t._v("\n")])])]),n("p",[t._v("useEffecté»˜è®¤æƒ…å†µä¸‹ä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚")]),t._v(" "),n("p",[t._v("useEffectåœ¨å…¨éƒ¨æ¸²æŸ“å®Œæ¯•åæ‰ä¼šæ‰§è¡Œï¼Œè€ŒuseLayoutEffectä¼šåœ¨æµè§ˆå™¨layoutä¹‹åï¼Œpaintingä¹‹å‰æ‰§è¡Œ")]),t._v(" "),n("p",[t._v("ä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œä¸€èˆ¬å…ˆä½¿ç”¨useEffect")]),t._v(" "),n("p",[t._v("ä½¿ç”¨æ­¥éª¤ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("ä½œä¸º componentDidMount ä½¿ç”¨ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºæ•°ç»„ "),n("code",[t._v("[]")])]),t._v(" "),n("li",[t._v("ä½œä¸º componentDidUpdate ä½¿ç”¨ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæŒ‡å®šä¾èµ–")]),t._v(" "),n("li",[t._v("ä½œä¸º componentWillUnmount ä½¿ç”¨ï¼Œé€šè¿‡ return")])]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('const BlinkyRender = () => {\n  const [value, setValue] = useState(0);\n\n  useEffect(() => {\n    document.querySelector(\'#x\').innerText = `value: 1000`\n  }, [value]);\n\n  return (\n    <div id="x" onClick={() => setValue(0)}>value: {value}</div>\n  );\n};\n\nReactDOM.render(\n  <BlinkyRender />,\n  document.querySelector("#root")\n);\n')])])]),n("p",[t._v("æ¸…é™¤effect")]),t._v(" "),n("p",[t._v("é€šå¸¸ï¼Œç»„ä»¶å¸è½½æ—¶éœ€è¦æ¸…é™¤ effect åˆ›å»ºçš„è¯¸å¦‚è®¢é˜…æˆ–è®¡æ—¶å™¨ ID ç­‰èµ„æºã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œ"),n("code",[t._v("useEffect")]),t._v(" å‡½æ•°éœ€è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚")]),t._v(" "),n("p",[t._v("ä¸ºé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œæ¸…é™¤å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œã€‚å¦å¤–ï¼Œå¦‚æœç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼ˆé€šå¸¸å¦‚æ­¤ï¼‰ï¼Œåˆ™"),n("strong",[t._v("åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª effect ä¹‹å‰ï¼Œä¸Šä¸€ä¸ª effect å°±å·²è¢«æ¸…é™¤")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("useEffectä¸useLayoutEffectåŒºåˆ«ï¼š")]),t._v(" "),n("p",[n("code",[t._v("useEffect")]),t._v(" æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè€Œ"),n("code",[t._v("useLayoutEffect")]),t._v("æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚")]),t._v(" "),n("p",[n("code",[t._v("useEffect")]),t._v(" çš„æ‰§è¡Œæ—¶æœºæ˜¯æµè§ˆå™¨å®Œæˆæ¸²æŸ“ä¹‹åï¼Œè€Œ "),n("code",[t._v("useLayoutEffect")]),t._v(" çš„æ‰§è¡Œæ—¶æœºæ˜¯æµè§ˆå™¨æŠŠå†…å®¹çœŸæ­£æ¸²æŸ“åˆ°ç•Œé¢ä¹‹å‰ï¼Œå’Œ "),n("code",[t._v("componentDidMount")]),t._v(" ç­‰ä»·ã€‚")]),t._v(" "),n("p",[t._v("æœ€å¥½æŠŠæ“ä½œ dom ã€åŠ¨ç”»çš„ç›¸å…³æ“ä½œæ”¾åˆ° "),n("code",[t._v("useLayouteEffect")]),t._v(" ä¸­å»ï¼Œé¿å…å¯¼è‡´é—ªçƒã€‚")]),t._v(" "),n("h3",{attrs:{id:"usereducer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usereducer"}},[t._v("#")]),t._v(" useReducer")]),t._v(" "),n("p",[t._v("useStateå†…éƒ¨å°±æ˜¯é useReducerå®ç°çš„ã€‚")]),t._v(" "),n("p",[t._v("useReducerå¯ä»¥ç†è§£ä¸ºæ˜¯ç”¨æ¥ä»£æ›¿ Redux çš„ï¼Œæˆ–è€…è¯´ï¼Œæ˜¯ä¸€ä¸ªåŠ å¼ºç‰ˆçš„ "),n("code",[t._v("useState")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("ä½¿ç”¨æ­¥éª¤ï¼š")]),t._v(" "),n("p",[t._v("1.åˆ›å»ºåˆå§‹å€¼initialState")]),t._v(" "),n("p",[t._v("2.åˆ›å»ºæ‰€æœ‰æ“ä½œreduce(state,action)")]),t._v(" "),n("p",[t._v("3.ä¼ ç»™useReducerï¼Œå¾—åˆ°è¯»å’Œå†™api")]),t._v(" "),n("p",[t._v("4.è°ƒç”¨ï¼Œå†™({type: 'æ“ä½œç±»å‹'})")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" initial "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("reducer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("number "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"multi"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("n "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unknown type"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dispatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useReducer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" initial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" state"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" number"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onClick2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" number"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"usecontext"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecontext"}},[t._v("#")]),t._v(" useContext")]),t._v(" "),n("p",[t._v("æ¥å—ä¸€ä¸ªcontextå¯¹è±¡ï¼Œå¹¶è¿”å›è¯¥contextçš„å½“å‰å€¼ï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€")]),t._v(" "),n("p",[t._v("ä½¿ç”¨æ–¹æ³•ï¼š")]),t._v(" "),n("p",[t._v("1.ä½¿ç”¨C=createContext(initial)åˆ›å»ºä¸Šä¸‹æ–‡")]),t._v(" "),n("p",[t._v("2.ä½¿ç”¨<C.provider>åœˆå®šä½œç”¨åŸŸ")]),t._v(" "),n("p",[t._v("3.åœ¨ä½œç”¨åŸŸå†…ä½¿ç”¨ "),n("code",[t._v("useContext(C)")]),t._v(" æ¥ä½¿ç”¨ä¸Šä¸‹æ–‡")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('const C = createContext(null);\n\nfunction App() {\n  console.log("App æ‰§è¡Œäº†");\n  const [n, setN] = useState(0);\n  return (\n    <C.Provider value={{ n, setN }}>\n      <div className="App">\n        <Baba />\n      </div>\n    </C.Provider>\n  );\n}\n\nfunction Baba() {\n  const { n, setN } = useContext(C);\n  return (\n    <div>\n      æˆ‘æ˜¯çˆ¸çˆ¸ n: {n} <Child />\n    </div>\n  );\n}\n\nfunction Child() {\n  const { n, setN } = useContext(C);\n  const onClick = () => {\n    setN(i => i + 1);\n  };\n  return (\n    <div>\n      æˆ‘æ˜¯å„¿å­ æˆ‘å¾—åˆ°çš„ n: {n}\n      <button onClick={onClick}>+1</button>\n    </div>\n  );\n}\n')])])]),n("p",[n("code",[t._v("useContext(MyContext)")]),t._v(" ç›¸å½“äº class ç»„ä»¶ä¸­çš„ "),n("code",[t._v("static contextType = MyContext")]),t._v(" æˆ–è€… "),n("code",[t._v("<MyContext.Consumer>")]),t._v("ã€‚")]),t._v(" "),n("p",[n("code",[t._v("useContext(MyContext)")]),t._v(" åªæ˜¯è®©ä½ èƒ½å¤Ÿ"),n("em",[t._v("è¯»å–")]),t._v(" context çš„å€¼ä»¥åŠè®¢é˜… context çš„å˜åŒ–ã€‚ä½ ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨ "),n("code",[t._v("<MyContext.Provider>")]),t._v(" æ¥ä¸ºä¸‹å±‚ç»„ä»¶"),n("em",[t._v("æä¾›")]),t._v(" contextã€‚")]),t._v(" "),n("h3",{attrs:{id:"usecallbackä¸usememo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usecallbackä¸usememo"}},[t._v("#")]),t._v(" usecallbackä¸useMemo")]),t._v(" "),n("p",[n("strong",[t._v("useMemo")])]),t._v(" "),n("p",[t._v("è¿”å›ä¸€ä¸ªç¼“å­˜å€¼ã€‚")]),t._v(" "),n("p",[t._v("useMemoæ˜¯ä¸€ç§ç¼“å­˜æœºåˆ¶æé€Ÿï¼Œå½“ä»–çš„ä¾èµ–æœªå‘ç”Ÿæ”¹å˜æ—¶å°±ä¸ä¼šè§¦å‘é‡æ–°è®¡ç®—ï¼Œä¸vueä¸­computedç±»ä¼¼")]),t._v(" "),n("p",[t._v("ä½¿ç”¨è¯­æ³•ï¼šuseMemo(()=> fn,deps)")]),t._v(" "),n("p",[t._v("æŠŠåˆ›å»ºå‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥useMemoï¼Œå®ƒåªä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®—memoizedå€¼ã€‚å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼ŒuseMemoåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼")]),t._v(" "),n("p",[n("strong",[t._v("useCallback")])]),t._v(" "),n("p",[t._v("è¿”å›ä¸€ä¸ªç¼“å­˜å‡½æ•°ã€‚æŠŠå†…è”å›è°ƒå‡½æ•°åŠä¾èµ–æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥useCallbackï¼Œå®ƒå°†è¿”å›è¯¥å›è°ƒå‡½æ•°uçš„memorizedç‰ˆæœ¬ï¼Œè¯¥å›è°ƒå‡½æ•°ä»…åœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šæ›´æ–°ï¼Œåœ¨ç»„ä»¶ä¸­ä½¿ç”¨usecallbackå¯ä»¥é¿å…éå¿…è¦æ¸²æŸ“")]),t._v(" "),n("p",[t._v("useCallbackï¼ˆfnï¼Œdepï¼‰ç›¸å½“äºuseMemoï¼ˆï¼ˆï¼‰=ã€‹fnï¼Œdepsï¼‰")]),t._v(" "),n("p",[t._v("useMemoä¸usecallbackçš„åŒºåˆ«ï¼š"),n("code",[t._v("useMemo")]),t._v("å¯ä»¥ç¼“å­˜æ‰€æœ‰å¯¹è±¡ï¼Œ"),n("code",[t._v("useCallback")]),t._v("åªèƒ½ç¼“å­˜å‡½æ•°ã€‚")]),t._v(" "),n("p",[n("code",[t._v("useCallback(x => log(x), [m])")]),t._v(" ç­‰ä»·äº "),n("code",[t._v("useMemo(() => x => log(x), [m])")])]),t._v(" "),n("h3",{attrs:{id:"userefä¸useimperativehandle"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#userefä¸useimperativehandle"}},[t._v("#")]),t._v(" useRefä¸useImperativeHandle")]),t._v(" "),n("p",[t._v("useRef")]),t._v(" "),n("p",[t._v("ä¸»è¦ä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªæ•°æ®çš„å¼•ç”¨ï¼Œå¹¶è®©è¿™ä¸ªæ•°æ®åœ¨ render è¿‡ç¨‹ä¸­å§‹ç»ˆ"),n("strong",[t._v("ä¿æŒä¸å˜")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("åŸºæœ¬è¯­æ³•ï¼š "),n("code",[t._v("const count = useRef(0)")]),t._v("ï¼Œè¯»å–ç”¨ "),n("code",[t._v("count.current")])]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("export function ReactEcharts(props) {\n  const {option, loading} = props\n  const container = useRef(null)\n  const chart = useRef(null)\n\n  useEffect(() => {\n    const width = document.documentElement.clientWidth\n    const c = container.current\n    console.log(c)\n    c.style.width = `${width - 20}px`\n    c.style.height = `${(width - 20) * 1.2}px`\n    chart.current = echarts.init(c, 'dark')\n\n  }, []) // [] - mounted on first time\n\n  useEffect(() => {\n    chart.current.setOption(option)\n  }, [option]) // when option change ç±»ä¼¼ vue çš„ watch\n\n  useEffect(() => {\n    if (loading) chart.current.showLoading()\n    else chart.current.hideLoading()\n  }, [loading])\n  return (\n    <div ref={container}/>\n  )\n}\n")])])]),n("p",[t._v("useImperativeHandle")]),t._v(" "),n("p",[t._v("useImperativeHandleå¯ä»¥è®©ä½ åœ¨ä½¿ç”¨refæ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨refè¿™æ ·çš„å‘½ä»¤å¼ä»£ç ï¼ŒuseImperativeHandleåº”å½“ä¸forwardRefä¸€èµ·ä½¿ç”¨")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("function FancyInput(props,ref){\n\tconst inputRef = useRef();\n  useImperativeHandle(ref,()=>({\n    focus:()=>{\n      inputRef.current.focus();\n    }\n  }));\n  return <input ref={inputRef} />\n}\n\nFancyInput = forwardRef(FancyInput)\n")])])]),n("h3",{attrs:{id:"usedebugvalue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usedebugvalue"}},[t._v("#")]),t._v(" useDebugValue")]),t._v(" "),n("h3",{attrs:{id:"è‡ªå®šä¹‰hookæ··ç”¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰hookæ··ç”¨"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰hookæ··ç”¨")]),t._v(" "),n("p",[t._v("å¯ä»¥æŠŠä¸åŒçš„hookæŒ‰ç…§å®é™…çš„éœ€æ±‚æ··åˆèµ·æ¥ï¼Œå°è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°ä½¿ç”¨")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('const useList = () => {\n  const [list, setList] = useState(null);\n  useEffect(() => {\n    ajax("/list").then(list => {\n      setList(list);\n    });\n  }, []); // [] ç¡®ä¿åªåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œ\n  return {\n    list: list,\n    setList: setList\n  };\n};\nexport default useList;\n')])])]),n("h3",{attrs:{id:"hookçš„ä½¿ç”¨è§„åˆ™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookçš„ä½¿ç”¨è§„åˆ™"}},[t._v("#")]),t._v(" hookçš„ä½¿ç”¨è§„åˆ™")]),t._v(" "),n("p",[t._v("hookæœ‰ä»¥ä¸‹ä½¿ç”¨è§„åˆ™ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook")]),t._v(" "),n("li",[t._v("ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚")]),t._v(" "),n("li",[t._v("é¡ºåºè°ƒç”¨ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ Hook åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© React èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ useState å’Œ useEffect è°ƒç”¨ä¹‹é—´ä¿æŒ hook çŠ¶æ€çš„æ­£ç¡®ã€‚")])]),t._v(" "),n("p",[t._v("åœ¨å•ä¸ªç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨å¤šä¸ª State Hook æˆ– Effect Hookï¼Œä½†æ˜¯React æ€ä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª "),n("code",[t._v("useState")]),t._v("ï¼Ÿç­”æ¡ˆæ˜¯ React é çš„æ˜¯ Hook è°ƒç”¨çš„é¡ºåºã€‚å› ä¸ºæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼ŒHook çš„è°ƒç”¨é¡ºåºåœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚åªè¦ Hook çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼ŒReact å°±èƒ½æ­£ç¡®åœ°å°†å†…éƒ¨ state å’Œå¯¹åº”çš„ Hook è¿›è¡Œå…³è”ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœåœ¨è¯­å¥ä¸­ä½¿ç”¨hook")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ åœ¨æ¡ä»¶è¯­å¥ä¸­ä½¿ç”¨ Hook è¿åç¬¬ä¸€æ¡è§„åˆ™")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("persistForm")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      localStorage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'formData'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸­ "),n("code",[t._v("name !== ''")]),t._v(" è¿™ä¸ªæ¡ä»¶å€¼ä¸º "),n("code",[t._v("true")]),t._v("ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæ‰§è¡Œè¿™ä¸ª Hookã€‚ä½†æ˜¯ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶æˆ‘ä»¬å¯èƒ½æ¸…ç©ºäº†è¡¨å•ï¼Œè¡¨è¾¾å¼å€¼å˜ä¸º "),n("code",[t._v("false")]),t._v("ã€‚æ­¤æ—¶çš„æ¸²æŸ“ä¼šè·³è¿‡è¯¥ Hookï¼ŒHook çš„è°ƒç”¨é¡ºåºå‘ç”Ÿäº†æ”¹å˜ï¼š")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Mary'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è¯»å–å˜é‡åä¸º name çš„ stateï¼ˆå‚æ•°è¢«å¿½ç•¥ï¼‰")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// useEffect(persistForm)  // ğŸ”´ æ­¤ Hook è¢«å¿½ç•¥ï¼")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Poppins'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ 2 ï¼ˆä¹‹å‰ä¸º 3ï¼‰ã€‚è¯»å–å˜é‡åä¸º surname çš„ state å¤±è´¥")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("updateTitle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ğŸ”´ 3 ï¼ˆä¹‹å‰ä¸º 4ï¼‰ã€‚æ›¿æ¢æ›´æ–°æ ‡é¢˜çš„ effect å¤±è´¥")]),t._v("\n")])])]),n("p",[t._v("React ä¸çŸ¥é“ç¬¬äºŒä¸ª "),n("code",[t._v("useState")]),t._v(" çš„ Hook åº”è¯¥è¿”å›ä»€ä¹ˆã€‚React ä¼šä»¥ä¸ºåœ¨è¯¥ç»„ä»¶ä¸­ç¬¬äºŒä¸ª Hook çš„è°ƒç”¨åƒä¸Šæ¬¡çš„æ¸²æŸ“ä¸€æ ·ï¼Œå¯¹åº”çš„æ˜¯ "),n("code",[t._v("persistForm")]),t._v(" çš„ effectï¼Œä½†å¹¶éå¦‚æ­¤ã€‚ä»è¿™é‡Œå¼€å§‹ï¼Œåé¢çš„ Hook è°ƒç”¨éƒ½è¢«æå‰æ‰§è¡Œï¼Œå¯¼è‡´ bug çš„äº§ç”Ÿã€‚")]),t._v(" "),n("h4",{attrs:{id:"ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨hook"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨hook"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ä¸­ä½¿ç”¨hook")]),t._v(" "),n("p",[t._v("react hookæ‰§è¡Œæ—¶ä»¥æ•°ç»„çš„ç»“æ„æ‰§è¡Œï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œå¦‚æœä½¿ç”¨æ¡ä»¶è¯­å¥å°±ä¼šå‡ºç°ç¼ºå°‘æŸä¸€ä¸ªhookï¼Œç„¶åå‡ºç°é”™ä½å¯¼è‡´é”™è¯¯ã€‚")]),t._v(" "),n("p",[t._v("å¾ªç¯è¯­å¥ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸èƒ½ç»å¯¹ä¿è¯hookçš„æ‰§è¡Œé¡ºåºã€‚å¦‚æœéè¦åœ¨å¾ªç¯ä¸­ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨reactå®˜æ–¹çš„lint")]),t._v(" "),n("h3",{attrs:{id:"hookçš„é—­åŒ…é™·é˜±-useeffectä¸­å®šæ—¶å™¨çš„ä½¿ç”¨-è¿‡æœŸé—­åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookçš„é—­åŒ…é™·é˜±-useeffectä¸­å®šæ—¶å™¨çš„ä½¿ç”¨-è¿‡æœŸé—­åŒ…"}},[t._v("#")]),t._v(" Hookçš„é—­åŒ…é™·é˜±(useEffectä¸­å®šæ—¶å™¨çš„ä½¿ç”¨ï¼Œè¿‡æœŸé—­åŒ…)")]),t._v(" "),n("p",[t._v("é—­åŒ…é™·é˜±å°±æ˜¯åœ¨React Hookè¿›è¡Œå¼€å‘æ—¶ï¼Œé€šè¿‡useStateå®šä¹‰çš„å€¼æ‹¿åˆ°çš„éƒ½ä¸æ˜¯æœ€æ–°çš„å€¼")]),t._v(" "),n("p",[t._v("ä¸Šä»£ç ")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = () =>{\n   const [count,setCount] = useState(0)\n   useEffect(()=>{\n     const timeId = setInterval(()=>{\n        setCount(count+1)\n     },1000)\n     return ()=>{clearInterval(timeId)}\n   },[])\n   return (\n      <span>{count}</span>\n   )\n}\n")])])]),n("p",[t._v("ä¸Šé¢çš„ä»£ç ä¸­ï¼Œcountå¹¶ä¸ä¼šå’Œç†æƒ³ä¸­ä¸€æ ·æ¯è¿‡ä¸€ç§’è‡ªåŠ¨+1å¹¶æ›´æ–°DOMï¼Œè€Œæ˜¯ä»0å˜æˆ1åï¼Œconsoleæ‰“å°å‡ºçš„countä¸€ç›´æ˜¯è®¾ç«‹çš„é»˜è®¤å€¼0")]),t._v(" "),n("p",[t._v("å› ä¸ºuseEffectçš„ä¾èµ–æ•°ç»„æ˜¯ç©ºæ•°ç»„ï¼Œé‚£setIntervalé‡Œé¢çš„countæ˜¯é€šè¿‡é—­åŒ…å–å¾—çš„å€¼ï¼Œä»–è¯»å–åˆ°çš„ç¬¬ä¸€æ¬¡çš„countï¼Œå¹¶ä¸”useEffectå¹¶æ²¡æœ‰æ›´æ–°ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯0")]),t._v(" "),n("p",[t._v("å¦‚æœå»æ‰useEffectçš„ä¾èµ–æ•°ç»„å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç„¶è€Œä¼šé€ æˆæ¯æ¬¡Appç»„ä»¶æ¸²æŸ“éƒ½ä¼šè¿è¡ŒuseEffecté‡Œé¢çš„å‡½æ•°ï¼Œå°±ä¼šé€ æˆä¸å¿…è¦çš„æµªè´¹å’Œéšè—çš„bug")]),t._v(" "),n("h4",{attrs:{id:"è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("p",[n("strong",[t._v("ä½¿ç”¨setstateå›è°ƒ")])]),t._v(" "),n("p",[t._v("æŠŠsetCount(count+1)æ”¹æˆsetCount(count=>count+1)ï¼Œå‡½æ•°å¼æ›´æ–°")]),t._v(" "),n("p",[t._v("å®ƒå…è®¸æˆ‘ä»¬æŒ‡å®šstateå¦‚ä½•æ”¹å˜è€Œä¸å¼•ç”¨å½“å‰çš„stateï¼Œå› ä¸ºå›è°ƒå‡½æ•°ä¸­çš„å‚æ•°æ˜¯æœ€æ–°çš„countå€¼")]),t._v(" "),n("p",[n("strong",[t._v("ä½¿ç”¨useReducerä»£æ›¿")])]),t._v(" "),n("p",[t._v("æŠŠsetCountæ”¹æˆuseReducerçš„dispatchï¼Œå› ä¸ºuseReducerçš„dispatchçš„èº«ä»½æ°¸è¿œæ˜¯ç¨³å®šçš„ã€‚å³ä½¿reducerå‡½æ•°æ˜¯å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨ä¸”ä¾èµ–props")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const setCountReducer = (state,action)=>{\n   switch(action.type){\n     case 'add':\n       return state+action.value \n     case 'minus':\n       return state-action.value\n     default: \n       return state\n   }\n}\n\nconst App = () =>{\n  const [count,dispatch] = useReducer(setCountReducer,0)\n  useEffect(()=>{\n    const timeId = setInterval(()=>{\n      dispatch({type:'add',value:1})\n    },1000)\n    return ()=> clearInterval(timeId)\n  },[])\n  return (\n     <span>{count}</span>\n  )\n} \n")])])]),n("p",[n("strong",[t._v("ä½¿ç”¨useRefå­˜å‚¨å˜é‡")])]),t._v(" "),n("p",[t._v("é€šè¿‡useRefç”Ÿæˆçš„å¯¹è±¡é»˜è®¤éƒ½æ˜¯{current:{}},æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä»–ä¹Ÿæ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œä¸ä¼šå› ä¸ºç»„ä»¶çš„é‡æ–°æ¸²æŸ“å¯¼è‡´å–å¾—é—­åŒ…çš„å¯¹è±¡å¼•ç”¨ï¼Œå› æ­¤å®ƒä¸ä»…å¯ä»¥ç»‘å®šDOMï¼Œä¹Ÿå¯ä»¥ç»‘å®šä»»æ„æˆ‘ä»¬æƒ³ç»‘å®šçš„æ•°æ®")]),t._v(" "),n("p",[t._v("æ”¹é€ ä»£ç å¦‚ä¸‹")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = () =>{\n  const [count,setCount] = useState(0)\n  const countRef = useRef()\n  countRef.current = count\n  useEffect(()=>{\n    const timeId = setInterval(()=>{\n      setCount(countRef.current+1)\n    },1000)\n    return ()=> clearInterval(timeId)\n  },[])\n  return (\n     <span>{countRef.current}</span>\n  )\n}\n")])])]),n("h4",{attrs:{id:"å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ"}},[t._v("#")]),t._v(" å…¶ä»–ä¼šå¯¼è‡´é—­åŒ…é™·é˜±çš„æƒ…å†µ")]),t._v(" "),n("p",[t._v("å¼‚æ­¥å‡½æ•°")]),t._v(" "),n("p",[t._v("ä½¿ç”¨setIntervalå’ŒsetTimeoutå‡½æ•°æ—¶ï¼Œå†…éƒ¨çš„å˜é‡è¯»å–çš„æ˜¯å¼‚æ­¥å‡½æ•°åœ¨è¿è¡Œæ—¶ç»„ä»¶å¤„åœ¨é—­åŒ…æƒ…å†µä¸‹çš„å½“å‰å€¼ï¼Œå› ä¸ºåœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨çš„æ•°æ®å¹¶ä¸ä¼šåœ¨domæ›´æ–°ä¹‹åæ›´æ–°ä¸ºæ–°çš„å€¼ï¼Œä»–ä»¬çš„å˜é‡å¼•ç”¨å·²ç»ä¸æ˜¯åŒä¸€ä¸ªäº†")]),t._v(" "),n("p",[t._v("ä¸Šä»£ç ")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = ()=>{\n  const [count,setCount] = useState(0)\n  const consoleCount = ()=>{\n    const timeId = setTimeout(()=>{\n       console.log(count)\n    },2000)\n    return ()=> clearTimeout(timeId)\n  }\n  return (\n    <div>\n      <span>{count}</span>\n      <button onClick={()=>setCount(count+1)}>æŒ‰æˆ‘åŠ 1</button>\n      <button onClick={consoleCount}>è¾“å‡ºcount</button>\n    </div>\n  )\n}\n")])])]),n("p",[t._v("å…ˆç‚¹å‡»ä¸‰æ¬¡åŠ 1æŒ‰é’®ï¼ŒæŠŠcountå˜æˆ3ï¼Œç„¶åç‚¹å‡»è¾“å‡ºæŒ‰é’®ï¼Œæ­¤æ—¶å†ç‚¹å‡»åŠ 1æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºçš„countè¿˜æ˜¯3ï¼Œå³è¾“å‡ºçš„countæ˜¯æ—§å€¼")]),t._v(" "),n("p",[t._v("domç›‘å¬å‡½æ•°äº‹ä»¶ä¸­çš„åŒ¿åå‡½æ•°")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const App = () =>{\n    const [count,setCount] = useState(0)\n    const consoleCount = ()=>{\n      console.log(count)\n    }\n    useEffect(()=>{\n      window.addEventListener('scroll',consoleCount)\n      return ()=>{\n         window.removeEventListener('scroll',consoleCount)\n      }\n    },[])\n  \n    return (\n       <div style={{height:'400vh'}}>\n         <span>{count}</span>\n        <button onClick={()=>setCount(count+1)}>æŒ‰æˆ‘åŠ 1</button>\n      <button onClick={consoleCount}>è¾“å‡ºcount</button>\n      </div>\n    )\n}\n")])])]),n("p",[t._v("å¯ä»¥çœ‹åˆ°ä¸ç®¡é¡µé¢æ€ä¹ˆæ»šåŠ¨ï¼Œè¾“å‡ºçš„countæ°¸è¿œæ˜¯0ã€‚å› ä¸ºaddEventListeneråªåœ¨useEffectåˆå§‹åŒ–çš„æ—¶å€™è¿›è¡Œäº†ç»‘å®šï¼Œæ‰§è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œcountè¯»å–çš„æ˜¯ç»‘å®šå‡½æ•°æ—¶çš„æ—§å€¼")]),t._v(" "),n("p",[t._v("ä½¿ç”¨useRef()å­˜å‚¨å®ä¾‹å˜é‡ä¹Ÿèƒ½è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯reactå®˜æ–¹æ¨èçš„æ–¹æ³•ã€‚")]),t._v(" "),n("h3",{attrs:{id:"ä½¿ç”¨react-hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä½¿ç”¨react-hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡"}},[t._v("#")]),t._v(" ä½¿ç”¨react hookså¦‚ä½•è®©ä¸‹é¢çš„å­ç»„ä»¶åªrenderä¸€æ¬¡")]),t._v(" "),n("p",[t._v("ä½¿ç”¨useRefä¿å­˜å­ç»„ä»¶çŠ¶æ€ï¼Œå½“çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œç›´æ¥æ›´æ–°refå€¼ï¼Œå½“å­ç»„ä»¶clickæ—¶ï¼Œåœ¨æ›´æ–°refå€¼åï¼Œå†è°ƒç”¨ä¸€æ¬¡updateè§¦å‘å­ç»„ä»¶æ¸²æŸ“")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React,{useEffect,useMemo,useState,useRef} from 'react'\nfunction A(){\n   const [count,setCount] = useState(0);\n   \n   return (\n      <div>\n        <p>æˆ‘æ˜¯çˆ¶ç»„ä»¶</p>\n        <p>çˆ¶ç»„ä»¶çš„countæ˜¯{count}</p>\n        <button>click</button>\n        <B count={count}/>\n      </div>\n   );\n}\n\nconst B = React.memo(({count:}{count:number})=>{\n  const numberRef = useRef(0);\n  const [,update] = useState({});\n  const updateNumber = () =>{\n    numberRef.current++;\n    update({});\n  };\n  \n  useMemo(()=>{\n    numberRef.current = count;\n  },[count])\n  \n  console.log('å­ç»„ä»¶Render')\n  \n  return(\n     <div>\n       <p>æˆ‘æ˜¯å­ç»„ä»¶</p>\n       <p>å­ç»„ä»¶çš„numberæ˜¯{numberRef.current}</p>\n       <button onClick={updateNumber}>click</button>\n     </div>\n  )\n})\n")])])]),n("h2",{attrs:{id:"hook-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hook-2"}},[t._v("#")]),t._v(" Hook")]),t._v(" "),n("h3",{attrs:{id:"hookè°ƒç”¨å¼‚æ­¥æ¥å£å†™æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookè°ƒç”¨å¼‚æ­¥æ¥å£å†™æ³•"}},[t._v("#")]),t._v(" Hookè°ƒç”¨å¼‚æ­¥æ¥å£å†™æ³•")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nfunction App() {\n  const [data, setData] = useState({ products: [{\n    productId: '123',\n    productName: 'macbook'\n  }] });\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError,setIsError] = useState(false);\n  \n  useEffect(()=> {\n    const fetchData = async()=> {\n      setIsError(false);\n      setIsLoading(true);\n      \n      try {\n        const result = await axios (\n        \t'https://c.com/api/products?date=today',\n        )\n        setData(result.data);\n      }catch(e){\n        setIsError(true);\n      }\n      \n      setIsLoading(false);\n    }\n    fetchData();\n  },[]);\n  \n  return (\n  \t<div>\n      { isError && <div></div>}\n      { isLoading ? (\n      \t<div>Loading...</div>\n      ):(\n      \t<ul>\n        \t{data.products.map(i=> (\n          \t<li key=\"{i.productId}\">\n              {i.productName}\n            </li>\n          ))}\n        </ul>\n      )};\n    </div>\n  )\n}\n\nexport default App;\n")])])]),n("p",[t._v("ä¹Ÿå¯ä»¥ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("const MyFunctionnalComponent: React.FC = props => {\n  useEffect(()=>{\n    (async function anyNameFunction() {\n      await loadContent();\n    })();\n  },[]);\n  return <div></div>\n}\n")])])]),n("h2",{attrs:{id:"hookåŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hookåŒ…"}},[t._v("#")]),t._v(" HookåŒ…")]),t._v(" "),n("h3",{attrs:{id:"react-use"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-use"}},[t._v("#")]),t._v(" react-use")]),t._v(" "),n("h3",{attrs:{id:"react-router"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react-router"}},[t._v("#")]),t._v(" react-router")]),t._v(" "),n("p",[t._v("useHistory useLocation useParams useRouteMatch")]),t._v(" "),n("div",{staticClass:"language-react extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('import {\n  useHistory,\n  useLocation,\n  useParams,\n  useRouteMatch,\n} from "react-router-dom"\n\nfunction HomeButton() {\n  let history = useHistory();\n  function haddleClick() {\n    history.push("/home");\n  }\n  \n  function usePageViews() {\n      let location = useLocation();\n    \tReact.useEffect(()=>{\n        ga.send(["pageview", location.pathname]);\n      },[location])\n  }\n  \n  let { slug } = useParams();\n  return <div>Now showing post {slug}</div>\n  \n  let match = useRouteMatch("/blog/:slug")\n  const match = useRouteMatch({\n    path: "/BLOG/:slug",\n    strict: true,\n    sensitive: true\n  })\n}\n')])])])])}),[],!1,null,null,null);s.default=e.exports}}]);