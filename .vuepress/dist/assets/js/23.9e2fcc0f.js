(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{381:function(t,a,s){"use strict";s.r(a);var e=s(44),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("​      前端框架，快速开发页面，函数式编程，与后端api快速搭建")]),t._v(" "),s("h2",{attrs:{id:"redux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redux"}},[t._v("#")]),t._v(" Redux")]),t._v(" "),s("p",[t._v("Facebook 有一个 Flux 的实现，但是我们会使用 Redux 库。 它使用相同的原理，但是更简单一些。 Facebook 现在也使用 Redux 而不是原来的 Flux")]),t._v(" "),s("h3",{attrs:{id:"基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),s("p",[t._v("redux中概念：")]),t._v(" "),s("p",[t._v("Store:储存state的地方，通过createStore方法创建store")]),t._v(" "),s("p",[t._v("Action:应用中的各种操作或动作，不同的操作会改变相应的state状态")]),t._v(" "),s("p",[t._v("Reducer:按照action更新state")]),t._v(" "),s("p",[t._v("Store.getState():获取整个状态数据对象")]),t._v(" "),s("p",[t._v("store.dispatch():分发Action")]),t._v(" "),s("p",[t._v("store.subscribe():设置监听函数，一旦state变化就会自动执行")]),t._v(" "),s("p",[t._v("以图书馆举例，react component就是一个要借书的用户，当你向图书馆借书时跟图书管理员说要什么书，这个语境就是Action Creators，图书馆的管理员就是store，负责数据状态的管理，图书馆收到请求后向图书系统中查询，这个系统就是Reducers。")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("yarn add redux\n")])])]),s("p",[t._v("新建reducer.js")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("\n")])])]),s("p",[t._v("新建store.js")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),t._v("\n\n")])])]),s("p",[t._v("action.js")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ADD_TODO'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   payload"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Learn Redux'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("监听")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("createStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nstore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listener"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("action发出后reducer立即执行即为同步，一段时间后执行为异步")]),t._v(" "),s("p",[t._v("对于异步，")]),t._v(" "),s("h3",{attrs:{id:"react-redux"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-redux"}},[t._v("#")]),t._v(" React-redux")]),t._v(" "),s("p",[t._v("react-redux提供connet方法，用于从UI组件生成容器组件，")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("connet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" VisibleTodoList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n   mapStateToProps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   mapDispatchToProps\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TodoList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("connet生成容器之后，需要让容器组件拿到state对象，react-redux提供Provider组件让容器拿到state")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("createStore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Provider store"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Provider"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"中间件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#中间件"}},[t._v("#")]),t._v(" 中间件")]),t._v(" "),s("p",[t._v("redux-saga")]),t._v(" "),s("p",[t._v("功能类似redux-thunk，用于异步action，原理是通过generator函数，相比于thunk更复杂一些，集中处理了action，支持dispatch后的回调。")]),t._v(" "),s("p",[t._v("redux-thunk")]),t._v(" "),s("p",[t._v("用于异步action，允许你的action可以返回函数, 带有dispatch和getState两个参数, 在这个action函数里, 异步的dispatch action;")]),t._v(" "),s("p",[t._v("redux-logger")]),t._v(" "),s("p",[t._v("在控制台打印redux过程，类似的也可以按redux文档示范的中间件，但是感觉logger的颜色更好看")]),t._v(" "),s("p",[t._v("redux-persist")]),t._v(" "),s("p",[t._v("实现数据持久化，自动存入localStorage，配置略麻烦")]),t._v(" "),s("h3",{attrs:{id:"文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#文档"}},[t._v("#")]),t._v(" 文档")]),t._v(" "),s("p",[t._v("Https://cn.redux.js.org")]),t._v(" "),s("h2",{attrs:{id:"mobx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mobx"}},[t._v("#")]),t._v(" mobx")]),t._v(" "),s("p",[t._v("mobx与redux相比：")]),t._v(" "),s("ul",[s("li",[t._v("函数式 VS 面向对象")]),t._v(" "),s("li",[t._v("redux 需要 connect，也需要 Immutable Data，reducer，action，文件、代码量较多，概念也多。 mobx 直接引用对象组织，修改数据。")]),t._v(" "),s("li",[t._v("redux 数据流动很自然，任何 dispatch 都会导致广播，需要依据对象引用是否变化来控制更新粒度。mobx 数据流流动不自然，只有用到的数据才会引发绑定，局部精确更新，但免去了粒度控制烦恼。")]),t._v(" "),s("li",[t._v("redux 有时间回溯，每个 action 都被记录下来，可预测性，定位错误的优势。mobx 只有一份数据引用，不会有历史记录。")]),t._v(" "),s("li",[t._v("redux 引入中间件去解决异步操作，以及很多复杂的工作。mobx 没有中间件，数据改了就是改了，没有让你增加中间件的入口。")])]),t._v(" "),s("p",[t._v("为什么用mobx")]),t._v(" "),s("ul",[s("li",[t._v("简单，概念，代码少")]),t._v(" "),s("li",[t._v("class 去定义、组织 store，数据、computed、action 定义到一块，结构更清晰，面向对象的思维更适合快速的业务开发")]),t._v(" "),s("li",[t._v("某个 store 的引用不一定非在组件中才能取到，因为是对象，可以直接引用。比如在 constant.js 文件中可以定义一些来自 store 的变量。")]),t._v(" "),s("li",[t._v("据说效率更高。mobx 会建立虚拟推导图 (virtual derivation graph)，保证最少的推导依赖")])]),t._v(" "),s("h3",{attrs:{id:"基本概念-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本概念-2"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),s("p",[t._v("Observable state")]),t._v(" "),s("p",[t._v("给数据对象添加可观测的功能，支持任何数据结构。")]),t._v(" "),s("p",[t._v("Computed values")]),t._v(" "),s("p",[t._v("某个 state 发生变化时，需要自动计算的值。比如说单价变化，总价的计算")]),t._v(" "),s("p",[t._v("Reactions")]),t._v(" "),s("p",[t._v("Reactions 和 Computed 类似，都是 state 变化后触发。但它不是去计算值，而是会产生副作用，比如 console、网络请求、react dom 更新等。mobx 提供了三个函数用于自定义 reactions。")]),t._v(" "),s("p",[t._v("Actions")]),t._v(" "),s("h3",{attrs:{id:"mobx的object与map区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mobx的object与map区别"}},[t._v("#")]),t._v(" mobx的object与map区别")]),t._v(" "),s("h3",{attrs:{id:"mobx与redux的不同"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mobx与redux的不同"}},[t._v("#")]),t._v(" mobx与redux的不同")]),t._v(" "),s("p",[t._v("redux与mobx的相同点：")]),t._v(" "),s("p",[t._v("1.统一维护管理状态应用")]),t._v(" "),s("p",[t._v("2.某一状态只有一个可信状态数据来源store")]),t._v(" "),s("p",[t._v("3.操作更新状态方式统一，并且可控，")]),t._v(" "),s("p",[t._v("4.支持将store与React组件连接，如react-redux、mobx-react")]),t._v(" "),s("p",[t._v("不同点：")]),t._v(" "),s("p",[t._v("1.Redux更多的是遵循函数式编程思想，比如reducer就是一个纯函数，mobx设计更多偏向于面向对象编程和响应式编程，通常将状态包装成一个可观察对象，使用可观察对象的能力，一旦状态对象变更，就能自动获得更新")]),t._v(" "),s("p",[t._v("2.redux总是将所有共享的应用数据集中在一个大的store中，而mobx则通常按模块将应用状态划分，在多个独立的store中管理")]),t._v(" "),s("p",[t._v("3.Redux默认以Javascript原生对象存储数据，Mobx使用可观察对象，Redux需要手动追踪所有状态对象的变更，Mobx可以监听可观察对象，当其变更时自动触发监听。")]),t._v(" "),s("p",[t._v("4.Redux中的对象通常是不可变的，我们不能直接操作状态对象，而总是在原来状态对象基础上返回一个新的状态对象，这样就能方便地返回应用上一状态，而mobx可以直接使用新值更新状态对象")]),t._v(" "),s("p",[t._v("5.连接组件使用react-redux和mobx-react。react-redux中提供Provider负责将Store注入react应用，使用connect负责将store state注入容器组件，并选择特定状态作为容器组件props传递。在mobx-react中，使用Provider将所有store注入应用，使用inject将特定store注入特定组件，然后使用Observer保证组件能响应store中的可观察对象变更，即store更新")]),t._v(" "),s("p",[t._v("mobx异步action不需要配置，redux则需要中间件redux-sage或者redux-thunk")]),t._v(" "),s("p",[t._v("选择mobx可能的原因：")]),t._v(" "),s("p",[t._v("1。学习成本低，不需要很多配置。")]),t._v(" "),s("p",[t._v("2.面向对象编程。mobx支持面向对象编程，也支持函数式，redux只支持函数式")]),t._v(" "),s("p",[t._v("3.模版代码少。")]),t._v(" "),s("p",[t._v("不选择mobx可能的原因：")]),t._v(" "),s("p",[t._v("1.过于自由")]),t._v(" "),s("p",[t._v("2.可扩展性、可维护性。mobx不适用于大型项目，需要手动约定规范")]),t._v(" "),s("p",[t._v("https://github.com/sunyongjian/blog/issues/28")]),t._v(" "),s("h2",{attrs:{id:"recoil"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#recoil"}},[t._v("#")]),t._v(" Recoil")]),t._v(" "),s("p",[s("code",[t._v("Recoil")]),t._v(" 本身就是为了解决 "),s("code",[t._v("React")]),t._v(" 全局数据流管理的问题，采用分散管理原子状态的设计模式。")]),t._v(" "),s("p",[s("code",[t._v("Recoil")]),t._v(" 提出了一个新的状态管理单位 "),s("code",[t._v("Atom")]),t._v("，它是可更新和可订阅的，当一个 "),s("code",[t._v("Atom")]),t._v(" 被更新时，每个被订阅的组件都会用新的值来重新渲染。如果从多个组件中使用同一个 "),s("code",[t._v("Atom")]),t._v(" ，所有这些组件都会共享它们的状态。")]),t._v(" "),s("p",[t._v("可以把"),s("code",[t._v("Atom")]),t._v(" 想象为为一组 "),s("code",[t._v("state")]),t._v(" 的集合，改变一个 "),s("code",[t._v("Atom")]),t._v(" 只会渲染特定的子组件，并不会让整个父组件重新渲染。")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("Redux、Mobx")]),t._v(" 当然可以，并没有什么问题，主要原因是它们本身并不是 "),s("code",[t._v("React")]),t._v(" 库，我们是借助这些库的能力来实现状态管理。像 "),s("code",[t._v("Redux")]),t._v(" 它本身虽然提供了强大的状态管理能力，但是使用的成本非常高，你还需要编写大量冗长的代码，另外像异步处理或缓存计算也不是这些库本身的能力，甚至需要借助其他的外部库。")]),t._v(" "),s("p",[t._v("并且，它们并不能访问 "),s("code",[t._v("React")]),t._v(" 内部的调度程序，而 "),s("code",[t._v("Recoil")]),t._v(" 在后台使用 "),s("code",[t._v("React")]),t._v(" 本身的状态，在未来还能提供并发模式这样的能力。")]),t._v(" "),s("p",[t._v("使用实例")]),t._v(" "),s("p",[t._v("初始化")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React from 'react';\nimport {\n  RecoilRoot,\n  atom,\n  selector,\n  useRecoilState,\n  useRecoilValue,\n  useSetRecoilState\n} from 'recoil';\n\nfunction App() {\n  return (\n    <RecoilRoot>\n      <CharacterCounter />\n    </RecoilRoot>\n  );\n}\n")])])]),s("p",[t._v("定义状态")]),t._v(" "),s("p",[s("code",[t._v("Atom")]),t._v(" 是一种新的状态，但是和传统的 "),s("code",[t._v("state")]),t._v(" 不同，它可以被任何组件订阅，当一个 "),s("code",[t._v("Atom")]),t._v(" 被更新时，每个被订阅的组件都会用新的值来重新渲染。")]),t._v(" "),s("p",[t._v("定义atom")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export const nameState = atom({\n  key: 'nameState',\n  default: 'ConardLi'\n});\n")])])]),s("p",[t._v("这种方式意味着你不需要像 "),s("code",[t._v("Redux")]),t._v(" 那样集中定义状态，可以像 "),s("code",[t._v("Mobx")]),t._v(" 一样将数据分散定义在任何地方。")]),t._v(" "),s("p",[t._v("要创建一个 "),s("code",[t._v("Atom")]),t._v(" ，必须要提供一个 "),s("code",[t._v("key")]),t._v(" ，其必须在 "),s("code",[t._v("RecoilRoot")]),t._v(" 作用域中是唯一的，并且要提供一个默认值，默认值可以是一个静态值、函数甚至可以是一个异步函数。")]),t._v(" "),s("p",[t._v("订阅和更新状态")]),t._v(" "),s("p",[s("code",[t._v("Recoil")]),t._v(" 采用 "),s("code",[t._v("Hooks")]),t._v(" 方式订阅和更新状态，常用的是下面三个 API：")]),t._v(" "),s("p",[s("code",[t._v("useRecoilState")]),t._v("：类似 useState 的一个 "),s("code",[t._v("Hook")]),t._v("，可以取到 "),s("code",[t._v("atom")]),t._v(" 的值以及 "),s("code",[t._v("setter")]),t._v(" 函")]),t._v(" "),s("p",[s("code",[t._v("useSetRecoilState")]),t._v("：只获取 "),s("code",[t._v("setter")]),t._v(" 函数，如果只使用了这个函数，状态变化不会导致组件重新渲染")]),t._v(" "),s("p",[s("code",[t._v("useRecoilValue")]),t._v("：只获取状态")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { nameState } from './store'\n// useRecoilState\nconst NameInput = () => {\n  const [name, setName] = useRecoilState(nameState);\n  const onChange = (event) => {\n   setName(event.target.value);\n  };\n  return <>\n   <input type=\"text\" value={name} onChange={onChange} />\n   <div>Name: {name}</div>\n  </>;\n}\n\n// useRecoilValue\nconst SomeOtherComponentWithName = () => {\n  const name = useRecoilValue(nameState);\n  return <div>{name}</div>;\n}\n\n// useSetRecoilState  \nconst SomeOtherComponentThatSetsName = () => {\n  const setName = useSetRecoilState(nameState);\n  return <button onClick={() => setName('Jon Doe')}>Set Name</button>;\n}\n")])])]),s("p",[t._v("派生状态")]),t._v(" "),s("p",[s("code",[t._v("selector")]),t._v(" 表示一段派生状态，它使我们能够建立依赖于其他 "),s("code",[t._v("atom")]),t._v(" 的状态。它有一个强制性的 "),s("code",[t._v("get")]),t._v(" 函数，其作用与 "),s("code",[t._v("redux")]),t._v(" 的 "),s("code",[t._v("reselect")]),t._v(" 或 "),s("code",[t._v("MobX")]),t._v(" 的 "),s("code",[t._v("@computed")]),t._v(" 类似。")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const lengthState = selector({\n  key: 'lengthState', \n  get: ({get}) => {\n    const text = get(nameState);\n    return text.length;\n  },\n});\n\nfunction NameLength() {\n  const length = useRecoilValue(charLengthState);\n  return <>Name Length: {length}</>;\n}\n")])])]),s("p",[t._v("selector 是一个纯函数：对于给定的一组输入，它们应始终产生相同的结果（至少在应用程序的生命周期内）。这一点很重要，因为选择器可能会执行一次或多次，可能会重新启动并可能会被缓存。")]),t._v(" "),s("p",[t._v("异步状态")]),t._v(" "),s("p",[s("code",[t._v("Recoil")]),t._v(" 提供了通过数据流图将状态和派生状态映射到 "),s("code",[t._v("React")]),t._v(" 组件的方法。真正强大的功能是图中的函数也可以是异步的。这使得我们可以在异步 "),s("code",[t._v("React")]),t._v(" 组件渲染函数中轻松使用异步函数。使用 "),s("code",[t._v("Recoil")]),t._v(" ，你可以在选择器的数据流图中无缝地混合同步和异步功能。只需从选择器 "),s("code",[t._v("get")]),t._v(" 回调中返回 "),s("code",[t._v("Promise")]),t._v(" ，而不是返回值本身。")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const userNameQuery = selector({\n  key: 'userName',\n  get: async ({get}) => {\n    const response = await myDBQuery({\n      userID: get(currentUserIDState),\n    });\n    return response.name;\n  },\n});\n\nfunction CurrentUserInfo() {\n  const userName = useRecoilValue(userNameQuery);\n  return <div>{userName}</div>;\n}\n")])])]),s("p",[s("code",[t._v("Recoil")]),t._v(" 推荐使用 "),s("code",[t._v("Suspense")]),t._v("，"),s("code",[t._v("Suspense")]),t._v(" 将会捕获所有异步状态，另外配合 "),s("code",[t._v("ErrorBoundary")]),t._v(" 来进行错误捕获：")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("function MyApp() {\n  return (\n    <RecoilRoot>\n      <ErrorBoundary>\n        <React.Suspense fallback={<div>Loading...</div>}>\n          <CurrentUserInfo />\n        </React.Suspense>\n      </ErrorBoundary>\n    </RecoilRoot>\n  );\n}\n")])])]),s("p",[s("code",[t._v("Recoil")]),t._v(" 推崇的是分散式的状态管理，这个模式很类似于 "),s("code",[t._v("Mobx")]),t._v("，使用起来也感觉有点像 "),s("code",[t._v("observable + computed")]),t._v(" 的模式，但是其 API 以及核心思想设计的又没有  "),s("code",[t._v("Mobx")]),t._v(" 一样简洁易懂，反而有点复杂，对于新手上手起来会有一定成本。")]),t._v(" "),s("p",[t._v("在使用方式上完全拥抱了函数式的 "),s("code",[t._v("Hooks")]),t._v(" 使用方式，并没有提供 "),s("code",[t._v("Componnent")]),t._v(" 的使用方式，目前使用原生的 "),s("code",[t._v("Hooks API")]),t._v(" 我们也能实现状态管理，我们也可以使用 "),s("code",[t._v("useMemo")]),t._v(" 创造出派生状态，"),s("code",[t._v("Recoil")]),t._v(" 的 "),s("code",[t._v("useRecoilState")]),t._v(" 以及 "),s("code",[t._v("selector")]),t._v(" 也比较像是对 "),s("code",[t._v("useContext、useMemo")]),t._v(" 的封装。")]),t._v(" "),s("p",[t._v("但是毕竟是 "),s("code",[t._v("Facebook")]),t._v(" 官方推出的状态管理框架，其主打的是高性能以及可以利用 "),s("code",[t._v("React")]),t._v(" 内部的调度机制，包括其承诺即将会支持的并发模式，这一点还是非常值得期待的。")]),t._v(" "),s("p",[t._v("另外，其本身的分散管理原子状态的模式、读写分离、按需渲染、派生缓存等思想还是非常值得一学的")]),t._v(" "),s("p",[t._v("https://juejin.cn/post/6881493149261250568#heading-2")]),t._v(" "),s("h2",{attrs:{id:"rematch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rematch"}},[t._v("#")]),t._v(" Rematch")]),t._v(" "),s("p",[t._v("https://rematchjs.org/docs")]),t._v(" "),s("p",[t._v("rematch是基于redux的状态管理框架，但是比redux简便很多。")]),t._v(" "),s("p",[t._v("rematch是没有boilerplate的Redux最佳实践，没有多余的action type，action creators、switch语句或者chunks")]),t._v(" "),s("p",[t._v("也就是说，rematch移除了redux中所需要的一些东西，并用更简单的方式替代了它们：")]),t._v(" "),s("p",[t._v("声明action类型、action创建函数、thunks、sagas、store配置、mapDispatchToProps")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @rematch/core\n")])])]),s("p",[t._v("rematch中的概念：")]),t._v(" "),s("p",[t._v("状态数据：state")]),t._v(" "),s("p",[t._v("改变state：reducer")]),t._v(" "),s("p",[t._v("异步action：effects with async/await")]),t._v(" "),s("p",[t._v("如何触发reducer和effects：不需编写action type或者action creator，dispatch标准化了action")]),t._v(" "),s("p",[t._v("创建state、model")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { createModel } from '@rematch/core'\n\nexport const count = createModel({\n  state:0,\n  reducer:{\n    upBy:(state,payload) => state + payload\n  },\n  effects:{\n    async asyncGetAppInfo() {\n      await console.log(2);\n    }\n  }\n})\n")])])]),s("p",[t._v("在组件中使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { connect } from 'react-redux'\n\n//Component\n\nconst mapStateToProps = (state) =>({\n  count: state.count\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  countUpBy: dispatch.count.upBy\n})\n\nconnect(mapStateToProps,mapDispatchToProps)(Component)\n")])])]),s("p",[t._v("对比redux中")]),t._v(" "),s("p",[t._v("先创建action type")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("export const COUNT_UP_BY = 'COUNT_UP_BY'\n")])])]),s("p",[t._v("再创建action creator")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_UP_BY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../types/counter'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("countUpBy")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COUNT_UP_BY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  payload"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("创建reducer")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { COUNT_UP_BY } from '../types/counter'\n\nconst initialState = 0\n\nexport default (state = initialState,action) => {\n  switch (action.type){\n    case COUNT_UP_BY:\n      return state + action.paylaod\n    default return state\n  }\n}\n")])])]),s("p",[t._v("在模块中使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { countUpBy } from '../actions/count'\nimport { connect } from 'react-redux'\n\n//Component\n\nconst mapStateToProps = (state) => ({\n  count: state.count\n})\n\nconnect(mapStateToProps,{countUpBy})(Component)\n")])])]),s("p",[t._v("demo地址：https://Xrr2016.github.io/rematch-todoså")]),t._v(" "),s("h3",{attrs:{id:"其他插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他插件"}},[t._v("#")]),t._v(" 其他插件")]),t._v(" "),s("h2",{attrs:{id:"redux-toolkit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redux-toolkit"}},[t._v("#")]),t._v(" redux-toolkit")]),t._v(" "),s("p",[s("strong",[t._v("Redux工具包")]),t._v(" 致力于成为编写 Redux 逻辑的标准方式。它最初是为了帮助解决有关 Redux 的三个常见问题而创建的：")]),t._v(" "),s("ul",[s("li",[t._v('"配置一个 Redux store 过于复杂"')]),t._v(" "),s("li",[t._v('"做任何 Redux 的事情我都需要添加很多包"')]),t._v(" "),s("li",[t._v('"Redux 需要太多的样板代码"')])]),t._v(" "),s("p",[t._v("包括以下api")]),t._v(" "),s("p",[t._v("configureStore(): 包装 createStore 以提供简化的配置选项和良好的默认预设。它可以自动组合你的切片 reducers，添加您提供的任何 Redux 中间件，默认情况下包含 redux-thunk ，并允许使用 Redux DevTools 扩展。")]),t._v(" "),s("p",[t._v("createReducer(): 为 case reducer 函数提供 action 类型的查找表，而不是编写switch语句。此外，它会自动使用immer 库来让您使用普通的可变代码编写更简单的 immutable 更新，例如 state.todos [3] .completed = true 。")]),t._v(" "),s("p",[t._v("createAction(): 为给定的 action type string 生成一个 action creator 函数。函数本身定义了 toString()，因此它可以用来代替 type 常量。")]),t._v(" "),s("p",[t._v("createSlice(): 接受一个 reducer 函数的对象、分片名称和初始状态值，并且自动生成具有相应 action creators 和 action 类型的分片reducer。")]),t._v(" "),s("p",[t._v("createAsyncThunk: 接受一个 action type string 和一个返回 promise 的函数，并生成一个发起基于该 promise 的pending/fulfilled/rejected action 类型的 thunk。")]),t._v(" "),s("p",[t._v("createEntityAdapter: 生成一组可重用的 reducers 和 selectors，以管理存储中的规范化数据\ncreateSelector 组件 来自 Reselect 库，为了易用再导出。")]),t._v(" "),s("h2",{attrs:{id:"react-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-query"}},[t._v("#")]),t._v(" react-query")]),t._v(" "),s("p",[t._v("React Query 无疑是管理服务器状态的最佳库之一。它非常好用，"),s("strong",[t._v("开箱即用，无需配置")]),t._v("，并且可以随着应用的增长而根据自己的喜好"),s("strong",[t._v("进行定制")]),t._v("。")]),t._v(" "),s("p",[t._v("React Query 使您可以击败并征服棘手的服务器状态挑战和障碍，并在开始控制您的应用数据之前对其进行控制。")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i react-query\n")])])]),s("p",[t._v("代码示例")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import {\n  useQuery,\n  useMutation,\n  useQueryClient,\n  QueryClient,\n  QueryClientProvider,\n} from 'react-query'\nimport { getTodos, postTodo } from '../my-api'\n\n// 创建一个 client\nconst queryClient = new QueryClient()\n\nfunction App() {\n  return (\n    // 提供 client 至 App\n    <QueryClientProvider client={queryClient}>\n      <Todos />\n    </QueryClientProvider>\n  )\n}\n\nfunction Todos() {\n  // 访问 client\n  const queryClient = useQueryClient()\n\n  // 查询\n  const query = useQuery('todos', getTodos)\n\n  // 修改\n  const mutation = useMutation(postTodo, {\n    onSuccess: () => {\n      // 错误处理和刷新\n      queryClient.invalidateQueries('todos')\n    },\n  })\n\n  return (\n    <div>\n      <ul>\n        {query.data.map((todo) => (\n          <li key={todo.id}>{todo.title}</li>\n        ))}\n      </ul>\n\n      <button\n        onClick={() => {\n          mutation.mutate({\n            id: Date.now(),\n            title: 'Do Laundry',\n          })\n        }}\n      >\n        Add Todo\n      </button>\n    </div>\n  )\n}\n\nrender(<App />, document.getElementById('root'))\n")])])]),s("h2",{attrs:{id:"rtk-query"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rtk-query"}},[t._v("#")]),t._v(" rtk-query")]),t._v(" "),s("h2",{attrs:{id:"es-lint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#es-lint"}},[t._v("#")]),t._v(" ES-lint")]),t._v(" "),s("p",[t._v("react的代码规范库")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" eslint eslint-plugin-react\n")])])]),s("p",[t._v("如果是typescript项目按照ts相关插件")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @typescript-eslint/eslint-plugin @typescript-eslint/parser\n")])])]),s("p",[t._v("使用yarn eslint --lint向导来完成配置，或者手动创建eslintrc。json填入如下配置")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extends"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint:recommended"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugin:react/recommended"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parser"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@typescript-eslint/parser"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@typescript-eslint"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"react/self-closing-comp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//组件无内容时自闭合")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("在vscode中配置")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint.validate"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"javascript"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"javascriptreact"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typescript"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typescriptreact"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h2",{attrs:{id:"react的ts写法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react的ts写法"}},[t._v("#")]),t._v(" react的Ts写法")]),t._v(" "),s("h3",{attrs:{id:"泛型组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#泛型组件"}},[t._v("#")]),t._v(" 泛型组件")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('//泛型ts组件\nfunction Foo<T>(props: Props<T>){\n  return <div>{props.content}</div>\n}\n\nconst App = () => {\n  return (\n  \t<div className="App">\n      <Foo content={42}></Foo>\n      <Foo<string> content={"hello"}></Foo>\n    </div>\n  )\n}\n        \n//普通ts组件\ninterface Props {\n\tcontent: string;          \n}\n        \nfunction Foo(props: Props) {\n\treturn <div>{props.content}</div>          \n}\n        \nconst App = () => {\n  return (\n  \t<div className="App">\n      // Type number not assignable to type string\n      <Foo content={42}></Foo>\n      <Foo<string> content={"hello"}></Foo>\n    </div>\n  )\n}\n')])])]),s("h2",{attrs:{id:"react库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react库"}},[t._v("#")]),t._v(" react库")]),t._v(" "),s("h3",{attrs:{id:"react-helmet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-helmet"}},[t._v("#")]),t._v(" react-helmet")]),t._v(" "),s("p",[t._v("React Helmet是一个HTML文档head管理工具，管理对文档头的所有修改。React Helmet采用纯HTML标记并输出纯HTML标记，非常简单，对react初学者友好")]),t._v(" "),s("p",[t._v("特点：")]),t._v(" "),s("p",[t._v("支持所有有效的head标签，title、base、meta、link、script、noscript和style")]),t._v(" "),s("p",[t._v("支持body、html和title的属性")]),t._v(" "),s("p",[t._v("支持服务端渲染")]),t._v(" "),s("p",[t._v("嵌套组件覆盖重复的head标签修改")]),t._v(" "),s("p",[t._v("同一组件中定义时将保留重复的head标签修改(比如“apple-touch-icon”)")]),t._v(" "),s("p",[t._v("支持跟踪DOM更改的回调")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i react-helmet\n")])])]),s("p",[t._v("使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import {Helmet} from "react-helmet"\n\nclass Application extends React.Component {\n  render(){\n   return(\n      <div className="application">\n        <Helmet>\n          <meta charSet="utf-8"/>\n          <title>My title</title>\n          <link rel="canonical" href="http://mysite.com/example" />\n        </Helmet>\n        <Child>\n       \t\t\t<Helmet>\n                <title>new Title</title>\n            </Helmet>\n       </Child>\n      </div>\n   )\n  }\n}\n')])])]),s("p",[t._v("上面代码中，后面的helmet会覆盖前面的helmet")]),t._v(" "),s("p",[t._v("服务端渲染时，需要在ReactDOMServer.renderToString或ReadDOMServer.renderToStaticMarkup后调用Helmet.renderStatic()来获得你预渲染的head数据")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ReactDOMServer.renderToString(<Handler />);\nconst helmet = Helmet.renderStatic();\n")])])]),s("h3",{attrs:{id:"二维码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二维码"}},[t._v("#")]),t._v(" 二维码")]),t._v(" "),s("p",[t._v('QR Code数据表示方法 : 深色模块表示二进制"1"，浅色模块表示二进制"0"。')]),t._v(" "),s("p",[t._v("纠错能力:")]),t._v(" "),s("ul",[s("li",[t._v("L级：约可纠错7%的数据码字；")]),t._v(" "),s("li",[t._v("M级：约可纠错15%的数据码字；")]),t._v(" "),s("li",[t._v("Q级：约可纠错25%的数据码字；")]),t._v(" "),s("li",[t._v("H级：约可纠错30%的数据码字；")])]),t._v(" "),s("p",[t._v("使用qrcode.react npm包")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" qrcode.react\n")])])]),s("p",[t._v("api")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("prop")]),t._v(" "),s("th",[t._v("type")]),t._v(" "),s("th",[t._v("default value")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("value")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("renderAs")]),t._v(" "),s("td",[t._v("string ('canvas' 'svg')")]),t._v(" "),s("td",[t._v("'canvas'")])]),t._v(" "),s("tr",[s("td",[t._v("size")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("128")])]),t._v(" "),s("tr",[s("td",[t._v("bgColor")]),t._v(" "),s("td",[t._v("string (CSS color)")]),t._v(" "),s("td",[t._v('"#FFFFFF"')])]),t._v(" "),s("tr",[s("td",[t._v("fgColor")]),t._v(" "),s("td",[t._v("string (CSS color)")]),t._v(" "),s("td",[t._v('"#000000"')])]),t._v(" "),s("tr",[s("td",[t._v("level")]),t._v(" "),s("td",[t._v("string ('L' 'M' 'Q' 'H')")]),t._v(" "),s("td",[t._v("'L'")])]),t._v(" "),s("tr",[s("td",[t._v("includeMargin")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("false")])]),t._v(" "),s("tr",[s("td",[t._v("imageSettings")]),t._v(" "),s("td",[t._v("object (see below)")]),t._v(" "),s("td")])])]),t._v(" "),s("p",[t._v("图片设置参数imageSettings")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("field")]),t._v(" "),s("th",[t._v("type")]),t._v(" "),s("th",[t._v("default value")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("src")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("x")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("none, will center")])]),t._v(" "),s("tr",[s("td",[t._v("y")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("none, will center")])]),t._v(" "),s("tr",[s("td",[t._v("height")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("10% of size")])]),t._v(" "),s("tr",[s("td",[t._v("width")]),t._v(" "),s("td",[t._v("number")]),t._v(" "),s("td",[t._v("10% of size")])]),t._v(" "),s("tr",[s("td",[t._v("excavate")]),t._v(" "),s("td",[t._v("boolean")]),t._v(" "),s("td",[t._v("false")])])])]),t._v(" "),s("p",[t._v("示例代码")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<QRCode\n  id=\"qrCode\"\n  value={\"https://gongyi.m.jd.com/oneDetails.html?id=930\"}\n  imageSettings={{\n    // 中间有图片logo\n    src: `http://img13.360buyimg.com/imagetools/jfs/t1/203384/29/6713/37826/6142ef39E5f79ed2b/47200134bf8d0571.jpg`,\n    height: 30,\n    width: 30,\n    excavate: true,\n  }}\n  size={99} // 二维码的大小\n  fgColor=\"#000000\" // 二维码的颜色\n/>\n//转换为图片\nchangeCanvasToPic = () => {\n    const canvasImg = document.getElementById('qrCode'); // 获取canvas类型的二维码\n    const img = new Image();\n    img.src = canvasImg.toDataURL('image/png'); \n// canvas.toDataUrl() 可以将canvas格式的文件转换成基于base64的指定格式的图片\n// 注意这个api ie9以下不支持    \n    const downLink = document.getElementById('down_link');\n    downLink.href = img.src;\n    downLink.download = '二维码'; //下载图片name\n  };\n//定时刷新\n//定时刷新功能是使用 setInterval 定时更新 value 值来更新二维码，跳转地址后面拼上一个radomCode, radomCode定时更新，就实现二维码的刷新了，需要及时清理定时器。\n")])])]),s("h3",{attrs:{id:"使用antd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用antd"}},[t._v("#")]),t._v(" 使用antd")]),t._v(" "),s("p",[t._v("Ant-Design是蚂蚁金服开发的面向React和Vue的类似于bootstrap的框架，官网链接为：https://ant.design/index-cn")]),t._v(" "),s("p",[t._v("安装包")]),t._v(" "),s("div",{staticClass:"language-node extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install antd --save\ncnpm i antd -S\n")])])]),s("p",[t._v("在App.css文件中导入样式")]),t._v(" "),s("div",{staticClass:"language-node extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("@import '~antd/dist/antd.css';\n")])])]),s("p",[t._v("按需导入包")]),t._v(" "),s("div",{staticClass:"language-node extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import {  } from 'antd';\n\n")])])]),s("p",[t._v("组件")]),t._v(" "),s("p",[t._v("Upload")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\n")])])]),s("h3",{attrs:{id:"graphql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#graphql"}},[t._v("#")]),t._v(" GraphQL")]),t._v(" "),s("p",[t._v("Apollo是基于GraphQL的全栈解决方案集合，包括了apollo-client和apollo-server，从后端到前端提供了对应的lib使得开发GraphQL更加方便")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("apollo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("boost 包含启动阿波罗客户端的所有依赖\nreact"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("apollo 视图层面的集合\ngraph"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("tag 解析查询语句\ngraphql 也是解析查询语句\n")])])]),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import ApolloClient from 'apollo-boost' \n\nconst client = new ApolloClient({\n    uri: 'http://localhost:5000/graphql'\n})\n\nimport { ApolloProvider,Query } from 'react-apollo'\nimport { Mutation,MutationFunc } from 'react-apollo'\n\n")])])]),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install @apollo/client graphql\n")])])]),s("p",[t._v("使用hooks")]),t._v(" "),s("h3",{attrs:{id:"eventbus"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eventbus"}},[t._v("#")]),t._v(" eventbus")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" events\n")])])]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//event.ts")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("EventEmitter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'events'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventEmitter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发布")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" emitter "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./event'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Father")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    emitter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'来自father的info'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Father\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//订阅")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//emitter.addListener()事件监听订阅")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//emitter.removeListener()进行事件销毁，取消订阅")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" emitter "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./event'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Son")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"react-beautiful-dnd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-beautiful-dnd"}},[t._v("#")]),t._v(" react-beautiful-dnd")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import { DragDropContext, Draggable, Droppable } from \'react-beautiful-dnd\'\n\nclass DraggableTags extends Component {\n  render() {\n    return (\n    \t<DragDropContext onDragEnd={this.onDragEnd}>\n      \t<Droppable droppableId="droppable" direction="horizontal">\n          {(provided, _snapshot)=> (\n            <Draggable>\n\t\t\t\t\t\t\t{(provided, _snapshot)=> (\n              \tstyle={\n                  \n                }\n              )}\n            </Draggable>\n          )}\n        </Droppable>\n      </DragDropContext>\n    )\n  }\n}\n')])])]),s("h3",{attrs:{id:"react-dnd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-dnd"}},[t._v("#")]),t._v(" react-dnd")]),t._v(" "),s("p",[t._v("Https://juejin.cn/post/6933036276660731912")]),t._v(" "),s("h3",{attrs:{id:"react-intl-universal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-intl-universal"}},[t._v("#")]),t._v(" react-intl-universal")]),t._v(" "),s("p",[t._v("不建议使用react-intl，而使用React-intl-universal实现")]),t._v(" "),s("p",[t._v("建立英文和中文语言包,可以是json或者js文件")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" en_US "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nihao'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangsan'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'30'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'changelang'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiehuanyuyan'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" en_US\n")])])]),s("p",[t._v("中文包")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" zh_CN "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nihao'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangsan'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'age'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'30'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'changelang'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiehuanyuyan'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" zh_CN\n")])])]),s("p",[t._v("使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import intl from 'react-intl-universal'\nimport cn from '../../assets/locals/zh-CN'\nimport us from '../../assets'\n\nclass IntlExample extends React.Component{\n  constructor(){\n    super();\n    this.locals = {\n      'zh_CN': cn,\n      'en_US': us\n    }\n    this.state = {\n      intl: cn\n    }\n  }\n  \n  componentDidMount() {\n    this.initLocale();\n  }\n  initLocale(locale=\"zh_CN\"){\n    \n  }\n}\n")])])]),s("h3",{attrs:{id:"react-hot-loader"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-hot-loader"}},[t._v("#")]),t._v(" react-hot-loader")]),t._v(" "),s("p",[t._v("React-Hot-Loader 使用了 Webpack HMR API，针对 React 框架实现了对单个 component 的热替换，并且能够保持组件的 state。\nReact-Hot-Loader 在编译时会在每一个 React component 外封装一层，每一个这样的封装都会注册自己的 module.hot.accept 回调，它们会监听每一个 component 的更新，在当前 component 代码更新时只替换自己的模块，而不是整个替换 root component。\n同时，React-Hot-Loader 对 component 的封装还会代理 component 的 state，所以当 component 替换之后依然能够保持之前的 state。")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev react-hot-loader\n")])])]),s("p",[t._v("hot-loader 是基于 webpack-dev-server，所以还得安装 webpack-dev-server")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev webpack-dev-server\n")])])]),s("p",[t._v("首先还是要让 webpack-dev-server 打开。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" webpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" WebpackDevServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-dev-server'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./webpack.config'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebpackDevServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("webpack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  publicPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("publicPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hot"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  historyApiFallback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Listening at http://localhost:3000/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("然后在 webpack 的配置文件里添加 react-hot-loader。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" webpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修改 entry")]),t._v("\n  entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 写在入口文件之前")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack-dev-server/client?http://0.0.0.0:3000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack/hot/only-dev-server"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里是你的入口文件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src/app.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" __dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build/js/bundle.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    publicPath"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/build"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loaders"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.jsx?$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exclude"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在这里添加 react-hot，注意这里使用的是loaders，所以不能用 query，应该把presets参数写在 babel 的后面")]),t._v("\n        loaders"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-hot'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel?presets[]=react,presets[]=es2015'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加插件")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HotModuleReplacementPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h3",{attrs:{id:"uuid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uuid"}},[t._v("#")]),t._v(" uuid")]),t._v(" "),s("p",[t._v("uuid是通用唯一识别码(Universally Unique Identifier)的缩写。是一种软件建构辨准，亦为开发软件基金会组织在分布式计算环境领域的一部分。其目的是让分布式系统中的所有元素具有唯一的辨识信息，而不需要通过中央控制端来做辨识信息的指定。")]),t._v(" "),s("p",[t._v("UUID由一组32位数的16进制数字构成。对于UUID，就算每纳秒产生一百万个UUID，要花100亿年才会将所有UUID用完。")]),t._v(" "),s("p",[t._v("格式")]),t._v(" "),s("p",[t._v("uuid32个16进制数字用连字号分成五组来显示，所以共有36个字符")]),t._v(" "),s("p",[t._v("UUID版本通过M表示，当前规范有5个版本，可选值为1、2、3、4、5，这5个版本使用不同的算法，利用不同的信息产生UUID，各版本有各版本的优势，具体来说：")]),t._v(" "),s("p",[t._v("uuid.v1()：创建版本1(时间戳)UUID")]),t._v(" "),s("p",[t._v("uuid.v3()：创建版本3(md5命名空间)UUID")]),t._v(" "),s("p",[t._v("uuid.v4()：创建版本4(随机)UUID")]),t._v(" "),s("p",[t._v("uuid.v5()：创建版本5(带SHA-1的命名空间)IIOD")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" uuid \n")])])]),s("p",[t._v("使用")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" v4 "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" uuidv4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuidv4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("可以使用uuid进行验证登陆,未登陆状态下生产uuid")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" uuid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("uuid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" uuid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("uuid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    sessionStorage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setItem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuidv4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"react-virtualized"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-virtualized"}},[t._v("#")]),t._v(" react-virtualized")]),t._v(" "),s("p",[t._v("使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import {AutoSizer, List, CellMeasurerCache, CellMeasurer} from 'react-virtualized'\n\n// 宽度固定\nconst measureCache = new CellMeasurerCache({\n    fixedWidth: true,\n    minHeight: 60, \n})\n\n// 每一行内容\nconst rowRenderer = ({ index, key, parent, style }) => {\n    const item = records[index]\n\n    return (\n        <CellMeasurer cache={measureCache} key={key} parent={parent} rowIndex={index}>\n            <div style={style}>\n                content\n            </div>\n        </CellMeasurer>\n    )\n}\n\n<AutoSizer>\n    {({width, height}) => (\n        <List\n            width={width}\n            height={height}\n            deferredMeasurementCache={measureCache}\n            rowCount={records.length}\n            rowHeight={measureCache.rowHeight}\n            rowRenderer={rowRenderer}\n            className={styles.list}\n        />\n    )}\n</AutoSizer>\n")])])]),s("p",[t._v("无限滚动 + 可编辑表格")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import {Table, Column} from \'react-virtualized\'\nimport {Input, Empty} from \'antd\'\n\n// 防止Input组件不必要的渲染\nconst MemoInput = React.memo(function (props) {\n    const {rowIndex, field, handleFieldChange, ...restProps} = props\n    return <Input {... restProps} onChange={(e) => handleFieldChange(field, e, rowIndex)} />\n})\n\nfunction VirtualTable(props) {\n    // ...\n\n    // 列, 使用useCallback优化\n    const nameColumn = ({cellData, rowIndex, dataKey }) => {\n        // ...\n        return (\n            <div>\n                <MemoInput\n                    placeholder="请输入姓名"\n                    value={cellData}\n                    rowIndex={rowIndex}\n                    field="姓名"\n                    handleFieldChange={handleFieldChange}\n                />\n            </div>\n        )\n    }\n    \n    // 表头\n    const columnHeaderRenderer = useCallback(({dataKey}) => dataKey, [])\n\n    const rowGetter = useCallback(({index}) => dataSource[index], [dataSource])\n\n    const noRowsRenderer = useCallback(() => <Empty className={styles.empty} />, [])\n\n    return <Table\n        ref={tableRef}\n        className={styles.virtualTable}\n        headerClassName={styles.header}\n        rowClassName={styles.row}\n        headerHeight={TableHeaderHeight}\n        width={TableWidth}\n        height={TableHeight}\n        noRowsRenderer={noRowsRenderer}\n        rowHeight={TableRowHeight}\n        rowGetter={rowGetter}\n        rowCount={dataSource.length}\n        overscanRowCount={OverscanRowCount}\n    >\n        <Column\n            width={120}\n            dataKey="姓名"\n            headerRenderer={columnHeaderRenderer}\n            cellRenderer={nameColumn}\n        />\n    </Table>\n}\n')])])]),s("h3",{attrs:{id:"react-window"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-window"}},[t._v("#")]),t._v(" react-window")]),t._v(" "),s("p",[t._v("react虚拟列表库\nReact Window是一个有效呈现大型列表和表格数据的组件，是React-virtualized的完全重写。")]),t._v(" "),s("p",[t._v("React Window专注于使软件包更小，更快，同时API（和文档）对初学者尽可能友好。")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i react-window\n")])])]),s("p",[t._v("固定高度列表")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { FixedSizeList as List } from 'react-window';\n\nconst Row = ({ index, style }) => (\n  <div style={style}>Row {index}</div>\n);\n\nconst Example = () => (\n  <List\n    height={150}\n    itemCount={1000}\n    itemSize={35}\n    width={300}\n  >\n    {Row}\n  </List>\n);\n")])])]),s("p",[t._v("VariableSizeList （可变尺寸列表）")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { VariableSizeList } from 'react-window';\n \nconst rowHeights = new Array(1000)\n  .fill(true)\n  .map(() => 25 + Math.round(Math.random() * 50));\n \nconst getItemSize = index => rowHeights[index]; // 此处采用随机数作为每个列表项的高度\n /** \n    * 每个列表项的组件\n    * @param index：列表项的下标；style：列表项的样式（此参数必须传入列表项的组件中，否则会出现滚动到下方出现空白的情况）\n    **/ \nconst Row = ({ index, style }) => (\n  <div style={style}>Row {index}</div>\n);\n \nconst Example = () => (\n  <VariableSizeList\n    height={150} // 列表可视区域的高度\n    itemCount={1000} // 列表数据长度\n    itemSize={getItemSize} // 设置列表项的高度\n    layout= \"vertical\" // （vertical/horizontal） 默认为vertical，此为设置列表的方向\n    width={300}\n  >\n    {Row}\n  <VariableSizeList>\n);\n")])])]),s("p",[t._v("结合react-virtualized-auto-sizer使列表自适应当前页面的宽高")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('import { FixedSizeList } from "react-window";\nimport AutoSizer from "react-virtualized-auto-sizer";\nconst Example = () => (\n  <AutoSizer>\n    {({ height, width }) => (\n      <FixedSizeList\n        className="List"\n        height={height}\n        itemCount={1000}\n        itemSize={35}\n        width={width}\n      >\n        {Row}\n      </FixedSizeList>\n    )}\n  </AutoSizer>\n);\n')])])]),s("h3",{attrs:{id:"react-sticky"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-sticky"}},[t._v("#")]),t._v(" react-sticky")]),t._v(" "),s("p",[t._v("让组件实现类似position-sticky的效果")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" react-sticky\n")])])]),s("p",[t._v("使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React from 'react';\nimport { StickyContainer, Sticky } from 'react-sticky';\n\nclass App extends React.Component {\n  render() {\n    return (\n      <StickyContainer>\n        {/* Other elements can be in between `StickyContainer` and `Sticky`,\n        but certain styles can break the positioning logic used. */}\n        <Sticky>\n          {({\n            style,\n \n            // the following are also available but unused in this example\n            isSticky,\n            wasSticky,\n            distanceFromTop,\n            distanceFromBottom,\n            calculatedHeight\n          }) => (\n            <header style={style}>\n              {/* ... */}\n            </header>\n          )}\n        </Sticky>\n        {/* ... */}\n      </StickyContainer>\n    );\n  },\n}\n")])])]),s("p",[t._v("sticky上可以添加不同的属性")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("<StickyContainer>\n  ...\n  <Sticky topOffset={80} bottomOffset={80} disableCompensation>\n    { props => (...) }\n  </Sticky>\n  ...\n</StickyContainer>\n")])])]),s("h3",{attrs:{id:"js-cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-cookie"}},[t._v("#")]),t._v(" js-cookie")]),t._v(" "),s("p",[t._v("cookie插件")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" js-cookie --save\n")])])]),s("p",[t._v("引用")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Cookies "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js-cookie'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置cookie")]),t._v("\nCookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("expire"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//7天过期")]),t._v("\nCookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置一个json")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取cookie")]),t._v("\nCookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取cookie")]),t._v("\nCookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//读取所有cookie")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//删除cookie")]),t._v("\nCookies"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//删除cookie")]),t._v("\n")])])]),s("h3",{attrs:{id:"react-color"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-color"}},[t._v("#")]),t._v(" react-color")]),t._v(" "),s("p",[t._v("react-color是一个拾色器，通过它获取颜色值")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i react-color -S\n")])])]),s("p",[t._v("使用")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { TwitterPicker } from 'react-dom'\n\nfunction () {\n  render() {\n    <TwitterPicker \n      width=\"240px\"\n      \n      />\n  }\n}\n")])])]),s("h3",{attrs:{id:"react-lazyload"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-lazyload"}},[t._v("#")]),t._v(" react-lazyload")]),t._v(" "),s("p",[t._v("安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save react-lazyload\n")])])]),s("p",[t._v("懒加载图片")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import React from 'react';\nimport ReactDOM from 'react-dom';\nimport LazyLoad from 'react-lazyload';\nimport MyComponent from './MyComponent';\n\nconst App = () => {\n  return (\n    <div className=\"list\">\n      <LazyLoad height={200}>\n        <img src=\"tiger.jpg\" /> /*\n                                  Lazy loading images is supported out of box,\n                                  no extra config needed, set `height` for better\n                                  experience\n                                 */\n      </LazyLoad>\n      <LazyLoad height={200} once >\n                                /* Once this component is loaded, LazyLoad will\n                                 not care about it anymore, set this to `true`\n                                 if you're concerned about improving performance */\n        <MyComponent />\n      </LazyLoad>\n      <LazyLoad height={200} offset={100}>\n                              /* This component will be loaded when it's top\n                                 edge is 100px from viewport. It's useful to\n                                 make user ignorant about lazy load effect. */\n        <MyComponent />\n      </LazyLoad>\n      <LazyLoad>\n        <MyComponent />\n      </LazyLoad>\n    </div>\n  );\n};\n\nReactDOM.render(<App />, document.body);\n")])])]),s("p",[t._v("默认懒加载组件")]),t._v(" "),s("div",{staticClass:"language-react extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("import { lazyload } from 'react-lazyload';\n\n@lazyload({\n  height: 200,\n  once: true,\n  offset: 100\n})\nclass MyComponent extends React.Component {\n  render() {\n    return <div>this component is lazyloaded by default!</div>;\n  }\n}\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);