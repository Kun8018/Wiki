(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{326:function(t,a,n){"use strict";n.r(a);var s=n(14),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("é«˜æ€§èƒ½å¼€å‘")]),t._v(" "),n("h2",{attrs:{id:"å¹¶å‘ç¼–ç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘ç¼–ç¨‹"}},[t._v("#")]),t._v(" å¹¶å‘ç¼–ç¨‹")]),t._v(" "),n("h3",{attrs:{id:"ä¸Šä¸‹æ–‡context"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸Šä¸‹æ–‡context"}},[t._v("#")]),t._v(" ä¸Šä¸‹æ–‡Context")]),t._v(" "),n("p",[t._v("ä¸Šä¸‹æ–‡ "),n("a",{attrs:{href:"https://draveness.me/golang/tree/context.Context",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("context.Context")]),n("OutboundLink")],1),t._v(" Go è¯­è¨€ä¸­ç”¨æ¥è®¾ç½®æˆªæ­¢æ—¥æœŸã€åŒæ­¥ä¿¡å·ï¼Œä¼ é€’è¯·æ±‚ç›¸å…³å€¼çš„ç»“æ„ä½“ã€‚ä¸Šä¸‹æ–‡ä¸ Goroutine æœ‰æ¯”è¾ƒå¯†åˆ‡çš„å…³ç³»ï¼Œæ˜¯ Go è¯­è¨€ä¸­ç‹¬ç‰¹çš„è®¾è®¡ï¼Œåœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­æˆ‘ä»¬å¾ˆå°‘è§åˆ°ç±»ä¼¼çš„æ¦‚å¿µ")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://draveness.me/golang/tree/context.Context",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("context.Context")]),n("OutboundLink")],1),t._v(" æ˜¯ Go è¯­è¨€åœ¨ 1.7 ç‰ˆæœ¬ä¸­å¼•å…¥æ ‡å‡†åº“çš„æ¥å£ "),n("a",{attrs:{href:"https://draveness.me/golang/docs/part3-runtime/ch06-concurrency/golang-context/#fn:1",target:"_blank",rel:"noopener noreferrer"}},[t._v("1"),n("OutboundLink")],1),t._v("ï¼Œè¯¥æ¥å£å®šä¹‰äº†å››ä¸ªéœ€è¦å®ç°çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("Deadline")]),t._v(" â€” è¿”å› "),n("a",{attrs:{href:"https://draveness.me/golang/tree/context.Context",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("context.Context")]),n("OutboundLink")],1),t._v(" è¢«å–æ¶ˆçš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯å®Œæˆå·¥ä½œçš„æˆªæ­¢æ—¥æœŸï¼›")]),t._v(" "),n("li",[n("code",[t._v("Done")]),t._v(" â€” è¿”å›ä¸€ä¸ª Channelï¼Œè¿™ä¸ª Channel ä¼šåœ¨å½“å‰å·¥ä½œå®Œæˆæˆ–è€…ä¸Šä¸‹æ–‡è¢«å–æ¶ˆåå…³é—­ï¼Œå¤šæ¬¡è°ƒç”¨ "),n("code",[t._v("Done")]),t._v(" æ–¹æ³•ä¼šè¿”å›åŒä¸€ä¸ª Channelï¼›")]),t._v(" "),n("li",[n("code",[t._v("Err")]),t._v("â€” è¿”å›"),n("code",[t._v("context.Context")]),t._v("ç»“æŸçš„åŸå› ï¼Œå®ƒåªä¼šåœ¨"),n("code",[t._v("Done")]),t._v("æ–¹æ³•å¯¹åº”çš„ Channel å…³é—­æ—¶è¿”å›éç©ºçš„å€¼ï¼›\n"),n("ol",[n("li",[t._v("å¦‚æœ "),n("a",{attrs:{href:"https://draveness.me/golang/tree/context.Context",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("context.Context")]),n("OutboundLink")],1),t._v(" è¢«å–æ¶ˆï¼Œä¼šè¿”å› "),n("code",[t._v("Canceled")]),t._v(" é”™è¯¯ï¼›")]),t._v(" "),n("li",[t._v("å¦‚æœ "),n("a",{attrs:{href:"https://draveness.me/golang/tree/context.Context",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("context.Context")]),n("OutboundLink")],1),t._v(" è¶…æ—¶ï¼Œä¼šè¿”å› "),n("code",[t._v("DeadlineExceeded")]),t._v(" é”™è¯¯ï¼›")])])]),t._v(" "),n("li",[n("code",[t._v("Value")]),t._v(" â€” ä» "),n("a",{attrs:{href:"https://draveness.me/golang/tree/context.Context",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("context.Context")]),n("OutboundLink")],1),t._v(" ä¸­è·å–é”®å¯¹åº”çš„å€¼ï¼Œå¯¹äºåŒä¸€ä¸ªä¸Šä¸‹æ–‡æ¥è¯´ï¼Œå¤šæ¬¡è°ƒç”¨ "),n("code",[t._v("Value")]),t._v(" å¹¶ä¼ å…¥ç›¸åŒçš„ "),n("code",[t._v("Key")]),t._v(" ä¼šè¿”å›ç›¸åŒçš„ç»“æœï¼Œè¯¥æ–¹æ³•å¯ä»¥ç”¨æ¥ä¼ é€’è¯·æ±‚ç‰¹å®šçš„æ•°æ®ï¼›")])]),t._v(" "),n("h3",{attrs:{id:"åç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åç¨‹"}},[t._v("#")]),t._v(" åç¨‹")]),t._v(" "),n("p",[t._v("ä¸€ä¸ªåº”ç”¨ç¨‹åºæ˜¯è¿è¡Œåœ¨æœºå™¨ä¸Šçš„ä¸€ä¸ªè¿›ç¨‹ï¼›è¿›ç¨‹æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨è‡ªå·±å†…å­˜åœ°å€ç©ºé—´é‡Œçš„ç‹¬ç«‹æ‰§è¡Œä½“ã€‚ä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹ç»„æˆï¼Œè¿™äº›çº¿ç¨‹å…¶å®æ˜¯å…±äº«åŒä¸€ä¸ªå†…å­˜åœ°å€ç©ºé—´çš„ä¸€èµ·å·¥ä½œçš„æ‰§è¡Œä½“ã€‚å‡ ä¹æ‰€æœ‰'æ­£å¼'çš„ç¨‹åºéƒ½æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä»¥ä¾¿è®©ç”¨æˆ·æˆ–è®¡ç®—æœºä¸å¿…ç­‰å¾…ï¼Œæˆ–è€…èƒ½å¤ŸåŒæ—¶æœåŠ¡å¤šä¸ªè¯·æ±‚ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰ï¼Œæˆ–å¢åŠ æ€§èƒ½å’Œååé‡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å¯¹ä¸åŒçš„æ•°æ®é›†å¹¶è¡Œæ‰§è¡Œä»£ç ï¼‰ã€‚ä¸€ä¸ªå¹¶å‘ç¨‹åºå¯ä»¥åœ¨ä¸€ä¸ªå¤„ç†å™¨æˆ–è€…å†…æ ¸ä¸Šä½¿ç”¨å¤šä¸ªçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä½†æ˜¯åªæœ‰åŒä¸€ä¸ªç¨‹åºåœ¨æŸä¸ªæ—¶é—´ç‚¹åŒæ—¶è¿è¡Œåœ¨å¤šæ ¸æˆ–è€…å¤šå¤„ç†å™¨ä¸Šæ‰æ˜¯çœŸæ­£çš„å¹¶è¡Œã€‚")]),t._v(" "),n("p",[t._v("å¹¶è¡Œæ˜¯ä¸€ç§é€šè¿‡ä½¿ç”¨å¤šå¤„ç†å™¨ä»¥æé«˜é€Ÿåº¦çš„èƒ½åŠ›ã€‚æ‰€ä»¥å¹¶å‘ç¨‹åºå¯ä»¥æ˜¯å¹¶è¡Œçš„ï¼Œä¹Ÿå¯ä»¥ä¸æ˜¯ã€‚")]),t._v(" "),n("p",[t._v("å…¬è®¤çš„ï¼Œä½¿ç”¨å¤šçº¿ç¨‹çš„åº”ç”¨éš¾ä»¥åšåˆ°å‡†ç¡®ï¼Œæœ€ä¸»è¦çš„é—®é¢˜æ˜¯å†…å­˜ä¸­çš„æ•°æ®å…±äº«ï¼Œå®ƒä»¬ä¼šè¢«å¤šçº¿ç¨‹ä»¥æ— æ³•é¢„çŸ¥çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼Œå¯¼è‡´ä¸€äº›æ— æ³•é‡ç°æˆ–è€…éšæœºçš„ç»“æœï¼ˆç§°ä½œ "),n("code",[t._v("ç«æ€")]),t._v("ï¼‰ã€‚")]),t._v(" "),n("p",[n("strong",[t._v("ä¸è¦ä½¿ç”¨å…¨å±€å˜é‡æˆ–è€…å…±äº«å†…å­˜ï¼Œå®ƒä»¬ä¼šç»™ä½ çš„ä»£ç åœ¨å¹¶å‘è¿ç®—çš„æ—¶å€™å¸¦æ¥å±é™©ã€‚")])]),t._v(" "),n("p",[t._v("è§£å†³ä¹‹é“åœ¨äºåŒæ­¥ä¸åŒçš„çº¿ç¨‹ï¼Œå¯¹æ•°æ®åŠ é”ï¼Œè¿™æ ·åŒæ—¶å°±åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å˜æ›´æ•°æ®ã€‚åœ¨ Go çš„æ ‡å‡†åº“ "),n("code",[t._v("sync")]),t._v(" ä¸­æœ‰ä¸€äº›å·¥å…·ç”¨æ¥åœ¨ä½çº§åˆ«çš„ä»£ç ä¸­å®ç°åŠ é”ï¼›æˆ‘ä»¬åœ¨ç¬¬ "),n("a",{attrs:{href:"https://github.com/unknwon/the-way-to-go_ZH_CN/blob/master/eBook/09.3.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("9.3"),n("OutboundLink")],1),t._v(" èŠ‚ä¸­è®¨è®ºè¿‡è¿™ä¸ªé—®é¢˜ã€‚ä¸è¿‡è¿‡å»çš„è½¯ä»¶å¼€å‘ç»éªŒå‘Šè¯‰æˆ‘ä»¬è¿™ä¼šå¸¦æ¥æ›´é«˜çš„å¤æ‚åº¦ï¼Œæ›´å®¹æ˜“ä½¿ä»£ç å‡ºé”™ä»¥åŠæ›´ä½çš„æ€§èƒ½ï¼Œæ‰€ä»¥è¿™ä¸ªç»å…¸çš„æ–¹æ³•æ˜æ˜¾ä¸å†é€‚åˆç°ä»£å¤šæ ¸/å¤šå¤„ç†å™¨ç¼–ç¨‹ï¼š"),n("code",[t._v("thread-per-connection")]),t._v(" æ¨¡å‹ä¸å¤Ÿæœ‰æ•ˆã€‚")]),t._v(" "),n("p",[t._v("Go æ›´å€¾å‘äºå…¶ä»–çš„æ–¹å¼ï¼Œåœ¨è¯¸å¤šæ¯”è¾ƒåˆé€‚çš„èŒƒå¼ä¸­ï¼Œæœ‰ä¸ªè¢«ç§°ä½œ "),n("code",[t._v("Communicating Sequential Processesï¼ˆé¡ºåºé€šä¿¡å¤„ç†ï¼‰")]),t._v("ï¼ˆCSP, C. Hoare å‘æ˜çš„ï¼‰è¿˜æœ‰ä¸€ä¸ªå«åš "),n("code",[t._v("message passing-modelï¼ˆæ¶ˆæ¯ä¼ é€’ï¼‰")])]),t._v(" "),n("p",[t._v("åœ¨ Go ä¸­ï¼Œåº”ç”¨ç¨‹åºå¹¶å‘å¤„ç†çš„éƒ¨åˆ†è¢«ç§°ä½œ "),n("code",[t._v("goroutinesï¼ˆåç¨‹ï¼‰")]),t._v("ï¼Œå®ƒå¯ä»¥è¿›è¡Œæ›´æœ‰æ•ˆçš„å¹¶å‘è¿ç®—ã€‚åœ¨åç¨‹å’Œæ“ä½œç³»ç»Ÿçº¿ç¨‹ä¹‹é—´å¹¶æ— ä¸€å¯¹ä¸€çš„å…³ç³»ï¼šåç¨‹æ˜¯æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹çš„å¯ç”¨æ€§ï¼Œæ˜ å°„ï¼ˆå¤šè·¯å¤ç”¨ï¼Œæ‰§è¡Œäºï¼‰åœ¨ä»–ä»¬ä¹‹ä¸Šçš„ï¼›åç¨‹è°ƒåº¦å™¨åœ¨ Go è¿è¡Œæ—¶å¾ˆå¥½çš„å®Œæˆäº†è¿™ä¸ªå·¥ä½œã€‚")]),t._v(" "),n("p",[t._v("åç¨‹å·¥ä½œåœ¨ç›¸åŒçš„åœ°å€ç©ºé—´ä¸­ï¼Œæ‰€ä»¥å…±äº«å†…å­˜çš„æ–¹å¼ä¸€å®šæ˜¯åŒæ­¥çš„ï¼›è¿™ä¸ªå¯ä»¥ä½¿ç”¨ "),n("code",[t._v("sync")]),t._v(" åŒ…æ¥å®ç°ï¼ˆå‚è§ç¬¬ "),n("a",{attrs:{href:"https://github.com/unknwon/the-way-to-go_ZH_CN/blob/master/eBook/09.3.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("9.3"),n("OutboundLink")],1),t._v(" èŠ‚ï¼‰ï¼Œä¸è¿‡æˆ‘ä»¬å¾ˆä¸é¼“åŠ±è¿™æ ·åšï¼šGo ä½¿ç”¨ "),n("code",[t._v("channels")]),t._v(" æ¥åŒæ­¥åç¨‹")]),t._v(" "),n("p",[t._v("å½“ç³»ç»Ÿè°ƒç”¨ï¼ˆæ¯”å¦‚ç­‰å¾… I/Oï¼‰é˜»å¡åç¨‹æ—¶ï¼Œå…¶ä»–åç¨‹ä¼šç»§ç»­åœ¨å…¶ä»–çº¿ç¨‹ä¸Šå·¥ä½œã€‚åç¨‹çš„è®¾è®¡éšè—äº†è®¸å¤šçº¿ç¨‹åˆ›å»ºå’Œç®¡ç†æ–¹é¢çš„å¤æ‚å·¥ä½œã€‚")]),t._v(" "),n("p",[t._v("åç¨‹æ˜¯è½»é‡çš„ï¼Œæ¯”çº¿ç¨‹æ›´è½»ã€‚å®ƒä»¬ç—•è¿¹éå¸¸ä¸æ˜æ˜¾ï¼ˆä½¿ç”¨å°‘é‡çš„å†…å­˜å’Œèµ„æºï¼‰ï¼šä½¿ç”¨ 4K çš„æ ˆå†…å­˜å°±å¯ä»¥åœ¨å †ä¸­åˆ›å»ºå®ƒä»¬ã€‚å› ä¸ºåˆ›å»ºéå¸¸å»‰ä»·ï¼Œå¿…è¦çš„æ—¶å€™å¯ä»¥è½»æ¾åˆ›å»ºå¹¶è¿è¡Œå¤§é‡çš„åç¨‹ï¼ˆåœ¨åŒä¸€ä¸ªåœ°å€ç©ºé—´ä¸­ 100,000 ä¸ªè¿ç»­çš„åç¨‹ï¼‰ã€‚å¹¶ä¸”å®ƒä»¬å¯¹æ ˆè¿›è¡Œäº†åˆ†å‰²ï¼Œä»è€ŒåŠ¨æ€çš„å¢åŠ ï¼ˆæˆ–ç¼©å‡ï¼‰å†…å­˜çš„ä½¿ç”¨ï¼›æ ˆçš„ç®¡ç†æ˜¯è‡ªåŠ¨çš„ï¼Œä½†ä¸æ˜¯ç”±åƒåœ¾å›æ”¶å™¨ç®¡ç†çš„ï¼Œè€Œæ˜¯åœ¨åç¨‹é€€å‡ºåè‡ªåŠ¨é‡Šæ”¾ã€‚")]),t._v(" "),n("p",[t._v("åç¨‹å¯ä»¥è¿è¡Œåœ¨å¤šä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹ä¹‹é—´ï¼Œä¹Ÿå¯ä»¥è¿è¡Œåœ¨çº¿ç¨‹ä¹‹å†…ï¼Œè®©ä½ å¯ä»¥å¾ˆå°çš„å†…å­˜å ç”¨å°±å¯ä»¥å¤„ç†å¤§é‡çš„ä»»åŠ¡ã€‚ç”±äºæ“ä½œç³»ç»Ÿçº¿ç¨‹ä¸Šçš„åç¨‹æ—¶é—´ç‰‡ï¼Œä½ å¯ä»¥ä½¿ç”¨å°‘é‡çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹å°±èƒ½æ‹¥æœ‰ä»»æ„å¤šä¸ªæä¾›æœåŠ¡çš„åç¨‹ï¼Œè€Œä¸” Go è¿è¡Œæ—¶å¯ä»¥èªæ˜çš„æ„è¯†åˆ°å“ªäº›åç¨‹è¢«é˜»å¡äº†ï¼Œæš‚æ—¶æç½®å®ƒä»¬å¹¶å¤„ç†å…¶ä»–åç¨‹ã€‚")]),t._v(" "),n("p",[t._v("å­˜åœ¨ä¸¤ç§å¹¶å‘æ–¹å¼ï¼šç¡®å®šæ€§çš„ï¼ˆæ˜ç¡®å®šä¹‰æ’åºï¼‰å’Œéç¡®å®šæ€§çš„ï¼ˆåŠ é”/äº’æ–¥ä»è€Œæœªå®šä¹‰æ’åºï¼‰ã€‚Go çš„åç¨‹å’Œé€šé“ç†æ‰€å½“ç„¶çš„æ”¯æŒç¡®å®šæ€§çš„å¹¶å‘æ–¹å¼ï¼ˆä¾‹å¦‚é€šé“å…·æœ‰ä¸€ä¸ª sender å’Œä¸€ä¸ª receiverï¼‰")]),t._v(" "),n("p",[t._v("åç¨‹æ˜¯é€šè¿‡ä½¿ç”¨å…³é”®å­— "),n("code",[t._v("go")]),t._v(" è°ƒç”¨ï¼ˆæ‰§è¡Œï¼‰ä¸€ä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•æ¥å®ç°çš„ï¼ˆä¹Ÿå¯ä»¥æ˜¯åŒ¿åæˆ–è€… lambda å‡½æ•°ï¼‰ã€‚è¿™æ ·ä¼šåœ¨å½“å‰çš„è®¡ç®—è¿‡ç¨‹ä¸­å¼€å§‹ä¸€ä¸ªåŒæ—¶è¿›è¡Œçš„å‡½æ•°ï¼Œåœ¨ç›¸åŒçš„åœ°å€ç©ºé—´ä¸­å¹¶ä¸”åˆ†é…äº†ç‹¬ç«‹çš„æ ˆï¼Œæ¯”å¦‚ï¼š"),n("code",[t._v("go sum(bigArray)")]),t._v("ï¼Œåœ¨åå°è®¡ç®—æ€»å’Œã€‚")]),t._v(" "),n("p",[t._v("åç¨‹çš„æ ˆä¼šæ ¹æ®éœ€è¦è¿›è¡Œä¼¸ç¼©ï¼Œä¸å‡ºç°æ ˆæº¢å‡ºï¼›å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒæ ˆçš„å¤§å°ã€‚å½“åç¨‹ç»“æŸçš„æ—¶å€™ï¼Œå®ƒä¼šé™é»˜é€€å‡ºï¼šç”¨æ¥å¯åŠ¨è¿™ä¸ªåç¨‹çš„å‡½æ•°ä¸ä¼šå¾—åˆ°ä»»ä½•çš„è¿”å›å€¼ã€‚")]),t._v(" "),n("p",[t._v("ä»»ä½• Go ç¨‹åºéƒ½å¿…é¡»æœ‰çš„ "),n("code",[t._v("main()")]),t._v(" å‡½æ•°ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªåç¨‹ï¼Œå°½ç®¡å®ƒå¹¶æ²¡æœ‰é€šè¿‡ "),n("code",[t._v("go")]),t._v(" æ¥å¯åŠ¨ã€‚åç¨‹å¯ä»¥åœ¨ç¨‹åºåˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­è¿è¡Œï¼ˆåœ¨ "),n("code",[t._v("init()")]),t._v(" å‡½æ•°ä¸­ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("åœ¨ä¸€ä¸ªåç¨‹ä¸­ï¼Œæ¯”å¦‚å®ƒéœ€è¦è¿›è¡Œéå¸¸å¯†é›†çš„è¿ç®—ï¼Œä½ å¯ä»¥åœ¨è¿ç®—å¾ªç¯ä¸­å‘¨æœŸçš„ä½¿ç”¨ "),n("code",[t._v("runtime.Gosched()")]),t._v("ï¼šè¿™ä¼šè®©å‡ºå¤„ç†å™¨ï¼Œå…è®¸è¿è¡Œå…¶ä»–åç¨‹ï¼›å®ƒå¹¶ä¸ä¼šä½¿å½“å‰åç¨‹æŒ‚èµ·ï¼Œæ‰€ä»¥å®ƒä¼šè‡ªåŠ¨æ¢å¤æ‰§è¡Œã€‚ä½¿ç”¨ "),n("code",[t._v("Gosched()")]),t._v(" å¯ä»¥ä½¿è®¡ç®—å‡åŒ€åˆ†å¸ƒï¼Œä½¿é€šä¿¡ä¸è‡³äºè¿Ÿè¿Ÿå¾—ä¸åˆ°å“åº”ã€‚")]),t._v(" "),n("h3",{attrs:{id:"è°ƒåº¦å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒåº¦å™¨"}},[t._v("#")]),t._v(" è°ƒåº¦å™¨")]),t._v(" "),n("p",[t._v("Go è¯­è¨€åœ¨å¹¶å‘ç¼–ç¨‹æ–¹é¢æœ‰å¼ºå¤§çš„èƒ½åŠ›ï¼Œè¿™ç¦»ä¸å¼€è¯­è¨€å±‚é¢å¯¹å¹¶å‘ç¼–ç¨‹çš„æ”¯æŒã€‚")]),t._v(" "),n("p",[t._v("å¤šä¸ªçº¿ç¨‹å¯ä»¥å±äºåŒä¸€ä¸ªè¿›ç¨‹å¹¶å…±äº«å†…å­˜ç©ºé—´ã€‚å› ä¸ºå¤šçº¿ç¨‹ä¸éœ€è¦åˆ›å»ºæ–°çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿä¸éœ€è¦å†…å­˜ç®¡ç†å•å…ƒå¤„ç†ä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ä¹Ÿæ­£æ˜¯åŸºäºå…±äº«çš„å†…å­˜è¿›è¡Œçš„ï¼Œä¸é‡é‡çº§çš„è¿›ç¨‹ç›¸æ¯”ï¼Œçº¿ç¨‹æ˜¾å¾—æ¯”è¾ƒè½»é‡ã€‚")]),t._v(" "),n("p",[t._v("è™½ç„¶çº¿ç¨‹æ¯”è¾ƒè½»é‡ï¼Œä½†æ˜¯åœ¨è°ƒåº¦æ—¶ä¹Ÿæœ‰æ¯”è¾ƒå¤§çš„é¢å¤–å¼€é”€ã€‚æ¯ä¸ªçº¿ç¨‹ä¼šéƒ½å ç”¨ 1 å…†ä»¥ä¸Šçš„å†…å­˜ç©ºé—´ï¼Œåœ¨å¯¹çº¿ç¨‹è¿›è¡Œåˆ‡æ¢æ—¶ä¸æ­¢ä¼šæ¶ˆè€—è¾ƒå¤šçš„å†…å­˜ï¼Œæ¢å¤å¯„å­˜å™¨ä¸­çš„å†…å®¹è¿˜éœ€è¦å‘æ“ä½œç³»ç»Ÿç”³è¯·æˆ–è€…é”€æ¯å¯¹åº”çš„èµ„æºï¼Œæ¯ä¸€æ¬¡çº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢éƒ½éœ€è¦æ¶ˆè€— ~1us å·¦å³çš„æ—¶é—´"),n("a",{attrs:{href:"https://draveness.me/golang/docs/part3-runtime/ch06-concurrency/golang-goroutine/#fn:1",target:"_blank",rel:"noopener noreferrer"}},[t._v("1"),n("OutboundLink")],1),t._v("ï¼Œä½†æ˜¯ Go è°ƒåº¦å™¨å¯¹ Goroutine çš„ä¸Šä¸‹æ–‡åˆ‡æ¢çº¦ä¸º ~0.2usï¼Œå‡å°‘äº† 80% çš„é¢å¤–å¼€é”€")]),t._v(" "),n("ol",[n("li",[t._v("G â€” è¡¨ç¤º Goroutineï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼›")]),t._v(" "),n("li",[t._v("M â€” è¡¨ç¤ºæ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼Œå®ƒç”±æ“ä½œç³»ç»Ÿçš„è°ƒåº¦å™¨è°ƒåº¦å’Œç®¡ç†ï¼›")]),t._v(" "),n("li",[t._v("P â€” è¡¨ç¤ºå¤„ç†å™¨ï¼Œå®ƒå¯ä»¥è¢«çœ‹åšè¿è¡Œåœ¨çº¿ç¨‹ä¸Šçš„æœ¬åœ°è°ƒåº¦å™¨ï¼›")])]),t._v(" "),n("p",[t._v("Goroutine å°±æ˜¯ Go è¯­è¨€è°ƒåº¦å™¨ä¸­å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå®ƒåœ¨è¿è¡Œæ—¶è°ƒåº¦å™¨ä¸­çš„åœ°ä½ä¸çº¿ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒå ç”¨äº†æ›´å°çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿé™ä½äº†ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚")]),t._v(" "),n("p",[t._v("Goroutine åªå­˜åœ¨äº Go è¯­è¨€çš„è¿è¡Œæ—¶ï¼Œå®ƒæ˜¯ Go è¯­è¨€åœ¨ç”¨æˆ·æ€æä¾›çš„çº¿ç¨‹ï¼Œä½œä¸ºä¸€ç§ç²’åº¦æ›´ç»†çš„èµ„æºè°ƒåº¦å•å…ƒï¼Œå¦‚æœä½¿ç”¨å¾—å½“èƒ½å¤Ÿåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹æ›´é«˜æ•ˆåœ°åˆ©ç”¨æœºå™¨çš„ CPUã€‚")]),t._v(" "),n("p",[t._v("Goroutine åœ¨ Go è¯­è¨€è¿è¡Œæ—¶ä½¿ç”¨ç§æœ‰ç»“æ„ä½“ "),n("a",{attrs:{href:"https://github.com/golang/go/blob/753d56d3642eb83848aa39e65982a9fc77e722d7/src/runtime/runtime2.go#L395",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("runtime.g")]),n("OutboundLink")],1),t._v(" è¡¨ç¤ºã€‚è¿™ä¸ªç§æœ‰ç»“æ„ä½“éå¸¸å¤æ‚ï¼Œæ€»å…±åŒ…å« 40 å¤šä¸ªç”¨äºè¡¨ç¤ºå„ç§çŠ¶æ€çš„æˆå‘˜å˜é‡ï¼Œ")]),t._v(" "),n("h3",{attrs:{id:"å®šæ—¶å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®šæ—¶å™¨"}},[t._v("#")]),t._v(" å®šæ—¶å™¨")]),t._v(" "),n("h3",{attrs:{id:"ç®¡é“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç®¡é“"}},[t._v("#")]),t._v(" ç®¡é“")]),t._v(" "),n("p",[t._v("Go è¯­è¨€ä¸­æœ€å¸¸è§çš„ã€ä¹Ÿæ˜¯ç»å¸¸è¢«äººæåŠçš„è®¾è®¡æ¨¡å¼å°±æ˜¯ â€” ä¸è¦é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œè€Œæ˜¯åº”è¯¥é€šè¿‡é€šä¿¡çš„æ–¹å¼å…±äº«å†…å­˜ã€‚åœ¨å¾ˆå¤šä¸»æµçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¤šä¸ªçº¿ç¨‹ä¼ é€’æ•°æ®çš„æ–¹å¼ä¸€èˆ¬éƒ½æ˜¯å…±äº«å†…å­˜ï¼Œä¸ºäº†è§£å†³çº¿ç¨‹å†²çªçš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦é™åˆ¶åŒä¸€æ—¶é—´èƒ½å¤Ÿè¯»å†™è¿™äº›å˜é‡çš„çº¿ç¨‹æ•°é‡ï¼Œè¿™ä¸ Go è¯­è¨€é¼“åŠ±çš„æ–¹å¼å¹¶ä¸ç›¸åŒã€‚")]),t._v(" "),n("h3",{attrs:{id:"ç½‘ç»œè½®è¯¢å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç½‘ç»œè½®è¯¢å™¨"}},[t._v("#")]),t._v(" ç½‘ç»œè½®è¯¢å™¨")]),t._v(" "),n("p",[t._v("å¤§éƒ¨åˆ†çš„æœåŠ¡éƒ½æ˜¯ I/O å¯†é›†å‹çš„ï¼Œåº”ç”¨ç¨‹åºä¼šèŠ±è´¹å¤§é‡æ—¶é—´ç­‰å¾… I/O æ“ä½œæ‰§è¡Œå®Œæˆã€‚ç½‘ç»œè½®è¯¢å™¨å°±æ˜¯ Go è¯­è¨€è¿è¡Œæ—¶ç”¨æ¥å¤„ç† I/O æ“ä½œçš„å…³é”®ç»„ä»¶ï¼Œå®ƒä½¿ç”¨äº†æ“ä½œç³»ç»Ÿæä¾›çš„ I/O å¤šè·¯å¤ç”¨æœºåˆ¶å¢å¼ºç¨‹åºçš„å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚")]),t._v(" "),n("p",[t._v("ç½‘ç»œè½®è¯¢å™¨ä¸ä»…ç”¨äºç›‘æ§ç½‘ç»œ I/Oï¼Œè¿˜èƒ½ç”¨äºç›‘æ§æ–‡ä»¶çš„ I/Oï¼Œå®ƒåˆ©ç”¨äº†æ“ä½œç³»ç»Ÿæä¾›çš„ I/O å¤šè·¯å¤ç”¨æ¨¡å‹æ¥æå‡ I/O è®¾å¤‡çš„åˆ©ç”¨ç‡ä»¥åŠç¨‹åºçš„æ€§èƒ½ã€‚")]),t._v(" "),n("p",[t._v("æ“ä½œç³»ç»Ÿä¸­åŒ…å«é˜»å¡ I/Oã€éé˜»å¡ I/Oã€ä¿¡å·é©±åŠ¨ I/O ä¸å¼‚æ­¥ I/O ä»¥åŠ I/O å¤šè·¯å¤ç”¨äº”ç§ I/O æ¨¡å‹ã€‚æˆ‘ä»¬åœ¨æœ¬èŠ‚ä¸­ä¼šä»‹ç»ä¸Šè¿°äº”ç§æ¨¡å‹ä¸­çš„ä¸‰ç§ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("é˜»å¡ I/O æ¨¡å‹ï¼›")]),t._v(" "),n("li",[t._v("éé˜»å¡ I/O æ¨¡å‹ï¼›")]),t._v(" "),n("li",[t._v("I/O å¤šè·¯å¤ç”¨æ¨¡å‹ï¼›")])]),t._v(" "),n("p",[t._v("é˜»å¡I/O")]),t._v(" "),n("p",[t._v("é˜»å¡ I/O æ˜¯æœ€å¸¸è§çš„ I/O æ¨¡å‹ï¼Œå¯¹æ–‡ä»¶å’Œç½‘ç»œçš„è¯»å†™æ“ä½œåœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯é˜»å¡çš„ã€‚å½“æˆ‘ä»¬é€šè¿‡ "),n("code",[t._v("read")]),t._v(" æˆ–è€… "),n("code",[t._v("write")]),t._v(" ç­‰ç³»ç»Ÿè°ƒç”¨å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ—¶ï¼Œåº”ç”¨ç¨‹åºå°±ä¼šè¢«é˜»å¡")]),t._v(" "),n("p",[t._v("éé˜»å¡ I/O")]),t._v(" "),n("p",[t._v("å½“è¿›ç¨‹æŠŠä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è®¾ç½®æˆéé˜»å¡æ—¶ï¼Œæ‰§è¡Œ "),n("code",[t._v("read")]),t._v(" å’Œ "),n("code",[t._v("write")]),t._v(" ç­‰ I/O æ“ä½œå°±ä¼šç«‹åˆ»è¿”å›ã€‚åœ¨ C è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ç‰‡æ®µå°†ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è®¾ç½®æˆéé˜»å¡çš„")]),t._v(" "),n("h3",{attrs:{id:"ç³»ç»Ÿç›‘æ§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç³»ç»Ÿç›‘æ§"}},[t._v("#")]),t._v(" ç³»ç»Ÿç›‘æ§")]),t._v(" "),n("p",[t._v("å¾ˆå¤šç³»ç»Ÿä¸­éƒ½æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒä»¬èƒ½å¤Ÿåœ¨åå°ç›‘æ§ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ï¼Œåœ¨å‡ºç°æ„å¤–æƒ…å†µæ—¶åŠæ—¶å“åº”ã€‚ç³»ç»Ÿç›‘æ§æ˜¯ Go è¯­è¨€è¿è¡Œæ—¶çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒä¼šæ¯éš”ä¸€æ®µæ—¶é—´æ£€æŸ¥ Go è¯­è¨€è¿è¡Œæ—¶ï¼Œç¡®ä¿ç¨‹åºæ²¡æœ‰è¿›å…¥å¼‚å¸¸çŠ¶æ€ã€‚")]),t._v(" "),n("p",[t._v("å®ˆæŠ¤è¿›ç¨‹æ˜¯å¾ˆæœ‰æ•ˆçš„è®¾è®¡ï¼Œå®ƒåœ¨æ•´ä¸ªç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¼šå­˜åœ¨ï¼Œä¼šéšç€ç³»ç»Ÿçš„å¯åŠ¨è€Œå¯åŠ¨ï¼Œç³»ç»Ÿçš„ç»“æŸè€Œç»“æŸã€‚åœ¨æ“ä½œç³»ç»Ÿå’Œ Kubernetes ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šå°†æ•°æ®åº“æœåŠ¡ã€æ—¥å¿—æœåŠ¡ä»¥åŠç›‘æ§æœåŠ¡ç­‰è¿›ç¨‹ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œã€‚")]),t._v(" "),n("p",[t._v("Go è¯­è¨€çš„ç³»ç»Ÿç›‘æ§ä¹Ÿèµ·åˆ°äº†å¾ˆé‡è¦çš„ä½œç”¨ï¼Œå®ƒåœ¨å†…éƒ¨å¯åŠ¨äº†ä¸€ä¸ªä¸ä¼šä¸­æ­¢çš„å¾ªç¯ï¼Œåœ¨å¾ªç¯çš„å†…éƒ¨ä¼šè½®è¯¢ç½‘ç»œã€æŠ¢å é•¿æœŸè¿è¡Œæˆ–è€…å¤„äºç³»ç»Ÿè°ƒç”¨çš„ Goroutine ä»¥åŠè§¦å‘åƒåœ¾å›æ”¶ï¼Œé€šè¿‡è¿™äº›è¡Œä¸ºï¼Œå®ƒèƒ½å¤Ÿè®©ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€å˜å¾—æ›´å¥åº·ã€‚")]),t._v(" "),n("h3",{attrs:{id:"å®ç°å¸¦trylockåŠŸèƒ½çš„mutex"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°å¸¦trylockåŠŸèƒ½çš„mutex"}},[t._v("#")]),t._v(" å®ç°å¸¦TryLockåŠŸèƒ½çš„mutex")]),t._v(" "),n("p",[n("code",[t._v("mutex")]),t._v("æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ç§åŒæ­¥åŸè¯­ï¼Œç”¨æ¥ä¿è¯å¯¹äºå…±äº«èµ„æºäº’æ–¥çš„è®¿é—®ã€‚å„ä¸ªç¼–ç¨‹è¯­è¨€é€šè¿‡å…³é”®å­—ã€æ•°æ®ç»“æ„ã€åº“ç­‰æ–¹å¼æä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼š"),n("strong",[t._v("åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå¹¶å‘å®‰å…¨åœ°è®¿é—®å…±äº«å˜é‡")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("åœ¨golangä¸­ï¼Œå®˜æ–¹æä¾›"),n("code",[t._v("sync.Mutex")]),t._v("äº’æ–¥é”ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" mu sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Mutex\nmu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something")]),t._v("\nmu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Unlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("code",[t._v("Lock")]),t._v("çš„è°ƒç”¨ä¼šé˜»å¡å½“å‰goroutineï¼Œç›´åˆ°æˆåŠŸè·å–é”ã€‚åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚Javaï¼‰ä¸­ï¼Œä¹Ÿæä¾›äº†éé˜»å¡å°è¯•è·å–é”çš„æ–¹å¼ã€‚æ— è®ºæ˜¯å¦è·å–æˆåŠŸï¼Œéƒ½ç«‹å³è¿”å›ï¼ŒæˆåŠŸè¿”å›trueï¼Œå¤±è´¥è¿”å›falseã€‚å®˜æ–¹æ²¡æœ‰æä¾›è¿™æ ·çš„åŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨"),n("code",[t._v("channel")]),t._v("å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" C "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("chan")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewC")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" C "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("chan")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ch\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("UnLock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("æ³¨æ„æˆ‘ä»¬ä½¿ç”¨çš„"),n("code",[t._v("channel")]),t._v("ç±»å‹æ˜¯"),n("code",[t._v("struct{}")]),t._v("ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨"),n("code",[t._v("channel")]),t._v("æ¥ä¼ é€’å®é™…æ•°æ®ï¼Œåªæ˜¯åŒæ­¥ä¿¡å·ã€‚è€Œä¸”æˆ‘ä»¬ä½¿ç”¨å®¹é‡ä¸º1çš„"),n("code",[t._v("buffered channel")]),t._v("ï¼Œè¿™æ ·ç¬¬ä¸€ä¸ªè·å–é”çš„"),n("code",[t._v("goroutine")]),t._v("ä¸ä¼šé˜»å¡ã€‚")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TryLock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ä¸ºTryLockæŒ‡å®šè¶…æ—¶æ—¶é—´å°±å¾ˆç®€å•äº†")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TryLockWithTimeOut")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Duration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tt "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewTimer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v("t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("C"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\t\tt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Stop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("éªŒè¯ä»£ç ")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tn1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tn2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tc "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewC")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\twg "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WaitGroup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\twg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TryLock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tn1"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n\t\t\t\tc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("UnLock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\tatomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddInt64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t\twg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Done")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\twg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Wait")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tfmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Printf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"total: %v, success: %v, fail: %v\\n"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n1"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"å†…å­˜ç®¡ç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å†…å­˜ç®¡ç†"}},[t._v("#")]),t._v(" å†…å­˜ç®¡ç†")]),t._v(" "),n("p",[t._v("å†…å­˜ç®¡ç†ä¸€èˆ¬åŒ…å«ä¸‰ä¸ªä¸åŒçš„ç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ç”¨æˆ·ç¨‹åºï¼ˆMutatorï¼‰ã€åˆ†é…å™¨ï¼ˆAllocatorï¼‰å’Œæ”¶é›†å™¨ï¼ˆCollectorï¼‰"),n("a",{attrs:{href:"https://draveness.me/golang/docs/part3-runtime/ch07-memory/golang-memory-allocator/#fn:1",target:"_blank",rel:"noopener noreferrer"}},[t._v("1"),n("OutboundLink")],1),t._v("ï¼Œå½“ç”¨æˆ·ç¨‹åºç”³è¯·å†…å­˜æ—¶ï¼Œå®ƒä¼šé€šè¿‡å†…å­˜åˆ†é…å™¨ç”³è¯·æ–°çš„å†…å­˜ï¼Œè€Œåˆ†é…å™¨ä¼šè´Ÿè´£ä»å †ä¸­åˆå§‹åŒ–ç›¸åº”çš„å†…å­˜åŒºåŸŸã€‚")]),t._v(" "),n("h3",{attrs:{id:"åˆ†é…æ–¹æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†é…æ–¹æ³•"}},[t._v("#")]),t._v(" åˆ†é…æ–¹æ³•")]),t._v(" "),n("p",[t._v("ç¼–ç¨‹è¯­è¨€çš„å†…å­˜åˆ†é…å™¨ä¸€èˆ¬åŒ…å«ä¸¤ç§åˆ†é…æ–¹æ³•ï¼Œä¸€ç§æ˜¯çº¿æ€§åˆ†é…å™¨ï¼ˆSequential Allocatorï¼ŒBump Allocatorï¼‰ï¼Œå¦ä¸€ç§æ˜¯ç©ºé—²é“¾è¡¨åˆ†é…å™¨ï¼ˆFree-List Allocatorï¼‰ï¼Œè¿™ä¸¤ç§åˆ†é…æ–¹æ³•æœ‰ç€ä¸åŒçš„å®ç°æœºåˆ¶å’Œç‰¹æ€§ï¼Œæœ¬èŠ‚ä¼šä¾æ¬¡ä»‹ç»å®ƒä»¬çš„åˆ†é…è¿‡ç¨‹ã€‚")]),t._v(" "),n("p",[t._v("çº¿æ€§åˆ†é…ï¼ˆBump Allocatorï¼‰æ˜¯ä¸€ç§é«˜æ•ˆçš„å†…å­˜åˆ†é…æ–¹æ³•ï¼Œä½†æ˜¯æœ‰è¾ƒå¤§çš„å±€é™æ€§ã€‚å½“æˆ‘ä»¬åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ä½¿ç”¨çº¿æ€§åˆ†é…å™¨ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘å†…å­˜ç‰¹å®šä½ç½®çš„æŒ‡é’ˆï¼Œå½“ç”¨æˆ·ç¨‹åºç”³è¯·å†…å­˜æ—¶ï¼Œåˆ†é…å™¨åªéœ€è¦æ£€æŸ¥å‰©ä½™çš„ç©ºé—²å†…å­˜ã€è¿”å›åˆ†é…çš„å†…å­˜åŒºåŸŸå¹¶ä¿®æ”¹æŒ‡é’ˆåœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œå³ç§»åŠ¨ä¸‹å›¾ä¸­çš„æŒ‡é’ˆï¼š")]),t._v(" "),n("p",[t._v("æ ¹æ®çº¿æ€§åˆ†é…å™¨çš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹å®ƒæœ‰è¾ƒå¿«çš„æ‰§è¡Œé€Ÿåº¦ï¼Œä»¥åŠè¾ƒä½çš„å®ç°å¤æ‚åº¦ï¼›ä½†æ˜¯çº¿æ€§åˆ†é…å™¨æ— æ³•åœ¨å†…å­˜è¢«é‡Šæ”¾æ—¶é‡ç”¨å†…å­˜ã€‚")]),t._v(" "),n("p",[t._v("æ­£æ˜¯å› ä¸ºçº¿æ€§åˆ†é…å™¨çš„è¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦åˆé€‚çš„åƒåœ¾å›æ”¶ç®—æ³•é…åˆä½¿ç”¨ã€‚æ ‡è®°å‹ç¼©ï¼ˆMark-Compactï¼‰ã€å¤åˆ¶å›æ”¶ï¼ˆCopying GCï¼‰å’Œåˆ†ä»£å›æ”¶ï¼ˆGenerational GCï¼‰ç­‰ç®—æ³•å¯ä»¥é€šè¿‡æ‹·è´çš„æ–¹å¼æ•´ç†å­˜æ´»å¯¹è±¡çš„ç¢ç‰‡ï¼Œå°†ç©ºé—²å†…å­˜å®šæœŸåˆå¹¶ï¼Œè¿™æ ·å°±èƒ½åˆ©ç”¨çº¿æ€§åˆ†é…å™¨çš„æ•ˆç‡æå‡å†…å­˜åˆ†é…å™¨çš„æ€§èƒ½äº†ã€‚")]),t._v(" "),n("p",[t._v("ä¸åŒçš„å†…å­˜å—ä»¥é“¾è¡¨çš„æ–¹å¼è¿æ¥ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼åˆ†é…å†…å­˜çš„åˆ†é…å™¨å¯ä»¥é‡æ–°åˆ©ç”¨å›æ”¶çš„èµ„æºï¼Œä½†æ˜¯å› ä¸ºåˆ†é…å†…å­˜æ—¶éœ€è¦éå†é“¾è¡¨ï¼Œæ‰€ä»¥å®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ ğ‘‚(ğ‘›)O(n)ã€‚ç©ºé—²é“¾è¡¨åˆ†é…å™¨å¯ä»¥é€‰æ‹©ä¸åŒçš„ç­–ç•¥åœ¨é“¾è¡¨ä¸­çš„å†…å­˜å—ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ä»¥ä¸‹å››ç§æ–¹å¼ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("é¦–æ¬¡é€‚åº”ï¼ˆFirst-Fitï¼‰â€” ä»é“¾è¡¨å¤´å¼€å§‹éå†ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªå¤§å°å¤§äºç”³è¯·å†…å­˜çš„å†…å­˜å—ï¼›")]),t._v(" "),n("li",[t._v("å¾ªç¯é¦–æ¬¡é€‚åº”ï¼ˆNext-Fitï¼‰â€” ä»ä¸Šæ¬¡éå†çš„ç»“æŸä½ç½®å¼€å§‹éå†ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªå¤§å°å¤§äºç”³è¯·å†…å­˜çš„å†…å­˜å—ï¼›")]),t._v(" "),n("li",[t._v("æœ€ä¼˜é€‚åº”ï¼ˆBest-Fitï¼‰â€” ä»é“¾è¡¨å¤´éå†æ•´ä¸ªé“¾è¡¨ï¼Œé€‰æ‹©æœ€åˆé€‚çš„å†…å­˜å—ï¼›")]),t._v(" "),n("li",[t._v("éš”ç¦»é€‚åº”ï¼ˆSegregated-Fitï¼‰â€” å°†å†…å­˜åˆ†å‰²æˆå¤šä¸ªé“¾è¡¨ï¼Œæ¯ä¸ªé“¾è¡¨ä¸­çš„å†…å­˜å—å¤§å°ç›¸åŒï¼Œç”³è¯·å†…å­˜æ—¶å…ˆæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„é“¾è¡¨ï¼Œå†ä»é“¾è¡¨ä¸­é€‰æ‹©åˆé€‚çš„å†…å­˜å—ï¼›")])]),t._v(" "),n("p",[t._v("Goè¯­è¨€çš„å†…å­˜åˆ†é…ç­–ç•¥ä¸ç¬¬å››ç« ç­–ç•¥ç›¸ä¼¼ï¼Œè¯¥ç­–ç•¥ä¼šå°†å†…å­˜åˆ†å‰²æˆç”± 4ã€8ã€16ã€32 å­—èŠ‚çš„å†…å­˜å—ç»„æˆçš„é“¾è¡¨ï¼Œå½“æˆ‘ä»¬å‘å†…å­˜åˆ†é…å™¨ç”³è¯· 8 å­—èŠ‚çš„å†…å­˜æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸Šå›¾ä¸­çš„ç¬¬äºŒä¸ªé“¾è¡¨æ‰¾åˆ°ç©ºé—²çš„å†…å­˜å—å¹¶è¿”å›ã€‚éš”ç¦»é€‚åº”çš„åˆ†é…ç­–ç•¥å‡å°‘äº†éœ€è¦éå†çš„å†…å­˜å—æ•°é‡ï¼Œæé«˜äº†å†…å­˜åˆ†é…çš„æ•ˆç‡ã€‚")]),t._v(" "),n("h3",{attrs:{id:"åƒåœ¾å›æ”¶å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åƒåœ¾å›æ”¶å™¨"}},[t._v("#")]),t._v(" åƒåœ¾å›æ”¶å™¨")]),t._v(" "),n("p",[t._v("ç¼–ç¨‹è¯­è¨€é€šå¸¸ä¼šä½¿ç”¨æ‰‹åŠ¨å’Œè‡ªåŠ¨ä¸¤ç§æ–¹å¼ç®¡ç†å†…å­˜ï¼ŒCã€C++ ä»¥åŠ Rust ç­‰ç¼–ç¨‹è¯­è¨€ä½¿ç”¨æ‰‹åŠ¨çš„æ–¹å¼ç®¡ç†å†…å­˜"),n("a",{attrs:{href:"https://draveness.me/golang/docs/part3-runtime/ch07-memory/golang-garbage-collector/#fn:2",target:"_blank",rel:"noopener noreferrer"}},[t._v("2"),n("OutboundLink")],1),t._v("ï¼Œå·¥ç¨‹å¸ˆéœ€è¦ä¸»åŠ¨ç”³è¯·æˆ–è€…é‡Šæ”¾å†…å­˜ï¼›è€Œ Pythonã€Rubyã€Java å’Œ Go ç­‰è¯­è¨€ä½¿ç”¨è‡ªåŠ¨çš„å†…å­˜ç®¡ç†ç³»ç»Ÿï¼Œä¸€èˆ¬éƒ½æ˜¯åƒåœ¾æ”¶é›†æœºåˆ¶ï¼Œ")]),t._v(" "),n("h3",{attrs:{id:"æ ˆå†…å­˜ç®¡ç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ ˆå†…å­˜ç®¡ç†"}},[t._v("#")]),t._v(" æ ˆå†…å­˜ç®¡ç†")]),t._v(" "),n("p",[t._v("æ ˆåŒºçš„å†…å­˜ä¸€èˆ¬ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è¿›è¡Œåˆ†é…å’Œé‡Šæ”¾ï¼Œå…¶ä¸­å­˜å‚¨ç€å‡½æ•°çš„å…¥å‚ä»¥åŠå±€éƒ¨å˜é‡ï¼Œè¿™äº›å‚æ•°ä¼šéšç€å‡½æ•°çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œå‡½æ•°çš„è¿”å›è€Œæ¶ˆäº¡ï¼Œä¸€èˆ¬ä¸ä¼šåœ¨ç¨‹åºä¸­é•¿æœŸå­˜åœ¨ï¼Œè¿™ç§çº¿æ€§çš„å†…å­˜åˆ†é…ç­–ç•¥æœ‰ç€æé«˜åœ°æ•ˆç‡ï¼Œä½†æ˜¯å·¥ç¨‹å¸ˆä¹Ÿå¾€å¾€ä¸èƒ½æ§åˆ¶æ ˆå†…å­˜çš„åˆ†é…ï¼Œè¿™éƒ¨åˆ†å·¥ä½œåŸºæœ¬éƒ½æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆçš„ã€‚")]),t._v(" "),n("p",[t._v("æ ˆå¯„å­˜å™¨åœ¨æ˜¯ CPU å¯„å­˜å™¨ä¸­çš„ä¸€ç§ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯è·Ÿè¸ªå‡½æ•°çš„è°ƒç”¨æ ˆ"),n("a",{attrs:{href:"https://draveness.me/golang/docs/part3-runtime/ch07-memory/golang-stack-management/#fn:2",target:"_blank",rel:"noopener noreferrer"}},[t._v("2"),n("OutboundLink")],1),t._v("ï¼ŒGo è¯­è¨€çš„æ±‡ç¼–ä»£ç ä¸­åŒ…å« BP å’Œ SP ä¸¤ä¸ªæ ˆå¯„å­˜å™¨ï¼Œå®ƒä»¬åˆ†åˆ«å­˜å‚¨äº†æ ˆçš„åŸºå€æŒ‡é’ˆå’Œæ ˆé¡¶çš„åœ°å€ï¼Œæ ˆå†…å­˜ä¸å‡½æ•°è°ƒç”¨çš„å…³ç³»éå¸¸ç´§å¯†ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°è°ƒç”¨ä¸€èŠ‚ä¸­æ›¾ç»ä»‹ç»è¿‡æ ˆåŒºï¼ŒBP å’Œ SP ä¹‹é—´çš„å†…å­˜å°±æ˜¯å½“å‰å‡½æ•°çš„è°ƒç”¨æ ˆã€‚")]),t._v(" "),n("p",[t._v("å¤šæ•°æ¶æ„ä¸Šé»˜è®¤æ ˆå¤§å°éƒ½åœ¨ 2 ~ 4 MB å·¦å³ï¼Œæå°‘æ•°æ¶æ„ä¼šä½¿ç”¨ 32 MB ä½œä¸ºé»˜è®¤å¤§å°ï¼Œç”¨æˆ·ç¨‹åºå¯ä»¥åœ¨åˆ†é…çš„æ ˆä¸Šå­˜å‚¨å‡½æ•°å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚ç„¶è€Œè¿™ä¸ªå›ºå®šçš„æ ˆå¤§å°åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„å€¼ï¼Œå¦‚æœä¸€ä¸ªç¨‹åºéœ€è¦åŒæ—¶è¿è¡Œå‡ ç™¾ä¸ªç”šè‡³ä¸Šåƒä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™äº›çº¿ç¨‹ä¸­çš„ç»å¤§éƒ¨åˆ†éƒ½åªä¼šç”¨åˆ°å¾ˆå°‘çš„æ ˆç©ºé—´ï¼Œè€Œå¦‚æœå‡½æ•°çš„è°ƒç”¨æ ˆéå¸¸æ·±ï¼Œå›ºå®šçš„æ ˆå¤§å°ä¹Ÿæ— æ³•æ»¡è¶³ç”¨æˆ·ç¨‹åºçš„éœ€æ±‚ã€‚")]),t._v(" "),n("p",[t._v("Go è¯­è¨€ä¸­çš„æ‰§è¡Œæ ˆç”± "),n("a",{attrs:{href:"https://github.com/golang/go/blob/a38a917aee626a9b9d5ce2b93964f586bf759ea0/src/runtime/runtime2.go#L382",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("runtime.stack")]),n("OutboundLink")],1),t._v(" ç»“æ„ä½“è¡¨ç¤ºï¼Œè¯¥ç»“æ„ä½“ä¸­åªåŒ…å«ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«è¡¨ç¤ºæ ˆçš„é¡¶éƒ¨å’Œæ ˆçš„åº•éƒ¨ï¼Œæ¯ä¸ªæ ˆç»“æ„ä½“éƒ½è¡¨ç¤ºèŒƒå›´ "),n("code",[t._v("[lo, hi)")]),t._v(" çš„å†…å­˜ç©ºé—´")]),t._v(" "),n("h2",{attrs:{id:"golangè®¾è®¡æ¨¡å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#golangè®¾è®¡æ¨¡å¼"}},[t._v("#")]),t._v(" golangè®¾è®¡æ¨¡å¼")]),t._v(" "),n("p",[t._v("https://github.com/lee501/go-patterns")])])}),[],!1,null,null,null);a.default=e.exports}}]);