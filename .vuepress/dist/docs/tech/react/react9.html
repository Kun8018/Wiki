<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React（九）</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.0503e0f3.css" as="style"><link rel="preload" href="/assets/js/app.3979e060.js" as="script"><link rel="preload" href="/assets/js/2.0f8cbb55.js" as="script"><link rel="preload" href="/assets/js/1.ff82b27c.js" as="script"><link rel="preload" href="/assets/js/73.7eb2e800.js" as="script"><link rel="prefetch" href="/assets/js/10.d9850768.js"><link rel="prefetch" href="/assets/js/100.a33654f4.js"><link rel="prefetch" href="/assets/js/101.d3bc1c79.js"><link rel="prefetch" href="/assets/js/102.02bbfd1e.js"><link rel="prefetch" href="/assets/js/103.c9de5560.js"><link rel="prefetch" href="/assets/js/104.7c2b76db.js"><link rel="prefetch" href="/assets/js/105.ea3ac79c.js"><link rel="prefetch" href="/assets/js/106.d54e3045.js"><link rel="prefetch" href="/assets/js/107.c142f695.js"><link rel="prefetch" href="/assets/js/108.fe2c9c19.js"><link rel="prefetch" href="/assets/js/109.59b55101.js"><link rel="prefetch" href="/assets/js/11.62caceeb.js"><link rel="prefetch" href="/assets/js/110.c657b6f8.js"><link rel="prefetch" href="/assets/js/111.4eadf9c5.js"><link rel="prefetch" href="/assets/js/112.fce38ecf.js"><link rel="prefetch" href="/assets/js/113.ee6322e2.js"><link rel="prefetch" href="/assets/js/114.1ed20fd8.js"><link rel="prefetch" href="/assets/js/115.aa405ee0.js"><link rel="prefetch" href="/assets/js/116.d1b4c413.js"><link rel="prefetch" href="/assets/js/117.965d1926.js"><link rel="prefetch" href="/assets/js/118.b1d5b9ca.js"><link rel="prefetch" href="/assets/js/119.e4e766bc.js"><link rel="prefetch" href="/assets/js/12.abd8d9de.js"><link rel="prefetch" href="/assets/js/120.f569b061.js"><link rel="prefetch" href="/assets/js/121.e3915f79.js"><link rel="prefetch" href="/assets/js/122.3a2b3d34.js"><link rel="prefetch" href="/assets/js/123.cbf985ea.js"><link rel="prefetch" href="/assets/js/124.c3d8b6fc.js"><link rel="prefetch" href="/assets/js/125.dfe970a3.js"><link rel="prefetch" href="/assets/js/126.f5165054.js"><link rel="prefetch" href="/assets/js/127.ffb31d35.js"><link rel="prefetch" href="/assets/js/128.bf7eb0b3.js"><link rel="prefetch" href="/assets/js/129.76b0ac54.js"><link rel="prefetch" href="/assets/js/13.763c094c.js"><link rel="prefetch" href="/assets/js/130.cb661ef6.js"><link rel="prefetch" href="/assets/js/131.b215b4cc.js"><link rel="prefetch" href="/assets/js/132.bdf6b89f.js"><link rel="prefetch" href="/assets/js/133.a13e43ca.js"><link rel="prefetch" href="/assets/js/134.f858c56e.js"><link rel="prefetch" href="/assets/js/135.0e05a297.js"><link rel="prefetch" href="/assets/js/136.ff47beeb.js"><link rel="prefetch" href="/assets/js/137.7dcf182f.js"><link rel="prefetch" href="/assets/js/138.dd2c3c8c.js"><link rel="prefetch" href="/assets/js/139.db36e4eb.js"><link rel="prefetch" href="/assets/js/14.784100b6.js"><link rel="prefetch" href="/assets/js/140.05811a56.js"><link rel="prefetch" href="/assets/js/141.32b8052b.js"><link rel="prefetch" href="/assets/js/142.2c061186.js"><link rel="prefetch" href="/assets/js/143.113df61a.js"><link rel="prefetch" href="/assets/js/144.2c01c336.js"><link rel="prefetch" href="/assets/js/145.a8fe7a8a.js"><link rel="prefetch" href="/assets/js/146.bb5b7e16.js"><link rel="prefetch" href="/assets/js/147.213b17a7.js"><link rel="prefetch" href="/assets/js/148.dd7a3258.js"><link rel="prefetch" href="/assets/js/149.b3f9adc5.js"><link rel="prefetch" href="/assets/js/15.3aa73286.js"><link rel="prefetch" href="/assets/js/150.4ab9a505.js"><link rel="prefetch" href="/assets/js/151.d04eb475.js"><link rel="prefetch" href="/assets/js/152.c547ae2c.js"><link rel="prefetch" href="/assets/js/153.3fa58002.js"><link rel="prefetch" href="/assets/js/154.cd2cc012.js"><link rel="prefetch" href="/assets/js/155.0160c441.js"><link rel="prefetch" href="/assets/js/16.7886627b.js"><link rel="prefetch" href="/assets/js/17.a4c76a6c.js"><link rel="prefetch" href="/assets/js/18.995eb54b.js"><link rel="prefetch" href="/assets/js/19.edc682a7.js"><link rel="prefetch" href="/assets/js/20.87ca556d.js"><link rel="prefetch" href="/assets/js/21.4b328dcc.js"><link rel="prefetch" href="/assets/js/22.91d15e78.js"><link rel="prefetch" href="/assets/js/23.17bfc3dd.js"><link rel="prefetch" href="/assets/js/24.c0d84a10.js"><link rel="prefetch" href="/assets/js/25.2717e191.js"><link rel="prefetch" href="/assets/js/26.3764ddb4.js"><link rel="prefetch" href="/assets/js/27.e98913ec.js"><link rel="prefetch" href="/assets/js/28.a4481108.js"><link rel="prefetch" href="/assets/js/29.3d82d38d.js"><link rel="prefetch" href="/assets/js/3.e2aae122.js"><link rel="prefetch" href="/assets/js/30.7e9979a2.js"><link rel="prefetch" href="/assets/js/31.fa479c29.js"><link rel="prefetch" href="/assets/js/32.901576de.js"><link rel="prefetch" href="/assets/js/33.8dafc45c.js"><link rel="prefetch" href="/assets/js/34.6bbddd9b.js"><link rel="prefetch" href="/assets/js/35.394c80b9.js"><link rel="prefetch" href="/assets/js/36.5246333d.js"><link rel="prefetch" href="/assets/js/37.49802bfd.js"><link rel="prefetch" href="/assets/js/38.36ae0914.js"><link rel="prefetch" href="/assets/js/39.791184a0.js"><link rel="prefetch" href="/assets/js/4.30c2ba05.js"><link rel="prefetch" href="/assets/js/40.eb1a9cc1.js"><link rel="prefetch" href="/assets/js/41.31179942.js"><link rel="prefetch" href="/assets/js/42.22c31ea4.js"><link rel="prefetch" href="/assets/js/43.e82e343d.js"><link rel="prefetch" href="/assets/js/44.95e68751.js"><link rel="prefetch" href="/assets/js/45.b99232d2.js"><link rel="prefetch" href="/assets/js/46.21e9dae9.js"><link rel="prefetch" href="/assets/js/47.e30bba7c.js"><link rel="prefetch" href="/assets/js/48.6c0d14cd.js"><link rel="prefetch" href="/assets/js/49.ed1b480b.js"><link rel="prefetch" href="/assets/js/5.c5fba3ad.js"><link rel="prefetch" href="/assets/js/50.f500b9ed.js"><link rel="prefetch" href="/assets/js/51.3671246f.js"><link rel="prefetch" href="/assets/js/52.7915148f.js"><link rel="prefetch" href="/assets/js/53.39ece5d9.js"><link rel="prefetch" href="/assets/js/54.358ca4aa.js"><link rel="prefetch" href="/assets/js/55.244837be.js"><link rel="prefetch" href="/assets/js/56.e7164f10.js"><link rel="prefetch" href="/assets/js/57.3c6f5aa2.js"><link rel="prefetch" href="/assets/js/58.84c83603.js"><link rel="prefetch" href="/assets/js/59.ec4edc7d.js"><link rel="prefetch" href="/assets/js/6.9184d4d1.js"><link rel="prefetch" href="/assets/js/60.c2346e02.js"><link rel="prefetch" href="/assets/js/61.8d99ca4c.js"><link rel="prefetch" href="/assets/js/62.f6bea4bf.js"><link rel="prefetch" href="/assets/js/63.410bfe1e.js"><link rel="prefetch" href="/assets/js/64.960d5951.js"><link rel="prefetch" href="/assets/js/65.e6a8895b.js"><link rel="prefetch" href="/assets/js/66.41092e16.js"><link rel="prefetch" href="/assets/js/67.062b95dc.js"><link rel="prefetch" href="/assets/js/68.58c65f95.js"><link rel="prefetch" href="/assets/js/69.d1e1b68b.js"><link rel="prefetch" href="/assets/js/7.85fc951e.js"><link rel="prefetch" href="/assets/js/70.8294a611.js"><link rel="prefetch" href="/assets/js/71.66e44dac.js"><link rel="prefetch" href="/assets/js/72.46bd34f2.js"><link rel="prefetch" href="/assets/js/74.8e05f264.js"><link rel="prefetch" href="/assets/js/75.21e0b9b1.js"><link rel="prefetch" href="/assets/js/76.c2c92cec.js"><link rel="prefetch" href="/assets/js/77.799df679.js"><link rel="prefetch" href="/assets/js/78.1605b33c.js"><link rel="prefetch" href="/assets/js/79.659e7e78.js"><link rel="prefetch" href="/assets/js/80.6f99ca65.js"><link rel="prefetch" href="/assets/js/81.7a0caba9.js"><link rel="prefetch" href="/assets/js/82.19629840.js"><link rel="prefetch" href="/assets/js/83.29093f51.js"><link rel="prefetch" href="/assets/js/84.64568258.js"><link rel="prefetch" href="/assets/js/85.3d88e3b2.js"><link rel="prefetch" href="/assets/js/86.0a93f933.js"><link rel="prefetch" href="/assets/js/87.07c51a25.js"><link rel="prefetch" href="/assets/js/88.aa6be8e5.js"><link rel="prefetch" href="/assets/js/89.6ad93f1f.js"><link rel="prefetch" href="/assets/js/90.87c8c6e5.js"><link rel="prefetch" href="/assets/js/91.57c509b5.js"><link rel="prefetch" href="/assets/js/92.c8b02e25.js"><link rel="prefetch" href="/assets/js/93.fee86c6c.js"><link rel="prefetch" href="/assets/js/94.ab3bad19.js"><link rel="prefetch" href="/assets/js/95.cfaa79dc.js"><link rel="prefetch" href="/assets/js/96.c63afef5.js"><link rel="prefetch" href="/assets/js/97.123374a6.js"><link rel="prefetch" href="/assets/js/98.53cfb154.js"><link rel="prefetch" href="/assets/js/99.8fe1f067.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0503e0f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>​      前端框架，快速开发页面，函数式编程，与后端api快速搭建</p> <h2 id="es-lint"><a href="#es-lint" class="header-anchor">#</a> ES-lint</h2> <p>react的代码规范库</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> eslint eslint-plugin-react
</code></pre></div><p>如果是typescript项目按照ts相关插件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> @typescript-eslint/eslint-plugin @typescript-eslint/parser
</code></pre></div><p>使用yarn eslint --lint向导来完成配置，或者手动创建eslintrc。json填入如下配置</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;plugin:react/recommended&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@typescript-eslint/parser&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;@typescript-eslint&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;react/self-closing-comp&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">]</span> <span class="token comment">//组件无内容时自闭合</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在vscode中配置</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;typescript&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;typescriptreact&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="推荐的配置"><a href="#推荐的配置" class="header-anchor">#</a> 推荐的配置</h3> <p>https://github.com/tsconfig/bases</p> <h2 id="prettier"><a href="#prettier" class="header-anchor">#</a> Prettier</h2> <p>Prettier是</p> <ul><li>一个代码格式工具,支持基本主流前端的语言(js, ts, Es6, Es7,markdown等等)；</li> <li>会根据书写的代码，重新解析和构建显示格式（即，它清除原来的格式，按照自己认为美丽的方式重新显示代码格式）</li> <li>Prettier 不会像EsLint，TsLint，StyleLint 那样告诉你，语法哪里错了，它只会告诉你代码这么写不美观</li></ul> <p>编写.prettierrc</p> <div class="language-prettierrc extra-class"><pre class="language-text"><code>{
  &quot;singleQuote&quot;: true,
  &quot;trailingComma&quot;: &quot;all&quot;,
  &quot;printWidth&quot;: 80,
  &quot;overrides&quot;: [
    {
      &quot;files&quot;: &quot;.prettierrc&quot;,
      &quot;options&quot;: { &quot;parser&quot;: &quot;json&quot; }
    }
  ]
}
</code></pre></div><h2 id="stylelint"><a href="#stylelint" class="header-anchor">#</a> stylelint</h2> <p>stylelint是现代化的前端项目中一个强大的代码检查工具。可以帮忙检查样式文件并在样式中强制执行约定。</p> <p>stylelint 默认地能<em>解析</em>如下的非标准语法，包括Sass、Less 和 SugarSS，非标准语法可以从以下文件扩展名 <code>.sass</code>、<code>.scss</code>、<code>.less</code> 和 <code>.sss</code> 中自动推断出来。或者您也可以自己指定语法。</p> <p>此外，在使用命令行界面或 Node.js 应用程序接口时，stylelint 可以接受任何<a href="https://github.com/postcss/postcss#syntaxes" target="_blank" rel="noopener noreferrer">PostCSS兼容语法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。但请注意，stylelint 无法保证核心规则可以在上面列出的默认值以外的语法中正常工作</p> <h3 id="stylelint-order"><a href="#stylelint-order" class="header-anchor">#</a> stylelint-order</h3> <p>除了使用设定默认的 <code>standard</code> 规则外，我们还可以在 <code>.stylelintrc.js</code> 内添加自己喜欢的规则</p> <p>安装stylelint-order</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> stylelint-order --save-dev
</code></pre></div><p>在 <code>.stylelintrc.js</code> 设置代码如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;stylelint-order&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;order/properties-order&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;height&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="lint-staged"><a href="#lint-staged" class="header-anchor">#</a> lint-staged</h3> <p>lint-staged 是一个在git暂存文件上运行linters的工具，当然如果你觉得每次修改一个文件就给所有文件执行一次lint检查不恶心的话，这个工具对你来说就没有什么意义了，请直接关闭即可</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx mrm lint-staged
</code></pre></div><p>配置</p> <p>在package.json中配置</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;my-custom-script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;linter --arg1 --arg2&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{js}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;eslint --cache --fix&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;prettier --write&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;*.css&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;stylelint --cache --fix&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;prettier --write&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用<code>prettier</code>自动修复<code>javascript</code>、<code>typescript</code>、<code>markdown</code>、<code>HTML</code>或<code>CSS</code>的代码样式</p> <div class="language-lint extra-class"><pre class="language-text"><code>{
  &quot;*.{js,jsx,ts,tsx,md,html,css}&quot;: &quot;prettier --write&quot;
}
</code></pre></div><p>Stylelint用于具有默认值的CSS和具有SCSS语法的SCSS</p> <div class="language-lint extra-class"><pre class="language-text"><code>{
  &quot;*.css&quot;: &quot;stylelint&quot;,
  &quot;*.scss&quot;: &quot;stylelint --syntax=scss&quot;
}
</code></pre></div><p>自动修复代码</p> <div class="language-lint extra-class"><pre class="language-text"><code>{
  &quot;*.js&quot;: &quot;eslint --fix&quot;
}
</code></pre></div><p>过滤文件原则</p> <p>Linter命令处理由glob模式定义的所有暂存文件的子集</p> <p>如果全局模式不包含斜杠（<code>/</code>），matchBase则将启用micromatch的选项，因此无论目录如何，全局匹配文件的基本名称：</p> <ol><li><code>&quot;*.js&quot;</code>将匹配所有JS文件，例如<code>/test.js</code>和<code>/foo/bar/test.js</code></li> <li><code>&quot;!(*test).js&quot;</code>。将匹配所有以结尾的JS文件<code>test.js</code>，因此<code>foo.js</code>但不匹配<code>foo.test.js</code></li></ol> <p>如果全局模式确实包含斜杠（<code>/</code>），则它也将与路径匹配：</p> <ol><li><code>&quot;./*.js&quot;</code>将匹配git repo根目录中的所有JS文件，因此<code>/test.js</code>但不匹配`/foo/bar/test.js``</li> <li>``&quot;foo/**/*.js&quot;<code>将匹配</code>/foo<code>目录中的所有JS文件，所以</code>/foo/bar/test.js<code>但不匹配</code>/test.js`</li></ol> <h2 id="jsdoc"><a href="#jsdoc" class="header-anchor">#</a> JSdoc</h2> <p>JSDoc 是一个针对 JavaScript 的 API 文档生成器，类似于 Java 中的 Javadoc 或者 PHP 中的 phpDocumentor；在源代码中添加指定格式的注释，JSDoc 工具便会自动扫描你的代码并生成一个 API 文档网站（在指定目录下生成相关的网页文件）</p> <p>生成 API 文档只是一方面，其更主要的贡献在于对代码注释格式进行了规范化</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> jsdoc
</code></pre></div><p>在js文件中写入对应的函数和注释</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * Returns the sum of a and b
 * @param {number} a
 * @param {number} b
 * @returns {number}
 */</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * Return the diff fo a and b
 * @param {number} a
 * @param {number} b
 * @returns {number}
 */</span>
<span class="token keyword">function</span> <span class="token function">diff</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后就是在当前目录执行以下命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code>jsdoc doc.js
</code></pre></div><p>最后就会在当前目录下生成一个名为 <code>out</code> 的目录（也可以另外指定），里面有包含接口文档的html页面</p> <p>常用写法：</p> <p>@description：也可写作 <code>@desc</code>，描述当前注释对象的详细信息</p> <p>@file：注释写在文件开头，用于描述当前文件的相关信息</p> <p>@class 描述一个 <code>class</code> 类</p> <p>@returns 或者写作 <code>@return</code>，描述函数的返回值的信息；</p> <p>@param 与 <code>@arg</code>, <code>@argument</code> 含义相同，描述一个函数的参数信息；</p> <p>@function 与 <code>@func</code>, <code>@method</code> 含义相同，描述一个函数；</p> <p>@todo 描述接下来准备做的事情；</p> <p>@copyright 描述当前文件的版权相关信息</p> <p>@file 注释写在文件开头，用于描述当前文件的相关信息</p> <h2 id="react的ts写法"><a href="#react的ts写法" class="header-anchor">#</a> react的Ts写法</h2> <h3 id="react、react-dom类型声明文件"><a href="#react、react-dom类型声明文件" class="header-anchor">#</a> react、react-dom类型声明文件</h3> <p>使用tsx之前要安装react的声明文件，否则会报错找不到模块react</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> @types/react <span class="token parameter variable">-s</span>
<span class="token function">npm</span> <span class="token function">install</span> @types/react-dom <span class="token parameter variable">-s</span>
</code></pre></div><h3 id="有状态组件"><a href="#有状态组件" class="header-anchor">#</a> 有状态组件</h3> <p>有状态组件中的state和props使用ts去定义类型</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  color<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  size<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
  
<span class="token keyword">interface</span> <span class="token class-name">IState</span> <span class="token punctuation">{</span>
  count<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>PureComponent<span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span> IState<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">readonly</span> state<span class="token operator">:</span> Readonly<span class="token operator">&lt;</span>IState<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="事件类型"><a href="#事件类型" class="header-anchor">#</a> 事件类型</h3> <p>常用Event事件对象类型</p> <p>ClipboardEvent&lt;T = Element&gt; 剪贴板事件对象</p> <p>DragEvent&lt;T = element&gt; 拖拽事件对象</p> <p>ChangeEvent&lt;T = element&gt; Change事件对象</p> <p>KeyboardEvent&lt;T = element&gt;  键盘事件对象</p> <p>MouseEvent&lt;T = element&gt; 鼠标事件对象</p> <p>TouchEvent&lt;T = element&gt; 触摸事件对象</p> <p>WheelEvent&lt;T = element&gt; 滚轮事件对象</p> <p>AnimationEvent&lt;T = element&gt; 动画事件对象</p> <p>TransitionEvent&lt;T = element&gt; 过渡事件对象</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MouseEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">interface</span> <span class="token class-name">Iprops</span> <span class="token punctuation">{</span>
  <span class="token function">onClick</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> MouseEvent<span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="css属性类型"><a href="#css属性类型" class="header-anchor">#</a> CSS属性类型</h3> <p>有时候会在props或者state中使用css属性，这个时候就使用react自带的css类型</p> <div class="language-react extra-class"><pre class="language-text"><code>import React from 'react';

export type EdgeTextProps = {
  style?: React.CSSProperties;
  color: React.CSSProperties['color'];
};
</code></pre></div><h3 id="泛型组件"><a href="#泛型组件" class="header-anchor">#</a> 泛型组件</h3> <div class="language-react extra-class"><pre class="language-text"><code>//泛型ts组件
function Foo&lt;T&gt;(props: Props&lt;T&gt;){
  return &lt;div&gt;{props.content}&lt;/div&gt;
}

const App = () =&gt; {
  return (
  	&lt;div className=&quot;App&quot;&gt;
      &lt;Foo content={42}&gt;&lt;/Foo&gt;
      &lt;Foo&lt;string&gt; content={&quot;hello&quot;}&gt;&lt;/Foo&gt;
    &lt;/div&gt;
  )
}
        
//普通ts组件
interface Props {
	content: string;          
}
        
function Foo(props: Props) {
	return &lt;div&gt;{props.content}&lt;/div&gt;          
}
        
const App = () =&gt; {
  return (
  	&lt;div className=&quot;App&quot;&gt;
      // Type number not assignable to type string
      &lt;Foo content={42}&gt;&lt;/Foo&gt;
      &lt;Foo&lt;string&gt; content={&quot;hello&quot;}&gt;&lt;/Foo&gt;
    &lt;/div&gt;
  )
}
</code></pre></div><h2 id="react库"><a href="#react库" class="header-anchor">#</a> react库</h2> <h3 id="recompose"><a href="#recompose" class="header-anchor">#</a> recompose</h3> <h3 id="loadable-components"><a href="#loadable-components" class="header-anchor">#</a> loadable-components</h3> <p>懒加载</p> <p>安装</p> <div class="language-react extra-class"><pre class="language-text"><code>npm install @loadable/component
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import loadable from '@loadable/component'

const OtherComponent = loadable(() =&gt; import('./OtherComponent'))

function MyComponent() {
  return (
    &lt;div&gt;
      &lt;OtherComponent /&gt;
    &lt;/div&gt;
  )
}
</code></pre></div><h3 id="react-media-recorder"><a href="#react-media-recorder" class="header-anchor">#</a> react-media-recorder</h3> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i react-media-recorder
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import { ReactMediaRecorder } from &quot;react-media-recorder&quot;;

const RecordView = () =&gt; (
  &lt;div&gt;
    &lt;ReactMediaRecorder
      video
      render={({ status, startRecording, stopRecording, mediaBlobUrl }) =&gt; (
        &lt;div&gt;
          &lt;p&gt;{status}&lt;/p&gt;
          &lt;button onClick={startRecording}&gt;Start Recording&lt;/button&gt;
          &lt;button onClick={stopRecording}&gt;Stop Recording&lt;/button&gt;
          &lt;video src={mediaBlobUrl} controls autoPlay loop /&gt;
        &lt;/div&gt;
      )}
    /&gt;
  &lt;/div&gt;
);

import { useReactMediaRecorder } from &quot;react-media-recorder&quot;;

const RecordView = () =&gt; {
  const {
    status,
    startRecording,
    stopRecording,
    mediaBlobUrl,
  } = useReactMediaRecorder({ video: true });

  return (
    &lt;div&gt;
      &lt;p&gt;{status}&lt;/p&gt;
      &lt;button onClick={startRecording}&gt;Start Recording&lt;/button&gt;
      &lt;button onClick={stopRecording}&gt;Stop Recording&lt;/button&gt;
      &lt;video src={mediaBlobUrl} controls autoPlay loop /&gt;
    &lt;/div&gt;
  );
};
</code></pre></div><h3 id="react-three-fiber"><a href="#react-three-fiber" class="header-anchor">#</a> react-three-fiber</h3> <p>在react中使用three.js的插件</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> three @react-three/fiber
<span class="token comment">##  如果使用ts还要安装ts包</span>
<span class="token function">npm</span> <span class="token function">install</span> @types/three
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>/* eslint-disable */
import * as THREE from 'three'
import React, { useRef, useState } from 'react'
import { Canvas, useFrame } from '@react-three/fiber'

function Box(props: JSX.IntrinsicElements['mesh']) {
  // This reference will give us direct access to the THREE.Mesh object
  const ref = useRef&lt;THREE.Mesh&gt;(null!)
  // Hold state for hovered and clicked events
  const [hovered, hover] = useState(false)
  const [clicked, click] = useState(false)
  // Rotate mesh every frame, this is outside of React without overhead
  useFrame((state, delta) =&gt; (ref.current.rotation.x += 0.01))

  return (
    &lt;mesh
      {...props}
      ref={ref}
      scale={clicked ? 1.5 : 1}
      onClick={(event) =&gt; click(!clicked)}
      onPointerOver={(event) =&gt; hover(true)}
      onPointerOut={(event) =&gt; hover(false)}&gt;
      &lt;boxGeometry args={[1, 1, 1]} /&gt;
      &lt;meshStandardMaterial color={hovered ? 'hotpink' : 'orange'} /&gt;
    &lt;/mesh&gt;
  )
}

export default function App() {
  return (
    &lt;Canvas&gt;
      &lt;ambientLight /&gt;
      &lt;pointLight position={[10, 10, 10]} /&gt;
      &lt;Box position={[-1.2, 0, 0]} /&gt;
      &lt;Box position={[1.2, 0, 0]} /&gt;
    &lt;/Canvas&gt;
  )
}
</code></pre></div><h3 id="prop-types"><a href="#prop-types" class="header-anchor">#</a> prop-types</h3> <p>使用第三方包 <code>prop-types</code> 可以对react的 <code>props</code> 进行类型校验</p> <div class="language-react extra-class"><pre class="language-text"><code> import React from 'react'
 // 导入包
 import PropTypes from 'prop-types'
 
 function About (props) {
   const { name, age } = props
   console.log(name, age)
     return (
       &lt;div&gt;
         &lt;p&gt;{ name }&lt;/p&gt;
         &lt;p&gt;{ age }&lt;/p&gt;
       &lt;/div&gt;
     )
 }
 
 About.defaultProps = {
   name: 'ReoNa',
   age: 22
 }
 
 // 这里通过函数组件的 propTypes 属性设置类型校验
 // PropType.类型：规定传入类型
 // PropType.类型.isRequired：规定必须传入
 About.propTypes = {
   name: PropTypes.string.isRequired,
   age: PropTypes.number
 }
 
 export default About
</code></pre></div><h3 id="react-helmet"><a href="#react-helmet" class="header-anchor">#</a> react-helmet</h3> <p>React Helmet是一个HTML文档head管理工具，管理对文档头的所有修改。React Helmet采用纯HTML标记并输出纯HTML标记，非常简单，对react初学者友好</p> <p>特点：</p> <p>支持所有有效的head标签，title、base、meta、link、script、noscript和style</p> <p>支持body、html和title的属性</p> <p>支持服务端渲染</p> <p>嵌套组件覆盖重复的head标签修改</p> <p>同一组件中定义时将保留重复的head标签修改(比如“apple-touch-icon”)</p> <p>支持跟踪DOM更改的回调</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i react-helmet
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import {Helmet} from &quot;react-helmet&quot;

class Application extends React.Component {
  render(){
   return(
      &lt;div className=&quot;application&quot;&gt;
        &lt;Helmet&gt;
          &lt;meta charSet=&quot;utf-8&quot;/&gt;
          &lt;title&gt;My title&lt;/title&gt;
          &lt;link rel=&quot;canonical&quot; href=&quot;http://mysite.com/example&quot; /&gt;
        &lt;/Helmet&gt;
        &lt;Child&gt;
       			&lt;Helmet&gt;
                &lt;title&gt;new Title&lt;/title&gt;
            &lt;/Helmet&gt;
       &lt;/Child&gt;
      &lt;/div&gt;
   )
  }
}
</code></pre></div><p>上面代码中，后面的helmet会覆盖前面的helmet</p> <p>服务端渲染时，需要在ReactDOMServer.renderToString或ReadDOMServer.renderToStaticMarkup后调用Helmet.renderStatic()来获得你预渲染的head数据</p> <div class="language-react extra-class"><pre class="language-text"><code>ReactDOMServer.renderToString(&lt;Handler /&gt;);
const helmet = Helmet.renderStatic();
</code></pre></div><h3 id="二维码"><a href="#二维码" class="header-anchor">#</a> 二维码</h3> <p>QR Code数据表示方法 : 深色模块表示二进制&quot;1&quot;，浅色模块表示二进制&quot;0&quot;。</p> <p>纠错能力:</p> <ul><li>L级：约可纠错7%的数据码字；</li> <li>M级：约可纠错15%的数据码字；</li> <li>Q级：约可纠错25%的数据码字；</li> <li>H级：约可纠错30%的数据码字；</li></ul> <p>使用qrcode.react npm包</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> qrcode.react
</code></pre></div><p>api</p> <table><thead><tr><th>prop</th> <th>type</th> <th>default value</th></tr></thead> <tbody><tr><td>value</td> <td>string</td> <td></td></tr> <tr><td>renderAs</td> <td>string ('canvas' 'svg')</td> <td>'canvas'</td></tr> <tr><td>size</td> <td>number</td> <td>128</td></tr> <tr><td>bgColor</td> <td>string (CSS color)</td> <td>&quot;#FFFFFF&quot;</td></tr> <tr><td>fgColor</td> <td>string (CSS color)</td> <td>&quot;#000000&quot;</td></tr> <tr><td>level</td> <td>string ('L' 'M' 'Q' 'H')</td> <td>'L'</td></tr> <tr><td>includeMargin</td> <td>boolean</td> <td>false</td></tr> <tr><td>imageSettings</td> <td>object (see below)</td> <td></td></tr></tbody></table> <p>图片设置参数imageSettings</p> <table><thead><tr><th>field</th> <th>type</th> <th>default value</th></tr></thead> <tbody><tr><td>src</td> <td>string</td> <td></td></tr> <tr><td>x</td> <td>number</td> <td>none, will center</td></tr> <tr><td>y</td> <td>number</td> <td>none, will center</td></tr> <tr><td>height</td> <td>number</td> <td>10% of size</td></tr> <tr><td>width</td> <td>number</td> <td>10% of size</td></tr> <tr><td>excavate</td> <td>boolean</td> <td>false</td></tr></tbody></table> <p>示例代码</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;QRCode
  id=&quot;qrCode&quot;
  value={&quot;https://gongyi.m.jd.com/oneDetails.html?id=930&quot;}
  imageSettings={{
    // 中间有图片logo
    src: `http://img13.360buyimg.com/imagetools/jfs/t1/203384/29/6713/37826/6142ef39E5f79ed2b/47200134bf8d0571.jpg`,
    height: 30,
    width: 30,
    excavate: true,
  }}
  size={99} // 二维码的大小
  fgColor=&quot;#000000&quot; // 二维码的颜色
/&gt;
//转换为图片
changeCanvasToPic = () =&gt; {
    const canvasImg = document.getElementById('qrCode'); // 获取canvas类型的二维码
    const img = new Image();
    img.src = canvasImg.toDataURL('image/png'); 
// canvas.toDataUrl() 可以将canvas格式的文件转换成基于base64的指定格式的图片
// 注意这个api ie9以下不支持    
    const downLink = document.getElementById('down_link');
    downLink.href = img.src;
    downLink.download = '二维码'; //下载图片name
  };
//定时刷新
//定时刷新功能是使用 setInterval 定时更新 value 值来更新二维码，跳转地址后面拼上一个radomCode, radomCode定时更新，就实现二维码的刷新了，需要及时清理定时器。
</code></pre></div><h3 id="antd"><a href="#antd" class="header-anchor">#</a> antd</h3> <p>Ant-Design是蚂蚁金服开发的面向React和Vue的类似于bootstrap的框架，官网链接为：https://ant.design/index-cn</p> <p>安装包</p> <div class="language-node extra-class"><pre class="language-text"><code>npm install antd --save
cnpm i antd -S
</code></pre></div><p>在App.css文件中导入样式</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">'~antd/dist/antd.css'</span><span class="token punctuation">;</span></span>
</code></pre></div><p>按需导入包</p> <div class="language-node extra-class"><pre class="language-text"><code>import {  } from 'antd';

</code></pre></div><p>组件</p> <p>Upload</p> <div class="language-react extra-class"><pre class="language-text"><code>
</code></pre></div><p>Table</p> <p><code>antd</code> 的 <code>table</code> 组件，<code>table</code> 的 <code>columns</code> 有一个属性叫做 <code>align</code>，它的使用是控制当前列是居左、居中、居右的。</p> <p>它的类型为AlignType,在<code>node_modules/rc-table/lib/interface.d.ts</code>中可以找到</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">type</span> <span class="token class-name">AlignType</span> <span class="token operator">=</span> <span class="token string">'left'</span> <span class="token operator">|</span> <span class="token string">'center'</span> <span class="token operator">|</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
</code></pre></div><p>在使用时，如果对table进行二次封装，它的值</p> <div class="language-react extra-class"><pre class="language-text"><code>const columns = [{
  align: 'right',
}]
</code></pre></div><p>此时会报错，类型推论会将align推论为string，而AlignType是字面量类型，没有string</p> <p>使用as进行断言就不会报错</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AlignType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rc-table/lib/interface.d.ts'</span><span class="token punctuation">;</span>

columns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  align<span class="token operator">:</span> <span class="token string">'right'</span> <span class="token keyword">as</span> <span class="token string">'right'</span>
  <span class="token comment">// 或者 align: 'right' as AlignType</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>table的filteredValue属性会使表格的filter字段受控 如果没设置好会导致table所有列的fliter失效，所以尽量不要用这个属性</p> <p>tooltip</p> <p>tooltip组件需要禁用时没有直接的disable属性，使用onchange事件进行回调</p> <div class="language-react extra-class"><pre class="language-text"><code>const checkTipVisible = (visible: boolean) =&gt; {
  VisibleCrtl.toggle(!Boolean(enableCreatePlan) ? visible : false);
};

&lt;Tooltip
  title={formatMessage({
    id: 'CREATE_OPERATING_PLAN_ERROR',
  })}
  visible={visible}
  onVisibleChange={checkTipVisible}
  &gt;
&lt;/Tooltip&gt;
</code></pre></div><p>Form</p> <p>在form.item中可以使用shouldUpdate包一层，然后将Form传入item的回调函数中</p> <p>这样做:</p> <p>1.可以在item中取到form的其他值，从而进行表单联动</p> <p>2.可以确保字段在更新时及时更新，相当于一次setState</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;Form.Item shouldUpdate&gt;
  {(form) =&gt; {
    const branches = form.getFieldValue('branches') || [];
    return (
      &lt;&gt;
      &lt;Form.List name=&quot;branches&quot;&gt;
        {(fields, operation) =&gt; {
          return (
            &lt;BranchSortTable
              readonly={readonly}
              data={branches}
              fields={fields}
              operation={operation}
              /&gt;
          );
        }}
      &lt;/Form.List&gt;
      &lt;/&gt;
    );
  }}
&lt;/Form.Item&gt;
</code></pre></div><p>验证</p> <p>表单提交时对有rules的item要进行校验，比较繁琐的写法像这样</p> <div class="language-react extra-class"><pre class="language-text"><code>const handleSubmit = async () =&gt; {
  await form.validateFields();
}
</code></pre></div><p>如果有单独的需要提前校验/接口校验的可以用validateFirst</p> <p>校验时可以用validator写</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;ProFormText
  readonly={readOnly}
  label={
    &lt;Text
      style={{ maxWidth: 110 }}
      ellipsis={{
        tooltip: formatMessage({ id: 'FORM_LABEL_NODE_NAME' }),
      }}
      &gt;
      {formatMessage({ id: 'FORM_LABEL_NODE_NAME' })}
    &lt;/Text&gt;
  }
  required
  validateFirst
  name=&quot;name&quot;
  rules={[
    {
      required: true,
      message: formatMessage({
        id: 'FORM_LABEL_PLACEHOLDER_INPUT',
      }),
    },
    {
      validator: async (_rule, value) =&gt; {
        if (!validateNameUnique(value, element.id)) {
          throw formatMessage({
            id: 'AUTO_FLOW_NAME_UNIQ_ERROR_MESSAGE',
          });
        }
      },
    },
  ]}
  fieldProps={{
    placeholder: formatMessage({
      id: 'AUTO_FLOW_LIMIT_CHAR_LENGTH_MESSAGE',
    }),
  }}
  /&gt;
</code></pre></div><p>获取字段的校验状态可以使用getFieldError/getFieldsError获取字段或者全部字段的验证信息</p> <p>namePath</p> <p>在form.item的name中使用数组，能够把不同的表单放到同一个对象中，而不是普通的key-value</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;Form.Item
  name={['a', 'select']}
  options={listData as treeItemType[]}
  readonly={isView}
&gt;
&lt;/Form.Item&gt;
&lt;Form.Item
  name={['a', 'input']}
  options={listData as treeItemType[]}
  readonly={isView}
&gt;
&lt;/Form.Item&gt;
</code></pre></div><p>如果namePath后面跟的是index，可以自动合并成数组</p> <p>namePath可以进行嵌套，输出对象数组的表单项</p> <div class="language-react extra-class"><pre class="language-text"><code>['1', '2','3'].map((index)=&gt; {
  &lt;Form.Item
    name={['a', 'select', index]}
    options={listData as treeItemType[]}
    readonly={isView}
  &gt;
  &lt;/Form.Item&gt;
})
</code></pre></div><p>自定义表单组件</p> <p>表单组件不一定非要input、select，也可以自己通过form.item填充，取值的时候使用get和set就比较方便</p> <div class="language-react extra-class"><pre class="language-text"><code>const handleChange = () =&gt; {
  labelsForm.setFieldsValue({
    tree: []
  });
}

const FormTree: React.FC&lt;{ value?: any }&gt; = (value) =&gt; {
  return (
    &lt;Tree
      isDirectoryTree
      searchAble
      searchingMode=&quot;filter&quot;
      treeData={value.value || []}
      onSelect={(selectKey, info) =&gt; {
        setSelectId({ key: selectKey, title: info?.node.title });
                    }}
      /&gt;
  );
};

&lt;ProForm.Item name=&quot;tree&quot; noStyle shouldUpdate&gt;
  &lt;FormTree /&gt;
&lt;/ProForm.Item&gt;
</code></pre></div><p>form之外的dom需要在form字段更新时重新render可以使用useWatch</p> <div class="language-react extra-class"><pre class="language-text"><code>import React from 'react';
import { Form, Input, InputNumber, Typography } from 'antd';

const Demo = () =&gt; {
  const [form] = Form.useForm&lt;{ name: string; age: number }&gt;();
  const nameValue = Form.useWatch('name', form);

  return (
    &lt;&gt;
      &lt;Form form={form} layout=&quot;vertical&quot; autoComplete=&quot;off&quot;&gt;
        &lt;Form.Item name=&quot;name&quot; label=&quot;Name (Watch to trigger rerender)&quot;&gt;
          &lt;Input /&gt;
        &lt;/Form.Item&gt;
        &lt;Form.Item name=&quot;age&quot; label=&quot;Age (Not Watch)&quot;&gt;
          &lt;InputNumber /&gt;
        &lt;/Form.Item&gt;
      &lt;/Form&gt;

      &lt;Typography&gt;
        &lt;pre&gt;Name Value: {nameValue}&lt;/pre&gt;
      &lt;/Typography&gt;
    &lt;/&gt;
  );
};

export default Demo;
</code></pre></div><p>给form item添加提示和自定义图标</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;Form.Item
  label=&quot;Field B&quot;
  tooltip={{ title: 'Tooltip with customize icon', icon: &lt;InfoCircleOutlined /&gt; }}
  &gt;
  &lt;Input placeholder=&quot;input placeholder&quot; /&gt;
&lt;/Form.Item&gt;
</code></pre></div><p>form的setFieldsValue 和 resetFields 不会触发 Form 的 onValuesChange，</p> <p>form的初始值initialValue在初始化的时候有初始值，此后不受控，无法更改。因此如果需要根据接口或者state更改初始化值，则需要在拿到正确初始值之前不渲染form，或者在state/接口更新之后使用setFieldValue更改该form的值。推荐第一种方式</p> <div class="language-react extra-class"><pre class="language-text"><code>const app = () =&gt; {
  if(state) {
		return &lt;div /&gt;
  }
  
  return &lt;Form.Item initialValue='1'&gt; &lt;input /&gt; &lt;/Form.Item&gt;
}
</code></pre></div><p>Modal</p> <p>如果在Modal的content中使用国际化，需要使用Modal的hooks</p> <div class="language-react extra-class"><pre class="language-text"><code>const [modal, contextHolder] = Modal.useModal();

modal.info({
  title: null,
  icon: null,
  okText: formatMessage({ id: 'ACTION_CONFIRM' }),
  className: styles.deleteCheckModal,
  content: (
    &lt;div&gt;
      &lt;div className={styles.deleteCheckModalTitle}&gt;
        {formatMessage({ id: 'TIPS' })}
      &lt;/div&gt;
      &lt;div className={styles.deleteCheckModalTips}&gt;
        &lt;InfoCircleFilled className=&quot;mr-6&quot; /&gt;
        {formatMessage({ id: 'CANOT_DELETE_TIPS' })}
      &lt;/div&gt;
      &lt;div className={styles.deleteCheckModalTable}&gt;
        &lt;ProTable
          pagination={false}
          scroll={{ y: 200 }}
          size=&quot;small&quot;
          dataSource={data}
          &gt;
          &lt;ProTable.Column title=&quot;ID&quot; dataIndex=&quot;id&quot; width={100} /&gt;
          &lt;ProTable.Column
            title={formatMessage({ id: 'PLAN_NAME' })}
            dataIndex=&quot;name&quot;
            /&gt;
        &lt;/ProTable&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  ),
});

return (
	&lt;&gt;{contextHolder}&lt;/&gt;
)
</code></pre></div><p>如果在modal中使用ref，在初次modal渲染时ref拿不到值，此时应该手动强制刷新一次modal子组件</p> <div class="language-react extra-class"><pre class="language-text"><code>const [Key, setKey] = useState(
  `${+new Date()}`,
);
// ref相关的事件改变时也要reset key，防止拿不到
const handleChange = () =&gt; {
  setKey(() =&gt; `${+new Date()}`);
};
&lt;Modal
  visible={visible}
  form={modalForm}
  title={formatMessage({
    id: 'ATTACHMENT_ADD',
  })}
  modalProps={{
    onCancel: () =&gt; {
      setVisible(false);
    },
  }}
  onVisibleChange={(visible) =&gt; {
    if (visible) {
      // 当modal打开后强制渲染一次 RichTextInput 否则获取不到ref
      setTimeout(() =&gt; {
        setImageAddressInputKey(() =&gt; `${+new Date()}`);
      }, 0);
    }
  }}&gt;
&lt;/ModalForm&gt;
</code></pre></div><p>原因：</p> <p>ant design的modal在渲染时如果同步渲染会堵塞react的事件，因此ant design的modal使用异步渲染，初次渲染是ref就绑定不到</p> <div class="language-react extra-class"><pre class="language-text"><code>// components/modal/confirm.tsx
  function render({ okText, cancelText, prefixCls: customizePrefixCls, ...props }: any) {
    /**
     * https://github.com/ant-design/ant-design/issues/23623
     *
     * Sync render blocks React event. Let's make this async.
     */
    setTimeout(() =&gt; {
      const runtimeLocale = getConfirmLocale();
      const { getPrefixCls, getIconPrefixCls } = globalConfig();
      // because Modal.config  set rootPrefixCls, which is different from other components
      const rootPrefixCls = getPrefixCls(undefined, getRootPrefixCls());
      const prefixCls = customizePrefixCls || `${rootPrefixCls}-modal`;
      const iconPrefixCls = getIconPrefixCls();

      reactRender(
        &lt;ConfirmDialog
          {...props}
          prefixCls={prefixCls}
          rootPrefixCls={rootPrefixCls}
          iconPrefixCls={iconPrefixCls}
          okText={okText || (props.okCancel ? runtimeLocale.okText : runtimeLocale.justOkText)}
          cancelText={cancelText || runtimeLocale.cancelText}
        /&gt;,
        container,
      );
    });
  }
</code></pre></div><p>可以基于modal的命令式包装弹框hooks，实现命令式的自定义弹框组件</p> <div class="language-react extra-class"><pre class="language-text"><code>export const useCustomModal = () =&gt; {
  const { formatMessage } = useIntl();
  const [modal, contextHolder] = Modal.useModal();
  
  const showModal = (props: showModalProps) =&gt; {
    const { tip, okText, onOk, className } = props;
    
    modal.info({
      title: null,
      icon: null,
      okText: okText ?? formatMessage('ACTION_CONFIRM'),
      className: className,
      content: (
        &lt;div className={styles.quotePlanModal}&gt;
          {data}
        &lt;/div&gt;
      ),
      onOk: () =&gt; {
        onOk?.();
      },
    });
  }
	return [showModal, contextHolder];
}
</code></pre></div><p>Select</p> <p>select的下拉框展开时，如果滚动页面的话会下拉框会移动位置，需要添加一个属性防止下拉框滚动</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;Select
getPopupContainer={(triggerNode) =&gt;triggerNode.parentNode}
  /&gt;
</code></pre></div><p>TreeSelect</p> <p>triggerNode.props非公开api</p> <h4 id="async-validator"><a href="#async-validator" class="header-anchor">#</a> async-validator</h4> <p>antd的form使用这个验证库</p> <p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import Schema from 'async-validator';
const descriptor = {
  name: {
    type: 'string',
    required: true,
    validator: (rule, value) =&gt; value === 'muji',
  },
  age: {
    type: 'number',
    asyncValidator: (rule, value) =&gt; {
      return new Promise((resolve, reject) =&gt; {
        if (value &lt; 18) {
          reject('too young');  // reject with error message
        } else {
          resolve();
        }
      });
    },
  },
};
const validator = new Schema(descriptor);
validator.validate({ name: 'muji' }, (errors, fields) =&gt; {
  if (errors) {
    // validation failed, errors is an array of all errors
    // fields is an object keyed by field name with an array of
    // errors per field
    return handleErrors(errors, fields);
  }
  // validation passed
});

// PROMISE USAGE
validator.validate({ name: 'muji', age: 16 }).then(() =&gt; {
  // validation passed or without error message
}).catch(({ errors, fields }) =&gt; {
  return handleErrors(errors, fields);
});
</code></pre></div><h4 id="scroll-into-view-if-needed"><a href="#scroll-into-view-if-needed" class="header-anchor">#</a> scroll-into-view-if-needed</h4> <p>滚动窗口组件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> scroll-into-view-if-needed
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import scrollIntoView from 'scroll-into-view-if-needed'
const node = document.getElementById('hero')

scrollIntoView(node, {
  // Your scroll actions will always be an array, even if there is nothing to scroll
  behavior: actions =&gt;
    // list is sorted from innermost (closest parent to your target) to outermost (often the document.body or viewport)
    actions.forEach(({ el, top, left }) =&gt; {
      // implement the scroll anyway you want
      el.scrollTop = top
      el.scrollLeft = left

      // If you need the relative scroll coordinates, for things like window.scrollBy style logic or whatever, just do the math
      const offsetTop = el.scrollTop - top
      const offsetLeft = el.scrollLeft - left
    }),
  // all the other options (scrollMode, block, inline) still work, so you don't need to reimplement them (unless you really really want to)
})
</code></pre></div><h4 id="可拖动宽度table"><a href="#可拖动宽度table" class="header-anchor">#</a> 可拖动宽度table</h4> <p>首先安装react-resizable</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-resizable <span class="token parameter variable">--save</span>
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import React, { PureComponent } from 'react';
import { Table } from 'antd';
import { Resizable } from 'react-resizable';
 
 
const ResizeableTitle = (props: { [x: string]: any; onResize: any; width: any; }) =&gt; {
  const { onResize, width, ...restProps } = props;
  if (!width) {
    return &lt;th {...restProps} /&gt;
  }
  return (
    &lt;Resizable width={width} height={0} onResize={onResize} draggableOpts={{ enableUserSelectHack: false }}&gt;
      &lt;th {...restProps} /&gt;
    &lt;/ Resizable &gt;
  )
}
 
class TableResize extends PureComponent&lt;any, any&gt; {
  constructor(props: any) {
    super(props);
  }
  state = {
    columns: this.props.columns
  };
 
  components = {
    header: {
      cell: ResizeableTitle,
    },
  };
 
  handleResize = (index: number) =&gt; (e: any, { size }: any) =&gt; {
    this.setState(({ columns }: any) =&gt; {
      const nextColumns = [...columns];
      nextColumns[index] = {
        ...nextColumns[index],
        width: size.width,
      };
      return { columns: nextColumns };
    });
  };
 
  render() {
    const columns = this.state.columns.map((col: any, index: number) =&gt; ({
      ...col,
      onHeaderCell: (column: { width: any; }) =&gt; ({
        width: column.width,
        onResize: this.handleResize(index),
      }),
    }));
 
    return &lt;Table
      components={this.components}
      columns={columns}
      rowKey=&quot;id&quot;
      border                                  // 不要这个属性也有拖拽表示
      pagination={false}
      rowSelection={this.props.rowSelection}  // 选中行的事件，不需要可删除
      dataSource={this.props.dataSource}      
      onChange={(pagination: any, filters: any) =&gt; this.props.handleTableChange(pagination, filters)} /&gt; //表格筛选功能触发的事件，不需要可删除
  }
}
 
export default TableResize
</code></pre></div><p>使用组件</p> <div class="language-react extra-class"><pre class="language-text"><code>import TableReszie from '@components/TableResize'

&lt;TableReszie
  dataSource={dataSource}
  columns={columns}
  loading={loading}
  handleTableChange={handleTableChange}
/&gt;
</code></pre></div><p>或者换用组件：https://ali-react-table.js.org/docs/pipeline/features/column-resize/</p> <h3 id="xrender"><a href="#xrender" class="header-anchor">#</a> XRender</h3> <h3 id="pro-components"><a href="#pro-components" class="header-anchor">#</a> pro-components</h3> <p>ProComponents 是基于 Ant Design 而开发的模板组件，提供了更高级别的抽象支持，开箱即用。可以显著的提升制作 CRUD 页面的效率，更加专注于页面。</p> <p>ProLayout 解决布局的问题，提供开箱即用的菜单和面包屑功能</p> <p>ProTable表格模板组件，抽象网络请求和表格格式化</p> <p>ProForm表单模板组件，预设常见布局和行为</p> <p>ProCard提供卡片切分以及栅格布局能力</p> <p>ProDescription定义列表模板组件，ProTable 的配套组件</p> <p>ProSkeleton页面级别的骨架屏</p> <p>Proform有很多ProFormFields 表单项组件。这些组件本质上是 Form.Item 和 组件的结合，我们可以帮他们当成一个 FormItem 来使用，并且支持各种 <code>props</code>。每个表单项都支持 <code>fieldProps</code> 属性来支持设置输入组件的<code>props</code>。 同时支持了 <code>placeholder</code> 的透传，你可以直接在组件上设置 <code>placeholder</code>。</p> <p>每个表单项同时也支持了 <code>readonly</code> ，不同的组件会有不同的只读样式，与 <code>disable</code> 相比 <code>readonly</code> 展示更加友好。生成的 dom 也更小，比如 ProFormDigit 会自动格式化小数位数。</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;ProFormText
  width=&quot;md&quot;
  name=&quot;name&quot;
  label=&quot;签约客户名称&quot;
  tooltip=&quot;最长为 24 位&quot;
  placeholder=&quot;请输入名称&quot;
  /&gt;
&lt;ProFormDateRangePicker name=&quot;contractTime&quot; label=&quot;合同生效时间&quot; /&gt;
&lt;ProFormSelect
  width=&quot;xs&quot;
  options={[
    {
      value: 'time',
      label: '履行完终止',
    },
  ]}
  name=&quot;unusedMode&quot;
  label=&quot;合同约定失效效方式&quot;
  /&gt;
</code></pre></div><h3 id="react-query"><a href="#react-query" class="header-anchor">#</a> react-query</h3> <p>React Query 通常被描述为 React 缺少的数据获取(data-fetching)库，但是从更广泛的角度来看，它使 React 程序中的<strong>获取，缓存，同步和更新服务器状态</strong>变得轻而易举</p> <p>尽管大多数传统状态管理库非常适合用于处理客户端状态，但是它们<strong>并不适合处理异步或服务器状态</strong>。 这是因为<strong>服务器状态完全不同</strong>。对于初学者，服务器状态</p> <ul><li>远程保留在您无法控制或拥有的位置</li> <li>需要异步 API 进行获取和更新</li> <li>意味着共享所有权，可以在你不知情的情况下被其他人改变</li> <li>如果不小心，可能会在应用中变得&quot;过时&quot;</li></ul> <p>一旦你掌握了应用中服务器状态的本质，你会遇到更多的挑战，例如:</p> <ul><li>缓存...（这可能是编程中最难的事情）</li> <li>将对同一数据的多个请求重复数据集合到单个请求中</li> <li>在后台更新&quot;过时&quot;的数据</li> <li>知道数据何时&quot;过时&quot;</li> <li>尽可能快地反映数据更新</li> <li>分页和延迟加载数据等性能优化</li> <li>管理服务器状态的内存和 GC</li> <li>结构化共享并存储查询结果s</li></ul> <p>如果您没有被这个列表压垮，那么这一定意味着您可能已经解决了所有的服务器状态问题，值得获奖。 然而，如果你和大多数人一样，你要么还没有解决所有这些挑战，要么还没有解决大部分挑战，我们只是触及了表面!</p> <p>React Query 无疑是管理服务器状态的最佳库之一。它非常好用，<strong>开箱即用，无需配置</strong>，并且可以随着应用的增长而根据自己的喜好<strong>进行定制</strong>。</p> <p>React Query 使您可以击败并征服棘手的服务器状态挑战和障碍，并在开始控制您的应用数据之前对其进行控制。</p> <p>从更专业的角度来说，React Query 可能会:</p> <ul><li>帮助您从应用中删除许多复杂和容易引起误解的代码行，用少量的 React 查询逻辑代替</li> <li>使您的应用更易于维护，更易于构建新功能，而不必担心如何连接新的服务器状态数据源</li> <li>通过应用的 GUI 及执行层面的更快的数据响应，直接影响您的最终用户</li> <li>潜在地帮助您节省带宽和提高内存性能</li></ul> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> i react-query
<span class="token comment"># or</span>
$ <span class="token function">yarn</span> <span class="token function">add</span> react-query
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  useQuery<span class="token punctuation">,</span>
  useMutation<span class="token punctuation">,</span>
  useQueryClient<span class="token punctuation">,</span>
  QueryClient<span class="token punctuation">,</span>
  QueryClientProvider<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-query'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getTodos<span class="token punctuation">,</span> postTodo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../my-api'</span>

<span class="token comment">// 创建一个 client</span>
<span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token comment">// 提供 client 至 App</span>
    <span class="token operator">&lt;</span>QueryClientProvider client<span class="token operator">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Todos <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>QueryClientProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 访问 client</span>
  <span class="token keyword">const</span> queryClient <span class="token operator">=</span> <span class="token function">useQueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 查询</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">'todos'</span><span class="token punctuation">,</span> getTodos<span class="token punctuation">)</span>

  <span class="token comment">// 修改</span>
  <span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token function">useMutation</span><span class="token punctuation">(</span>postTodo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 错误处理和刷新</span>
      queryClient<span class="token punctuation">.</span><span class="token function">invalidateQueries</span><span class="token punctuation">(</span><span class="token string">'todos'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>query<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>button
        onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          mutation<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Do Laundry'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        Add Todo
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="开发工具"><a href="#开发工具" class="header-anchor">#</a> 开发工具</h4> <p>React Query 自带了专用的开发工具。它们有助于可视化 React Query 的所有内部工作原理</p> <p>devtools 包被拆分为<code>react-query/devtools</code>包。不需要安装任何额外的东西</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ReactQueryDevtools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-query/devtools'</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>QueryClientProvider client<span class="token operator">=</span><span class="token punctuation">{</span>queryClient<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* The rest of your application */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>ReactQueryDevtools initialIsOpen<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>QueryClientProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="h5ds"><a href="#h5ds" class="header-anchor">#</a> h5ds</h3> <p>H5DS （HTML5 design software）可以理解成一款做H5的在线工具，H5就是在手机上滑动的页面，像易企秀，百度H5，wps秀堂，Maka一样的在线工具。</p> <p>https://github.com/h5ds/h5ds</p> <div class="language-react extra-class"><pre class="language-text"><code>
import 'h5ds/editor/style.css';

import React, { Component } from 'react';
import H5dsEditor from 'h5ds/editor';

class Editor extends Component {
  constructor(props) {
    super(props);
    this.state = {
      data: null
    };
  }

  /**
   * 保存APP
   */
  saveApp = async data =&gt; {
    console.log('saveApp -&gt;', data);
  };

  /**
   * 发布 app
   */
  publishApp = async data =&gt; {
    console.log('publishApp -&gt;', data);
  };

  componentDidMount() {
    // 模拟异步加载数，设置 defaultData 会默认加载一个初始化数据
    setTimeout(() =&gt; {
      this.setState({ data: 'defaultData' });
    }, 100);
  }

  /**
   * 使用编辑器部分
   */
  render() {
    const { data } = this.state;
    return (
      &lt;H5dsEditor
        plugins={[]} // 第三方插件包
        data={data}
        options={{
          publishApp: this.publishApp,
          saveApp: this.saveApp, // 保存应用
          appId: 'test_app_id' // 当前appId
        }}
      /&gt;
    );
  }
}
export default Editor;
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3979e060.js" defer></script><script src="/assets/js/2.0f8cbb55.js" defer></script><script src="/assets/js/1.ff82b27c.js" defer></script><script src="/assets/js/73.7eb2e800.js" defer></script>
  </body>
</html>
