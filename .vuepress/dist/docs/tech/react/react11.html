<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React（十一）</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.0503e0f3.css" as="style"><link rel="preload" href="/assets/js/app.3979e060.js" as="script"><link rel="preload" href="/assets/js/2.0f8cbb55.js" as="script"><link rel="preload" href="/assets/js/1.ff82b27c.js" as="script"><link rel="preload" href="/assets/js/63.410bfe1e.js" as="script"><link rel="prefetch" href="/assets/js/10.d9850768.js"><link rel="prefetch" href="/assets/js/100.a33654f4.js"><link rel="prefetch" href="/assets/js/101.d3bc1c79.js"><link rel="prefetch" href="/assets/js/102.02bbfd1e.js"><link rel="prefetch" href="/assets/js/103.c9de5560.js"><link rel="prefetch" href="/assets/js/104.7c2b76db.js"><link rel="prefetch" href="/assets/js/105.ea3ac79c.js"><link rel="prefetch" href="/assets/js/106.d54e3045.js"><link rel="prefetch" href="/assets/js/107.c142f695.js"><link rel="prefetch" href="/assets/js/108.fe2c9c19.js"><link rel="prefetch" href="/assets/js/109.59b55101.js"><link rel="prefetch" href="/assets/js/11.62caceeb.js"><link rel="prefetch" href="/assets/js/110.c657b6f8.js"><link rel="prefetch" href="/assets/js/111.4eadf9c5.js"><link rel="prefetch" href="/assets/js/112.fce38ecf.js"><link rel="prefetch" href="/assets/js/113.ee6322e2.js"><link rel="prefetch" href="/assets/js/114.1ed20fd8.js"><link rel="prefetch" href="/assets/js/115.aa405ee0.js"><link rel="prefetch" href="/assets/js/116.d1b4c413.js"><link rel="prefetch" href="/assets/js/117.965d1926.js"><link rel="prefetch" href="/assets/js/118.b1d5b9ca.js"><link rel="prefetch" href="/assets/js/119.e4e766bc.js"><link rel="prefetch" href="/assets/js/12.abd8d9de.js"><link rel="prefetch" href="/assets/js/120.f569b061.js"><link rel="prefetch" href="/assets/js/121.e3915f79.js"><link rel="prefetch" href="/assets/js/122.3a2b3d34.js"><link rel="prefetch" href="/assets/js/123.cbf985ea.js"><link rel="prefetch" href="/assets/js/124.c3d8b6fc.js"><link rel="prefetch" href="/assets/js/125.dfe970a3.js"><link rel="prefetch" href="/assets/js/126.f5165054.js"><link rel="prefetch" href="/assets/js/127.ffb31d35.js"><link rel="prefetch" href="/assets/js/128.bf7eb0b3.js"><link rel="prefetch" href="/assets/js/129.76b0ac54.js"><link rel="prefetch" href="/assets/js/13.763c094c.js"><link rel="prefetch" href="/assets/js/130.cb661ef6.js"><link rel="prefetch" href="/assets/js/131.b215b4cc.js"><link rel="prefetch" href="/assets/js/132.bdf6b89f.js"><link rel="prefetch" href="/assets/js/133.a13e43ca.js"><link rel="prefetch" href="/assets/js/134.f858c56e.js"><link rel="prefetch" href="/assets/js/135.0e05a297.js"><link rel="prefetch" href="/assets/js/136.ff47beeb.js"><link rel="prefetch" href="/assets/js/137.7dcf182f.js"><link rel="prefetch" href="/assets/js/138.dd2c3c8c.js"><link rel="prefetch" href="/assets/js/139.db36e4eb.js"><link rel="prefetch" href="/assets/js/14.784100b6.js"><link rel="prefetch" href="/assets/js/140.05811a56.js"><link rel="prefetch" href="/assets/js/141.32b8052b.js"><link rel="prefetch" href="/assets/js/142.2c061186.js"><link rel="prefetch" href="/assets/js/143.113df61a.js"><link rel="prefetch" href="/assets/js/144.2c01c336.js"><link rel="prefetch" href="/assets/js/145.a8fe7a8a.js"><link rel="prefetch" href="/assets/js/146.bb5b7e16.js"><link rel="prefetch" href="/assets/js/147.213b17a7.js"><link rel="prefetch" href="/assets/js/148.dd7a3258.js"><link rel="prefetch" href="/assets/js/149.b3f9adc5.js"><link rel="prefetch" href="/assets/js/15.3aa73286.js"><link rel="prefetch" href="/assets/js/150.4ab9a505.js"><link rel="prefetch" href="/assets/js/151.d04eb475.js"><link rel="prefetch" href="/assets/js/152.c547ae2c.js"><link rel="prefetch" href="/assets/js/153.3fa58002.js"><link rel="prefetch" href="/assets/js/154.cd2cc012.js"><link rel="prefetch" href="/assets/js/155.0160c441.js"><link rel="prefetch" href="/assets/js/16.7886627b.js"><link rel="prefetch" href="/assets/js/17.a4c76a6c.js"><link rel="prefetch" href="/assets/js/18.995eb54b.js"><link rel="prefetch" href="/assets/js/19.edc682a7.js"><link rel="prefetch" href="/assets/js/20.87ca556d.js"><link rel="prefetch" href="/assets/js/21.4b328dcc.js"><link rel="prefetch" href="/assets/js/22.91d15e78.js"><link rel="prefetch" href="/assets/js/23.17bfc3dd.js"><link rel="prefetch" href="/assets/js/24.c0d84a10.js"><link rel="prefetch" href="/assets/js/25.2717e191.js"><link rel="prefetch" href="/assets/js/26.3764ddb4.js"><link rel="prefetch" href="/assets/js/27.e98913ec.js"><link rel="prefetch" href="/assets/js/28.a4481108.js"><link rel="prefetch" href="/assets/js/29.3d82d38d.js"><link rel="prefetch" href="/assets/js/3.e2aae122.js"><link rel="prefetch" href="/assets/js/30.7e9979a2.js"><link rel="prefetch" href="/assets/js/31.fa479c29.js"><link rel="prefetch" href="/assets/js/32.901576de.js"><link rel="prefetch" href="/assets/js/33.8dafc45c.js"><link rel="prefetch" href="/assets/js/34.6bbddd9b.js"><link rel="prefetch" href="/assets/js/35.394c80b9.js"><link rel="prefetch" href="/assets/js/36.5246333d.js"><link rel="prefetch" href="/assets/js/37.49802bfd.js"><link rel="prefetch" href="/assets/js/38.36ae0914.js"><link rel="prefetch" href="/assets/js/39.791184a0.js"><link rel="prefetch" href="/assets/js/4.30c2ba05.js"><link rel="prefetch" href="/assets/js/40.eb1a9cc1.js"><link rel="prefetch" href="/assets/js/41.31179942.js"><link rel="prefetch" href="/assets/js/42.22c31ea4.js"><link rel="prefetch" href="/assets/js/43.e82e343d.js"><link rel="prefetch" href="/assets/js/44.95e68751.js"><link rel="prefetch" href="/assets/js/45.b99232d2.js"><link rel="prefetch" href="/assets/js/46.21e9dae9.js"><link rel="prefetch" href="/assets/js/47.e30bba7c.js"><link rel="prefetch" href="/assets/js/48.6c0d14cd.js"><link rel="prefetch" href="/assets/js/49.ed1b480b.js"><link rel="prefetch" href="/assets/js/5.c5fba3ad.js"><link rel="prefetch" href="/assets/js/50.f500b9ed.js"><link rel="prefetch" href="/assets/js/51.3671246f.js"><link rel="prefetch" href="/assets/js/52.7915148f.js"><link rel="prefetch" href="/assets/js/53.39ece5d9.js"><link rel="prefetch" href="/assets/js/54.358ca4aa.js"><link rel="prefetch" href="/assets/js/55.244837be.js"><link rel="prefetch" href="/assets/js/56.e7164f10.js"><link rel="prefetch" href="/assets/js/57.3c6f5aa2.js"><link rel="prefetch" href="/assets/js/58.84c83603.js"><link rel="prefetch" href="/assets/js/59.ec4edc7d.js"><link rel="prefetch" href="/assets/js/6.9184d4d1.js"><link rel="prefetch" href="/assets/js/60.c2346e02.js"><link rel="prefetch" href="/assets/js/61.8d99ca4c.js"><link rel="prefetch" href="/assets/js/62.f6bea4bf.js"><link rel="prefetch" href="/assets/js/64.960d5951.js"><link rel="prefetch" href="/assets/js/65.e6a8895b.js"><link rel="prefetch" href="/assets/js/66.41092e16.js"><link rel="prefetch" href="/assets/js/67.062b95dc.js"><link rel="prefetch" href="/assets/js/68.58c65f95.js"><link rel="prefetch" href="/assets/js/69.d1e1b68b.js"><link rel="prefetch" href="/assets/js/7.85fc951e.js"><link rel="prefetch" href="/assets/js/70.8294a611.js"><link rel="prefetch" href="/assets/js/71.66e44dac.js"><link rel="prefetch" href="/assets/js/72.46bd34f2.js"><link rel="prefetch" href="/assets/js/73.7eb2e800.js"><link rel="prefetch" href="/assets/js/74.8e05f264.js"><link rel="prefetch" href="/assets/js/75.21e0b9b1.js"><link rel="prefetch" href="/assets/js/76.c2c92cec.js"><link rel="prefetch" href="/assets/js/77.799df679.js"><link rel="prefetch" href="/assets/js/78.1605b33c.js"><link rel="prefetch" href="/assets/js/79.659e7e78.js"><link rel="prefetch" href="/assets/js/80.6f99ca65.js"><link rel="prefetch" href="/assets/js/81.7a0caba9.js"><link rel="prefetch" href="/assets/js/82.19629840.js"><link rel="prefetch" href="/assets/js/83.29093f51.js"><link rel="prefetch" href="/assets/js/84.64568258.js"><link rel="prefetch" href="/assets/js/85.3d88e3b2.js"><link rel="prefetch" href="/assets/js/86.0a93f933.js"><link rel="prefetch" href="/assets/js/87.07c51a25.js"><link rel="prefetch" href="/assets/js/88.aa6be8e5.js"><link rel="prefetch" href="/assets/js/89.6ad93f1f.js"><link rel="prefetch" href="/assets/js/90.87c8c6e5.js"><link rel="prefetch" href="/assets/js/91.57c509b5.js"><link rel="prefetch" href="/assets/js/92.c8b02e25.js"><link rel="prefetch" href="/assets/js/93.fee86c6c.js"><link rel="prefetch" href="/assets/js/94.ab3bad19.js"><link rel="prefetch" href="/assets/js/95.cfaa79dc.js"><link rel="prefetch" href="/assets/js/96.c63afef5.js"><link rel="prefetch" href="/assets/js/97.123374a6.js"><link rel="prefetch" href="/assets/js/98.53cfb154.js"><link rel="prefetch" href="/assets/js/99.8fe1f067.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0503e0f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>​      前端框架，快速开发页面，函数式编程，与后端api快速搭建</p> <h2 id="react库"><a href="#react库" class="header-anchor">#</a> react库</h2> <h3 id="react-datasheet"><a href="#react-datasheet" class="header-anchor">#</a> react-datasheet</h3> <p>react中构建像excel一样功能的库</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-datasheet <span class="token parameter variable">--save</span>
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import ReactDataSheet from 'react-datasheet';
// Be sure to include styles at some point, probably during your bootstrapping
import 'react-datasheet/lib/react-datasheet.css';

class App extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      grid: [
        [{ value: 1 }, { value: 3 }],
        [{ value: 2 }, { value: 4 }],
      ],
    };
  }
  render() {
    return (
      &lt;ReactDataSheet
        data={this.state.grid}
        valueRenderer={cell =&gt; cell.value}
        onCellsChanged={changes =&gt; {
          const grid = this.state.grid.map(row =&gt; [...row]);
          changes.forEach(({ cell, row, col, value }) =&gt; {
            grid[row][col] = { ...grid[row][col], value };
          });
          this.setState({ grid });
        }}
      /&gt;
    );
  }
}
</code></pre></div><h3 id="rrweb"><a href="#rrweb" class="header-anchor">#</a> rrweb</h3> <p>录制web操作、重放</p> <p>rrweb 主要由 3 部分组成：</p> <ul><li><strong><a href="https://github.com/rrweb-io/rrweb/tree/master/packages/rrweb-snapshot/" target="_blank" rel="noopener noreferrer">rrweb-snapshot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>，包含 snapshot 和 rebuild 两个功能。snapshot 用于将 DOM 及其状态转化为可序列化的数据结构并添加唯一标识；rebuild 则是将 snapshot 记录的数据结构重建为对应的 DOM。</li> <li><strong><a href="https://github.com/rrweb-io/rrweb" target="_blank" rel="noopener noreferrer">rrweb<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>，包含 record 和 replay 两个功能。record 用于记录 DOM 中的所有变更（mutation）；replay 则是将记录的变更按照对应的时间一一重放。</li> <li><strong><a href="https://github.com/rrweb-io/rrweb/tree/master/packages/rrweb-player/" target="_blank" rel="noopener noreferrer">rrweb-player<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong>，为 rrweb 提供一套 UI 控件，提供基于 GUI 的暂停、快进、拖拽至任意时间点播放等功能。</li></ul> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> rrweb
</code></pre></div><p>rrweb 同时提供 commonJS 和 ES modules 两种格式的打包文件，易于和常见的打包工具配合使用。</p> <p>使用，录制</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>rrweb<span class="token punctuation">.</span><span class="token function">record</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用任意方式存储 event</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> stopFn <span class="token operator">=</span> rrweb<span class="token punctuation">.</span><span class="token function">record</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>events<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 当事件数量大于 100 时停止录制</span>
      <span class="token function">stopFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>回放</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> replayer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">rrweb<span class="token punctuation">.</span>Replayer</span><span class="token punctuation">(</span>events<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 播放</span>
replayer<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 从第 3 秒的内容开始播放</span>
replayer<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 暂停</span>
replayer<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 暂停至第 5 秒处</span>
replayer<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 销毁播放器 (提示： 这个操作不可逆)</span>
replayer<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="react-icons"><a href="#react-icons" class="header-anchor">#</a> react-icons</h3> <p>包含比较流行的icons</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-icons <span class="token parameter variable">--save</span>
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import { FaBeer } from 'react-icons/fa';

class Question extends React.Component {
    render() {
        return &lt;h3&gt; Lets go for a &lt;FaBeer /&gt;? &lt;/h3&gt;
    }
}
</code></pre></div><p>https://github.com/react-icons/react-icons</p> <h3 id="eventbus"><a href="#eventbus" class="header-anchor">#</a> eventbus</h3> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> events
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//event.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>EventEmitter<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'events'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//发布</span>
<span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">'./event'</span>

<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">,</span><span class="token string">'来自father的info'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Father
<span class="token comment">//订阅</span>
<span class="token comment">//emitter.addListener()事件监听订阅</span>
<span class="token comment">//emitter.removeListener()进行事件销毁，取消订阅</span>
<span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">'./event'</span>

<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mitt"><a href="#mitt" class="header-anchor">#</a> mitt</h3> <p>很小的发布订阅库 200b</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> mitt
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">'mitt'</span>

<span class="token keyword">const</span> emitter <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// listen to an event</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment">// listen to all events</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token comment">// fire an event</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'b'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// clearing all events</span>
emitter<span class="token punctuation">.</span>all<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// working with handler references:</span>
<span class="token keyword">function</span> <span class="token function">onFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> onFoo<span class="token punctuation">)</span>   <span class="token comment">// listen</span>
emitter<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> onFoo<span class="token punctuation">)</span>  <span class="token comment">// unlisten</span>
</code></pre></div><h3 id="react-flow"><a href="#react-flow" class="header-anchor">#</a> react-flow</h3> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> react-flow-renderer
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import React from 'react';
import ReactFlow from 'react-flow-renderer';

const elements = [
  { id: '1', type: 'input', data: {lable: 'Node 1'},position: {x: 250, y: 50}},
  { id: '2', data: {lable: &lt;div&gt;Node 2&lt;/div&gt;}, position: {x: 100, y: 100}},
  { id: 'el-2', source: '1', targetL '2', animated: true}
]

export default ()=&gt; &lt;ReactFlow elements={elements}&gt;&lt;/ReactFlow&gt;
</code></pre></div><p>React Flow有两个背景变体：点和线。也可以通过将其作为子级传递给<code>ReactFlow</code>组件来使用它</p> <div class="language-react extra-class"><pre class="language-text"><code>import ReactFlow, { Background } from 'react-flow-renderer';

const FlowWithBackground = () =&gt; (
  &lt;ReactFlow elements={elements}&gt;
    &lt;Background
      variant=&quot;dots&quot;
      gap={12}
      size={4}
    /&gt;
  &lt;/ReactFlow&gt;
);
</code></pre></div><p>可以通过将mini-map插件作为子级传递给<code>ReactFlow</code>组件来使用它：</p> <div class="language-react extra-class"><pre class="language-text"><code>import ReactFlow, { MiniMap } from 'react-flow-renderer';

const FlowWithMiniMap = () =&gt; (
  &lt;ReactFlow elements={elements}&gt;
    &lt;MiniMap
      nodeColor={(node) =&gt; {
        switch (node.type) {
          case 'input': return 'red';
          case 'default': return '#00ff00';
          case 'output': return 'rgb(0,0,255)';
          default: return '#eee';
        }
      }}
    /&gt;
  &lt;/ReactFlow&gt;
);
</code></pre></div><p>控制面板包含zoom-in、zoom-out、fit-view和一个锁定/解锁按钮。</p> <div class="language-react extra-class"><pre class="language-text"><code>import ReactFlow, { Controls } from 'react-flow-renderer';

const FlowWithControls = () =&gt; (
  &lt;ReactFlow elements={elements}&gt;
    &lt;Controls /&gt;
  &lt;/ReactFlow&gt;
);
</code></pre></div><p>如果需要访问<code>ReactFlow</code>组件外部的React Flow的内部状态和操作，可以用<code>ReactFlowProvider</code>组件包装它</p> <div class="language-react extra-class"><pre class="language-text"><code>import ReactFlow, { ReactFlowProvider } from 'react-flow-renderer';

const FlowWithOwnProvider = () =&gt; (
  &lt;ReactFlowProvider&gt;
    &lt;ReactFlow
      elements={elements}
      onElementClick={onElementClick}
      onConnect={onConnect}
    /&gt;
  &lt;/ReactFlowProvider&gt;
);
</code></pre></div><p>https://www.5axxw.com/wiki/content/obkffc</p> <h4 id="流程树dagrejs"><a href="#流程树dagrejs" class="header-anchor">#</a> 流程树Dagrejs</h4> <p>配合Dagrejs可以画出自动布局的流程图</p> <div class="language-react extra-class"><pre class="language-text"><code>import React, { useCallback } from 'react';
import ReactFlow, { addEdge, ConnectionLineType, useNodesState, useEdgesState } from 'reactflow';
import dagre from 'dagre';
import 'reactflow/dist/style.css';

import { initialNodes, initialEdges } from './nodes-edges.js';

import './index.css';

const dagreGraph = new dagre.graphlib.Graph();
dagreGraph.setDefaultEdgeLabel(() =&gt; ({}));

const nodeWidth = 172;
const nodeHeight = 36;

const getLayoutedElements = (nodes, edges, direction = 'TB') =&gt; {
  const isHorizontal = direction === 'LR';
  dagreGraph.setGraph({ rankdir: direction });

  nodes.forEach((node) =&gt; {
    dagreGraph.setNode(node.id, { width: nodeWidth, height: nodeHeight });
  });

  edges.forEach((edge) =&gt; {
    dagreGraph.setEdge(edge.source, edge.target);
  });

  dagre.layout(dagreGraph);

  nodes.forEach((node) =&gt; {
    const nodeWithPosition = dagreGraph.node(node.id);
    node.targetPosition = isHorizontal ? 'left' : 'top';
    node.sourcePosition = isHorizontal ? 'right' : 'bottom';

    // We are shifting the dagre node position (anchor=center center) to the top left
    // so it matches the React Flow node anchor point (top left).
    node.position = {
      x: nodeWithPosition.x - nodeWidth / 2,
      y: nodeWithPosition.y - nodeHeight / 2,
    };

    return node;
  });

  return { nodes, edges };
};

const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(
  initialNodes,
  initialEdges
);

const LayoutFlow = () =&gt; {
  const [nodes, setNodes, onNodesChange] = useNodesState(layoutedNodes);
  const [edges, setEdges, onEdgesChange] = useEdgesState(layoutedEdges);

  const onConnect = useCallback(
    (params) =&gt;
      setEdges((eds) =&gt;
        addEdge({ ...params, type: ConnectionLineType.SmoothStep, animated: true }, eds)
      ),
    []
  );
  const onLayout = useCallback(
    (direction) =&gt; {
      const { nodes: layoutedNodes, edges: layoutedEdges } = getLayoutedElements(
        nodes,
        edges,
        direction
      );

      setNodes([...layoutedNodes]);
      setEdges([...layoutedEdges]);
    },
    [nodes, edges]
  );

  return (
    &lt;div className=&quot;layoutflow&quot;&gt;
      &lt;ReactFlow
        nodes={nodes}
        edges={edges}
        onNodesChange={onNodesChange}
        onEdgesChange={onEdgesChange}
        onConnect={onConnect}
        connectionLineType={ConnectionLineType.SmoothStep}
        fitView
      /&gt;
      &lt;div className=&quot;controls&quot;&gt;
        &lt;button onClick={() =&gt; onLayout('TB')}&gt;vertical layout&lt;/button&gt;
        &lt;button onClick={() =&gt; onLayout('LR')}&gt;horizontal layout&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export default LayoutFlow;
</code></pre></div><h4 id="下载图片"><a href="#下载图片" class="header-anchor">#</a> 下载图片</h4> <div class="language-react extra-class"><pre class="language-text"><code>import React from 'react';
import { toPng } from 'html-to-image';

function downloadImage(dataUrl) {
  const a = document.createElement('a');

  a.setAttribute('download', 'reactflow.png');
  a.setAttribute('href', dataUrl);
  a.click();
}

function DownloadButton() {
  const onClick = () =&gt; {
    toPng(document.querySelector('.react-flow'), {
      filter: (node) =&gt; {
        // we don't want to add the minimap and the controls to the image
        if (
          node?.classList?.contains('react-flow__minimap') ||
          node?.classList?.contains('react-flow__controls')
        ) {
          return false;
        }

        return true;
      },
    }).then(downloadImage);
  };

  return (
    &lt;button className=&quot;download-btn&quot; onClick={onClick}&gt;
      Download Image
    &lt;/button&gt;
  );
}

export default DownloadButton;
</code></pre></div><h3 id="react-children-utilities"><a href="#react-children-utilities" class="header-anchor">#</a> react-children-utilities</h3> <p>返回组件中的文字</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> react-children-utilities
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import React from 'react';
import Children from 'react-children-utilities';

const MyComponent = ({ children }) =&gt; {
  const onlySpans = Children.filter(children, (child) =&gt; child.type === 'span');
  return &lt;div&gt;{onlySpans}&lt;/div&gt;;
};
</code></pre></div><p>其他api：</p> <p>https://www.npmjs.com/package/react-children-utilities</p> <h3 id="react-intl-universal"><a href="#react-intl-universal" class="header-anchor">#</a> react-intl-universal</h3> <p>不建议使用react-intl，而使用React-intl-universal实现</p> <p>建立英文和中文语言包,可以是json或者js文件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> en_US <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'hello'</span><span class="token operator">:</span><span class="token string">'nihao'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'age'</span><span class="token operator">:</span> <span class="token string">'30'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'changelang'</span><span class="token operator">:</span> <span class="token string">'qiehuanyuyan'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> en_US
</code></pre></div><p>中文包</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> zh_CN <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'hello'</span><span class="token operator">:</span><span class="token string">'nihao'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'age'</span><span class="token operator">:</span> <span class="token string">'30'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'changelang'</span><span class="token operator">:</span> <span class="token string">'qiehuanyuyan'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> zh_CN
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import intl from 'react-intl-universal'
import cn from '../../assets/locals/zh-CN'
import us from '../../assets'

class IntlExample extends React.Component{
  constructor(){
    super();
    this.locals = {
      'zh_CN': cn,
      'en_US': us
    }
    this.state = {
      intl: cn
    }
  }
  
  componentDidMount() {
    this.initLocale();
  }
  initLocale(locale=&quot;zh_CN&quot;){
    
  }
}
</code></pre></div><h3 id="uuid"><a href="#uuid" class="header-anchor">#</a> uuid</h3> <p>uuid是通用唯一识别码(Universally Unique Identifier)的缩写。是一种软件建构辨准，亦为开发软件基金会组织在分布式计算环境领域的一部分。其目的是让分布式系统中的所有元素具有唯一的辨识信息，而不需要通过中央控制端来做辨识信息的指定。</p> <p>UUID由一组32位数的16进制数字构成。对于UUID，就算每纳秒产生一百万个UUID，要花100亿年才会将所有UUID用完。</p> <p>格式</p> <p>uuid32个16进制数字用连字号分成五组来显示，所以共有36个字符</p> <p>UUID版本通过M表示，当前规范有5个版本，可选值为1、2、3、4、5，这5个版本使用不同的算法，利用不同的信息产生UUID，各版本有各版本的优势，具体来说：</p> <p>uuid.v1()：创建版本1(时间戳)UUID</p> <p>uuid.v3()：创建版本3(md5命名空间)UUID</p> <p>uuid.v4()：创建版本4(随机)UUID</p> <p>uuid.v5()：创建版本5(带SHA-1的命名空间)IIOD</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> uuid 
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> v4 <span class="token keyword">as</span> uuidv4<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'uuid'</span>

<span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>可以使用uuid进行验证登陆,未登陆状态下生产uuid</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> uuid <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'uuid'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>uuid<span class="token punctuation">)</span><span class="token punctuation">{</span>
  sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'uuid'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'uuid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> uuid <span class="token operator">=</span> sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'uuid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>uuid<span class="token punctuation">)</span><span class="token punctuation">{</span>
    sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'uuid'</span><span class="token punctuation">,</span><span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="k-bar"><a href="#k-bar" class="header-anchor">#</a> K-bar</h3> <p>k-bar可以给react部署的站点提供一个舒服的搜索框样式</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> kbar
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import {
  KBarProvider,
  KBarPortal,
  KBarPositioner,
  KBarAnimator,
  KBarSearch,
  useMatches,
  NO_GROUP
} from &quot;kbar&quot;;

function MyApp() {
  const actions = [
    {
      id: &quot;blog&quot;,
      name: &quot;Blog&quot;,
      shortcut: [&quot;b&quot;],
      keywords: &quot;writing words&quot;,
      perform: () =&gt; (window.location.pathname = &quot;blog&quot;),
    },
    {
      id: &quot;contact&quot;,
      name: &quot;Contact&quot;,
      shortcut: [&quot;c&quot;],
      keywords: &quot;email&quot;,
      perform: () =&gt; (window.location.pathname = &quot;contact&quot;),
    },
  ]
  
  return (
    &lt;KBarProvider actions={actions}&gt;
      &lt;KBarPortal&gt; // Renders the content outside the root node
        &lt;KBarPositioner&gt; // Centers the content
          &lt;KBarAnimator&gt; // Handles the show/hide and height animations
            &lt;KBarSearch /&gt; // Search input
            &lt;RenderResults /&gt;;
          &lt;/KBarAnimator&gt;
        &lt;/KBarPositioner&gt;
      &lt;/KBarPortal&gt;
      &lt;MyApp /&gt;
    &lt;/KBarProvider&gt;;
  );
}
</code></pre></div><p>自定义搜索结果样式</p> <div class="language-react extra-class"><pre class="language-text"><code>import {
  // ...
  KBarResults,
  useMatches,
  NO_GROUP,
} from &quot;kbar&quot;;

function RenderResults() {
  const { results } = useMatches();

  return (
    &lt;KBarResults
      items={results}
      onRender={({ item, active }) =&gt;
        typeof item === &quot;string&quot; ? (
          &lt;div&gt;{item}&lt;/div&gt;
        ) : (
          &lt;div
            style={{
              background: active ? &quot;#eee&quot; : &quot;transparent&quot;,
            }}
          &gt;
            {item.name}
          &lt;/div&gt;
        )
      }
    /&gt;
  );
}
</code></pre></div><h3 id="nanoid"><a href="#nanoid" class="header-anchor">#</a> nanoid</h3> <h3 id="react-virtualized"><a href="#react-virtualized" class="header-anchor">#</a> react-virtualized</h3> <p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import {AutoSizer, List, CellMeasurerCache, CellMeasurer} from 'react-virtualized'

// 宽度固定
const measureCache = new CellMeasurerCache({
    fixedWidth: true,
    minHeight: 60, 
})

// 每一行内容
const rowRenderer = ({ index, key, parent, style }) =&gt; {
    const item = records[index]

    return (
        &lt;CellMeasurer cache={measureCache} key={key} parent={parent} rowIndex={index}&gt;
            &lt;div style={style}&gt;
                content
            &lt;/div&gt;
        &lt;/CellMeasurer&gt;
    )
}

&lt;AutoSizer&gt;
    {({width, height}) =&gt; (
        &lt;List
            width={width}
            height={height}
            deferredMeasurementCache={measureCache}
            rowCount={records.length}
            rowHeight={measureCache.rowHeight}
            rowRenderer={rowRenderer}
            className={styles.list}
        /&gt;
    )}
&lt;/AutoSizer&gt;
</code></pre></div><p>无限滚动 + 可编辑表格</p> <div class="language-react extra-class"><pre class="language-text"><code>import {Table, Column} from 'react-virtualized'
import {Input, Empty} from 'antd'

// 防止Input组件不必要的渲染
const MemoInput = React.memo(function (props) {
    const {rowIndex, field, handleFieldChange, ...restProps} = props
    return &lt;Input {... restProps} onChange={(e) =&gt; handleFieldChange(field, e, rowIndex)} /&gt;
})

function VirtualTable(props) {
    // ...

    // 列, 使用useCallback优化
    const nameColumn = ({cellData, rowIndex, dataKey }) =&gt; {
        // ...
        return (
            &lt;div&gt;
                &lt;MemoInput
                    placeholder=&quot;请输入姓名&quot;
                    value={cellData}
                    rowIndex={rowIndex}
                    field=&quot;姓名&quot;
                    handleFieldChange={handleFieldChange}
                /&gt;
            &lt;/div&gt;
        )
    }
    
    // 表头
    const columnHeaderRenderer = useCallback(({dataKey}) =&gt; dataKey, [])

    const rowGetter = useCallback(({index}) =&gt; dataSource[index], [dataSource])

    const noRowsRenderer = useCallback(() =&gt; &lt;Empty className={styles.empty} /&gt;, [])

    return &lt;Table
        ref={tableRef}
        className={styles.virtualTable}
        headerClassName={styles.header}
        rowClassName={styles.row}
        headerHeight={TableHeaderHeight}
        width={TableWidth}
        height={TableHeight}
        noRowsRenderer={noRowsRenderer}
        rowHeight={TableRowHeight}
        rowGetter={rowGetter}
        rowCount={dataSource.length}
        overscanRowCount={OverscanRowCount}
    &gt;
        &lt;Column
            width={120}
            dataKey=&quot;姓名&quot;
            headerRenderer={columnHeaderRenderer}
            cellRenderer={nameColumn}
        /&gt;
    &lt;/Table&gt;
}
</code></pre></div><h3 id="react-window"><a href="#react-window" class="header-anchor">#</a> react-window</h3> <p>react虚拟列表库
React Window是一个有效呈现大型列表和表格数据的组件，是React-virtualized的完全重写。</p> <p>React Window专注于使软件包更小，更快，同时API（和文档）对初学者尽可能友好。</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i react-window
</code></pre></div><p>固定高度列表</p> <div class="language-react extra-class"><pre class="language-text"><code>import { FixedSizeList as List } from 'react-window';

const Row = ({ index, style }) =&gt; (
  &lt;div style={style}&gt;Row {index}&lt;/div&gt;
);

const Example = () =&gt; (
  &lt;List
    height={150}
    itemCount={1000}
    itemSize={35}
    width={300}
  &gt;
    {Row}
  &lt;/List&gt;
);
</code></pre></div><p>VariableSizeList （可变尺寸列表）</p> <div class="language-react extra-class"><pre class="language-text"><code>import { VariableSizeList } from 'react-window';
 
const rowHeights = new Array(1000)
  .fill(true)
  .map(() =&gt; 25 + Math.round(Math.random() * 50));
 
const getItemSize = index =&gt; rowHeights[index]; // 此处采用随机数作为每个列表项的高度
 /** 
    * 每个列表项的组件
    * @param index：列表项的下标；style：列表项的样式（此参数必须传入列表项的组件中，否则会出现滚动到下方出现空白的情况）
    **/ 
const Row = ({ index, style }) =&gt; (
  &lt;div style={style}&gt;Row {index}&lt;/div&gt;
);
 
const Example = () =&gt; (
  &lt;VariableSizeList
    height={150} // 列表可视区域的高度
    itemCount={1000} // 列表数据长度
    itemSize={getItemSize} // 设置列表项的高度
    layout= &quot;vertical&quot; // （vertical/horizontal） 默认为vertical，此为设置列表的方向
    width={300}
  &gt;
    {Row}
  &lt;VariableSizeList&gt;
);
</code></pre></div><p>结合react-virtualized-auto-sizer使列表自适应当前页面的宽高</p> <div class="language-react extra-class"><pre class="language-text"><code>import { FixedSizeList } from &quot;react-window&quot;;
import AutoSizer from &quot;react-virtualized-auto-sizer&quot;;
const Example = () =&gt; (
  &lt;AutoSizer&gt;
    {({ height, width }) =&gt; (
      &lt;FixedSizeList
        className=&quot;List&quot;
        height={height}
        itemCount={1000}
        itemSize={35}
        width={width}
      &gt;
        {Row}
      &lt;/FixedSizeList&gt;
    )}
  &lt;/AutoSizer&gt;
);
</code></pre></div><h3 id="react-virtuoso"><a href="#react-virtuoso" class="header-anchor">#</a> react-virtuoso</h3> <p>虚拟列表/表格库</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-virtuoso
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import * as React from 'react'
import * as ReactDOM from 'react-dom'
import { Virtuoso } from 'react-virtuoso'

const App = () =&gt; {
  return &lt;Virtuoso style={{ height: '400px' }} totalCount={200} itemContent={index =&gt; &lt;div&gt;Item {index}&lt;/div&gt;} /&gt;
}

ReactDOM.render(&lt;App /&gt;, document.getElementById('root'))
</code></pre></div><h3 id="react-sticky"><a href="#react-sticky" class="header-anchor">#</a> react-sticky</h3> <p>让组件实现类似position-sticky的效果</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-sticky
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import React from 'react';
import { StickyContainer, Sticky } from 'react-sticky';

class App extends React.Component {
  render() {
    return (
      &lt;StickyContainer&gt;
        {/* Other elements can be in between `StickyContainer` and `Sticky`,
        but certain styles can break the positioning logic used. */}
        &lt;Sticky&gt;
          {({
            style,
 
            // the following are also available but unused in this example
            isSticky,
            wasSticky,
            distanceFromTop,
            distanceFromBottom,
            calculatedHeight
          }) =&gt; (
            &lt;header style={style}&gt;
              {/* ... */}
            &lt;/header&gt;
          )}
        &lt;/Sticky&gt;
        {/* ... */}
      &lt;/StickyContainer&gt;
    );
  },
}
</code></pre></div><p>sticky上可以添加不同的属性</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;StickyContainer&gt;
  ...
  &lt;Sticky topOffset={80} bottomOffset={80} disableCompensation&gt;
    { props =&gt; (...) }
  &lt;/Sticky&gt;
  ...
&lt;/StickyContainer&gt;
</code></pre></div><h3 id="crypto-browserify"><a href="#crypto-browserify" class="header-anchor">#</a> crypto-browserify</h3> <p>加密</p> <h3 id="react-text-loop"><a href="#react-text-loop" class="header-anchor">#</a> react-text-loop</h3> <p>react文字循环的小组件</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> react-text-loop
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import TextLoop from &quot;react-text-loop&quot;;
import Link from &quot;react-router&quot;;
import { BodyText } from &quot;./ui&quot;;

class App extends Component {
    render() {
        return (
            &lt;h2&gt;
                &lt;TextLoop&gt;
                    &lt;span&gt;First item&lt;/span&gt;
                    &lt;Link to=&quot;/&quot;&gt;Second item&lt;/Link&gt;
                    &lt;BodyText&gt;Third item&lt;/BodyText&gt;
                &lt;/TextLoop&gt;{&quot; &quot;}
                and something else.
            &lt;/h2&gt;
        );
    }
}
</code></pre></div><h3 id="js-cookie"><a href="#js-cookie" class="header-anchor">#</a> js-cookie</h3> <p>cookie插件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> js-cookie <span class="token parameter variable">--save</span>
</code></pre></div><p>引用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Cookies <span class="token keyword">from</span> <span class="token string">'js-cookie'</span>

<span class="token comment">//设置cookie</span>
Cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'value'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">expire</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//7天过期</span>
Cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置一个json</span>
<span class="token comment">//获取cookie</span>
Cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取cookie</span>
Cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//读取所有cookie</span>

<span class="token comment">//删除cookie</span>
Cookies<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除cookie</span>
</code></pre></div><h3 id="react-color"><a href="#react-color" class="header-anchor">#</a> react-color</h3> <p>react-color是一个拾色器，通过它获取颜色值</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i react-color <span class="token parameter variable">-S</span>
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import { TwitterPicker } from 'react-dom'

function () {
  render() {
    &lt;TwitterPicker 
      width=&quot;240px&quot;
      
      /&gt;
  }
}
</code></pre></div><h3 id="ladda"><a href="#ladda" class="header-anchor">#</a> Ladda</h3> <p>按钮组件</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> ladda
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import * as Ladda from 'ladda';

// Create a new instance of ladda for the specified button
var l = Ladda.create(document.querySelector('.my-button'));

// Start loading
l.start();

// Will display a progress bar for 50% of the button width
l.setProgress(0.5);

// Stop loading
l.stop();

// Toggle between loading/not loading states
l.toggle();

// Check the current state
l.isLoading();

// Delete the button's ladda instance
l.remove();
</code></pre></div><h3 id="million-js"><a href="#million-js" class="header-anchor">#</a> Million.js</h3> <p>Millionjs是一个轻量级的虚拟DOM库。</p> <p>据开发者称像React和Svelte的结合体，不需要编译</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> million
</code></pre></div><p>使用</p> <p>m()函数创建虚拟dom，render()渲染</p> <div class="language-react extra-class"><pre class="language-text"><code>import { m, className, style } from 'million';

const vnode = m('div', { key: 'foo' }, ['Hello World']);

const vnode = m(
  'div',
  {
    className: className({ class1: true, class2: false, class3: 1 + 1 === 2 }),
    style: style({ color: 'black', 'font-weight': 'bold' }),
  },
  ['Hello World'],
);

import { _, m, render } from 'million';

let seconds = 0;

setInterval(() =&gt; {
  render(document.body, m(vnode));
  seconds++;
}, 1000);
</code></pre></div><p>createElement创建元素</p> <div class="language-react extra-class"><pre class="language-text"><code>import { m, createElement, Flags } from 'million';

const vnode = m(
  'div',
  { id: 'app' },
  ['Hello World'],
  Flags.ELEMENT_TEXT_CHILDREN,
);
const el = createElement(vnode);

document.body.appendChild(el);
</code></pre></div><h4 id="适配jsx"><a href="#适配jsx" class="header-anchor">#</a> 适配jsx</h4> <p>在.bablerc中配置插件</p> <div class="language-rc extra-class"><pre class="language-text"><code>{
  &quot;plugins&quot;: [
    [
      &quot;@babel/plugin-transform-react-jsx&quot;,
      {
        &quot;runtime&quot;: &quot;automatic&quot;,
        &quot;importSource&quot;: &quot;million&quot;
      }
    ]
  ]
}
</code></pre></div><h3 id="toast-ui-editor"><a href="#toast-ui-editor" class="header-anchor">#</a> toast-ui-Editor</h3> <p>Markdown js编辑器</p> <p>有纯js 版本、react版本和vue版本</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> @toast-ui/react-editor
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">'@toast-ui/editor/dist/toastui-editor.css'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Editor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@toast-ui/react-editor'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  editorRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>editorRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'Bold'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function-variable function">handleFocus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'focus!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Editor
          previewStyle<span class="token operator">=</span><span class="token string">&quot;vertical&quot;</span>
          height<span class="token operator">=</span><span class="token string">&quot;400px&quot;</span>
          initialEditType<span class="token operator">=</span><span class="token string">&quot;markdown&quot;</span>
          initialValue<span class="token operator">=</span><span class="token string">&quot;hello&quot;</span>
          ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>editorRef<span class="token punctuation">}</span>
  				onFocus<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleFocus<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>make bold<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="hyperformula"><a href="#hyperformula" class="header-anchor">#</a> HyperFormula</h3> <p>像excel一样操作数据，适合特殊场景下</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> hyperformula
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HyperFormula <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'hyperformula'</span><span class="token punctuation">;</span>

<span class="token comment">// define the options</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">licenseKey</span><span class="token operator">:</span> <span class="token string">'gpl-v3'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// define the data</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'20'</span><span class="token punctuation">,</span> <span class="token string">'30'</span><span class="token punctuation">,</span> <span class="token string">'=SUM(A1:C1)'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// build an instance with defined options and data </span>
<span class="token keyword">const</span> hfInstance <span class="token operator">=</span> HyperFormula<span class="token punctuation">.</span><span class="token function">buildFromArray</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// call getCellValue to get the calculation results</span>
<span class="token keyword">const</span> mySum <span class="token operator">=</span> hfInstance<span class="token punctuation">.</span><span class="token function">getCellValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">col</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">row</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">sheet</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// print the result in the browser's console</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mySum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="unimported"><a href="#unimported" class="header-anchor">#</a> unimported</h3> <p>检查当前代码系统中没有被引用的文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ npx unimported
</code></pre></div><p>https://www.npmjs.com/package/unimported</p> <h3 id="why-did-you-render"><a href="#why-did-you-render" class="header-anchor">#</a> why-did-you-render</h3> <p>检查react代码，避免不必要的渲染，可以使用在react16 react17和react18， RN中也同样可以使用</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> @welldone-software/why-did-you-render --save-dev
</code></pre></div><p>使用</p> <p>创建一个wdyr.js, 并在应用的最开始引入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> whyDidYouRender <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@welldone-software/why-did-you-render'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">whyDidYouRender</span><span class="token punctuation">(</span>React<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">trackAllPureComponents</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="deku"><a href="#deku" class="header-anchor">#</a> deku</h3> <p>虚拟dom库</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--save</span> deku
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>/** @jsx element */
import {element, createApp} from 'deku'
import {createStore} from 'redux'
import reducer from './reducer'

// Dispatch an action when the button is clicked
let log = dispatch =&gt; event =&gt; {
  dispatch({
    type: 'CLICKED'
  })
}

// Define a state-less component
let MyButton = {
  render: ({ props, children, dispatch }) =&gt; {
    return &lt;button onClick={log(dispatch)}&gt;{children}&lt;/button&gt;
  }
}

// Create a Redux store to handle all UI actions and side-effects
let store = createStore(reducer)

// Create an app that can turn vnodes into real DOM elements
let render = createApp(document.body, store.dispatch)

// Update the page and add redux state to the context
render(
  &lt;MyButton&gt;Hello World!&lt;/MyButton&gt;,
  store.getState()
)
</code></pre></div><h3 id="react-charts-2"><a href="#react-charts-2" class="header-anchor">#</a> react-charts-2</h3> <p>react图表组件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">pnpm</span> <span class="token function">add</span> react-chartjs-2 chart.js
<span class="token comment"># or</span>
<span class="token function">yarn</span> <span class="token function">add</span> react-chartjs-2 chart.js
<span class="token comment"># or</span>
<span class="token function">npm</span> i react-chartjs-2 chart.js
</code></pre></div><p>使用</p> <div class="language-react extra-class"><pre class="language-text"><code>import { Doughnut } from 'react-chartjs-2';

&lt;Doughnut data={...} /&gt;
</code></pre></div><h3 id="await-to-js"><a href="#await-to-js" class="header-anchor">#</a> await-to-js</h3> <p>捕获await的错误，相当于try-catch的语法糖</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i await-to-js <span class="token parameter variable">--save</span>
</code></pre></div><p>使用</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> to <span class="token keyword">from</span> <span class="token string">'await-to-js'</span><span class="token punctuation">;</span>
<span class="token comment">// If you use CommonJS (i.e NodeJS environment), it should be:</span>
<span class="token comment">// const to = require('await-to-js').default;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncTaskWithCb</span><span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">let</span> err<span class="token punctuation">,</span> user<span class="token punctuation">,</span> savedTask<span class="token punctuation">,</span> notification<span class="token punctuation">;</span>

     <span class="token punctuation">[</span> err<span class="token punctuation">,</span> user <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">to</span><span class="token punctuation">(</span>UserModel<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token string">'No user found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token punctuation">[</span> err<span class="token punctuation">,</span> savedTask <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">to</span><span class="token punctuation">(</span><span class="token function">TaskModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span> user<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Demo Task'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token string">'Error occurred while saving task'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>notificationsEnabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token punctuation">[</span> err <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">to</span><span class="token punctuation">(</span>NotificationService<span class="token punctuation">.</span><span class="token function">sendNotification</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">'Task Created'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token string">'Error while sending notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>savedTask<span class="token punctuation">.</span>assignedUser<span class="token punctuation">.</span>id <span class="token operator">!==</span> user<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token punctuation">[</span> err<span class="token punctuation">,</span> notification <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">to</span><span class="token punctuation">(</span>NotificationService<span class="token punctuation">.</span><span class="token function">sendNotification</span><span class="token punctuation">(</span>savedTask<span class="token punctuation">.</span>assignedUser<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">'Task was created for you'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token string">'Error while sending notification'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> savedTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncFunctionWithThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>err<span class="token punctuation">,</span> user<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">to</span><span class="token punctuation">(</span>UserModel<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'User not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token punctuation">}</span>
</code></pre></div><h3 id="qs"><a href="#qs" class="header-anchor">#</a> qs</h3> <p>解析路由 queryString</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'qs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'a=c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">deepEqual</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'c'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> str <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">'a=c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>https://github.com/ljharb/qs</p> <h3 id="redoc"><a href="#redoc" class="header-anchor">#</a> redoc</h3> <p>生成react swagger文档</p> <h3 id="更多组件"><a href="#更多组件" class="header-anchor">#</a> 更多组件</h3> <p>在写前端的前两年，我总是热衷于找寻各种各样的组件，试图不断地充实自己使用过的组件库</p> <p>但是随着前端技术的积累，我发现使用组件总是很简单的，难的是体会组件的设计思路、并能够自己根据实际情况进行修改</p> <p>所以提醒自己还需潜心修炼js和多写不同场景的代码 只是沉迷组件的话。进步不大</p> <p>https://ant.design/docs/react/recommendation-cn</p> <p>Ant design站点下有推荐社区比较好的组件，可以在其中找到合适的组件使用</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3979e060.js" defer></script><script src="/assets/js/2.0f8cbb55.js" defer></script><script src="/assets/js/1.ff82b27c.js" defer></script><script src="/assets/js/63.410bfe1e.js" defer></script>
  </body>
</html>
