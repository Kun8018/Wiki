<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git使用技巧</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.0503e0f3.css" as="style"><link rel="preload" href="/assets/js/app.3979e060.js" as="script"><link rel="preload" href="/assets/js/2.0f8cbb55.js" as="script"><link rel="preload" href="/assets/js/1.ff82b27c.js" as="script"><link rel="preload" href="/assets/js/86.0a93f933.js" as="script"><link rel="prefetch" href="/assets/js/10.d9850768.js"><link rel="prefetch" href="/assets/js/100.a33654f4.js"><link rel="prefetch" href="/assets/js/101.d3bc1c79.js"><link rel="prefetch" href="/assets/js/102.02bbfd1e.js"><link rel="prefetch" href="/assets/js/103.c9de5560.js"><link rel="prefetch" href="/assets/js/104.7c2b76db.js"><link rel="prefetch" href="/assets/js/105.ea3ac79c.js"><link rel="prefetch" href="/assets/js/106.d54e3045.js"><link rel="prefetch" href="/assets/js/107.c142f695.js"><link rel="prefetch" href="/assets/js/108.fe2c9c19.js"><link rel="prefetch" href="/assets/js/109.59b55101.js"><link rel="prefetch" href="/assets/js/11.62caceeb.js"><link rel="prefetch" href="/assets/js/110.c657b6f8.js"><link rel="prefetch" href="/assets/js/111.4eadf9c5.js"><link rel="prefetch" href="/assets/js/112.fce38ecf.js"><link rel="prefetch" href="/assets/js/113.ee6322e2.js"><link rel="prefetch" href="/assets/js/114.1ed20fd8.js"><link rel="prefetch" href="/assets/js/115.aa405ee0.js"><link rel="prefetch" href="/assets/js/116.d1b4c413.js"><link rel="prefetch" href="/assets/js/117.965d1926.js"><link rel="prefetch" href="/assets/js/118.b1d5b9ca.js"><link rel="prefetch" href="/assets/js/119.e4e766bc.js"><link rel="prefetch" href="/assets/js/12.abd8d9de.js"><link rel="prefetch" href="/assets/js/120.f569b061.js"><link rel="prefetch" href="/assets/js/121.e3915f79.js"><link rel="prefetch" href="/assets/js/122.3a2b3d34.js"><link rel="prefetch" href="/assets/js/123.cbf985ea.js"><link rel="prefetch" href="/assets/js/124.c3d8b6fc.js"><link rel="prefetch" href="/assets/js/125.dfe970a3.js"><link rel="prefetch" href="/assets/js/126.f5165054.js"><link rel="prefetch" href="/assets/js/127.ffb31d35.js"><link rel="prefetch" href="/assets/js/128.bf7eb0b3.js"><link rel="prefetch" href="/assets/js/129.76b0ac54.js"><link rel="prefetch" href="/assets/js/13.763c094c.js"><link rel="prefetch" href="/assets/js/130.cb661ef6.js"><link rel="prefetch" href="/assets/js/131.b215b4cc.js"><link rel="prefetch" href="/assets/js/132.bdf6b89f.js"><link rel="prefetch" href="/assets/js/133.a13e43ca.js"><link rel="prefetch" href="/assets/js/134.f858c56e.js"><link rel="prefetch" href="/assets/js/135.0e05a297.js"><link rel="prefetch" href="/assets/js/136.ff47beeb.js"><link rel="prefetch" href="/assets/js/137.7dcf182f.js"><link rel="prefetch" href="/assets/js/138.dd2c3c8c.js"><link rel="prefetch" href="/assets/js/139.db36e4eb.js"><link rel="prefetch" href="/assets/js/14.784100b6.js"><link rel="prefetch" href="/assets/js/140.05811a56.js"><link rel="prefetch" href="/assets/js/141.32b8052b.js"><link rel="prefetch" href="/assets/js/142.2c061186.js"><link rel="prefetch" href="/assets/js/143.113df61a.js"><link rel="prefetch" href="/assets/js/144.2c01c336.js"><link rel="prefetch" href="/assets/js/145.a8fe7a8a.js"><link rel="prefetch" href="/assets/js/146.bb5b7e16.js"><link rel="prefetch" href="/assets/js/147.213b17a7.js"><link rel="prefetch" href="/assets/js/148.dd7a3258.js"><link rel="prefetch" href="/assets/js/149.b3f9adc5.js"><link rel="prefetch" href="/assets/js/15.3aa73286.js"><link rel="prefetch" href="/assets/js/150.4ab9a505.js"><link rel="prefetch" href="/assets/js/151.d04eb475.js"><link rel="prefetch" href="/assets/js/152.c547ae2c.js"><link rel="prefetch" href="/assets/js/153.3fa58002.js"><link rel="prefetch" href="/assets/js/154.cd2cc012.js"><link rel="prefetch" href="/assets/js/155.0160c441.js"><link rel="prefetch" href="/assets/js/16.7886627b.js"><link rel="prefetch" href="/assets/js/17.a4c76a6c.js"><link rel="prefetch" href="/assets/js/18.995eb54b.js"><link rel="prefetch" href="/assets/js/19.edc682a7.js"><link rel="prefetch" href="/assets/js/20.87ca556d.js"><link rel="prefetch" href="/assets/js/21.4b328dcc.js"><link rel="prefetch" href="/assets/js/22.91d15e78.js"><link rel="prefetch" href="/assets/js/23.17bfc3dd.js"><link rel="prefetch" href="/assets/js/24.c0d84a10.js"><link rel="prefetch" href="/assets/js/25.2717e191.js"><link rel="prefetch" href="/assets/js/26.3764ddb4.js"><link rel="prefetch" href="/assets/js/27.e98913ec.js"><link rel="prefetch" href="/assets/js/28.a4481108.js"><link rel="prefetch" href="/assets/js/29.3d82d38d.js"><link rel="prefetch" href="/assets/js/3.e2aae122.js"><link rel="prefetch" href="/assets/js/30.7e9979a2.js"><link rel="prefetch" href="/assets/js/31.fa479c29.js"><link rel="prefetch" href="/assets/js/32.901576de.js"><link rel="prefetch" href="/assets/js/33.8dafc45c.js"><link rel="prefetch" href="/assets/js/34.6bbddd9b.js"><link rel="prefetch" href="/assets/js/35.394c80b9.js"><link rel="prefetch" href="/assets/js/36.5246333d.js"><link rel="prefetch" href="/assets/js/37.49802bfd.js"><link rel="prefetch" href="/assets/js/38.36ae0914.js"><link rel="prefetch" href="/assets/js/39.791184a0.js"><link rel="prefetch" href="/assets/js/4.30c2ba05.js"><link rel="prefetch" href="/assets/js/40.eb1a9cc1.js"><link rel="prefetch" href="/assets/js/41.31179942.js"><link rel="prefetch" href="/assets/js/42.22c31ea4.js"><link rel="prefetch" href="/assets/js/43.e82e343d.js"><link rel="prefetch" href="/assets/js/44.95e68751.js"><link rel="prefetch" href="/assets/js/45.b99232d2.js"><link rel="prefetch" href="/assets/js/46.21e9dae9.js"><link rel="prefetch" href="/assets/js/47.e30bba7c.js"><link rel="prefetch" href="/assets/js/48.6c0d14cd.js"><link rel="prefetch" href="/assets/js/49.ed1b480b.js"><link rel="prefetch" href="/assets/js/5.c5fba3ad.js"><link rel="prefetch" href="/assets/js/50.f500b9ed.js"><link rel="prefetch" href="/assets/js/51.3671246f.js"><link rel="prefetch" href="/assets/js/52.7915148f.js"><link rel="prefetch" href="/assets/js/53.39ece5d9.js"><link rel="prefetch" href="/assets/js/54.358ca4aa.js"><link rel="prefetch" href="/assets/js/55.244837be.js"><link rel="prefetch" href="/assets/js/56.e7164f10.js"><link rel="prefetch" href="/assets/js/57.3c6f5aa2.js"><link rel="prefetch" href="/assets/js/58.84c83603.js"><link rel="prefetch" href="/assets/js/59.ec4edc7d.js"><link rel="prefetch" href="/assets/js/6.9184d4d1.js"><link rel="prefetch" href="/assets/js/60.c2346e02.js"><link rel="prefetch" href="/assets/js/61.8d99ca4c.js"><link rel="prefetch" href="/assets/js/62.f6bea4bf.js"><link rel="prefetch" href="/assets/js/63.410bfe1e.js"><link rel="prefetch" href="/assets/js/64.960d5951.js"><link rel="prefetch" href="/assets/js/65.e6a8895b.js"><link rel="prefetch" href="/assets/js/66.41092e16.js"><link rel="prefetch" href="/assets/js/67.062b95dc.js"><link rel="prefetch" href="/assets/js/68.58c65f95.js"><link rel="prefetch" href="/assets/js/69.d1e1b68b.js"><link rel="prefetch" href="/assets/js/7.85fc951e.js"><link rel="prefetch" href="/assets/js/70.8294a611.js"><link rel="prefetch" href="/assets/js/71.66e44dac.js"><link rel="prefetch" href="/assets/js/72.46bd34f2.js"><link rel="prefetch" href="/assets/js/73.7eb2e800.js"><link rel="prefetch" href="/assets/js/74.8e05f264.js"><link rel="prefetch" href="/assets/js/75.21e0b9b1.js"><link rel="prefetch" href="/assets/js/76.c2c92cec.js"><link rel="prefetch" href="/assets/js/77.799df679.js"><link rel="prefetch" href="/assets/js/78.1605b33c.js"><link rel="prefetch" href="/assets/js/79.659e7e78.js"><link rel="prefetch" href="/assets/js/80.6f99ca65.js"><link rel="prefetch" href="/assets/js/81.7a0caba9.js"><link rel="prefetch" href="/assets/js/82.19629840.js"><link rel="prefetch" href="/assets/js/83.29093f51.js"><link rel="prefetch" href="/assets/js/84.64568258.js"><link rel="prefetch" href="/assets/js/85.3d88e3b2.js"><link rel="prefetch" href="/assets/js/87.07c51a25.js"><link rel="prefetch" href="/assets/js/88.aa6be8e5.js"><link rel="prefetch" href="/assets/js/89.6ad93f1f.js"><link rel="prefetch" href="/assets/js/90.87c8c6e5.js"><link rel="prefetch" href="/assets/js/91.57c509b5.js"><link rel="prefetch" href="/assets/js/92.c8b02e25.js"><link rel="prefetch" href="/assets/js/93.fee86c6c.js"><link rel="prefetch" href="/assets/js/94.ab3bad19.js"><link rel="prefetch" href="/assets/js/95.cfaa79dc.js"><link rel="prefetch" href="/assets/js/96.c63afef5.js"><link rel="prefetch" href="/assets/js/97.123374a6.js"><link rel="prefetch" href="/assets/js/98.53cfb154.js"><link rel="prefetch" href="/assets/js/99.8fe1f067.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0503e0f3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Git是最常用的版本管理工具，利于协同开发</p> <p>​        原来的标题是Github使用技巧，但是后来开发之后发现github和gitlab都是基于Git，因此改为Git</p> <h2 id="多人协同开发流程"><a href="#多人协同开发流程" class="header-anchor">#</a> 多人协同开发流程</h2> <p>​        一般在开发产品适合，通常挑选一个分支作为可以上线的正式版本分支，比如master或者release，develop是用来开发的，可能带有bug。 当很多人参与同一个项目的时候，如果给每个人都有Commit到master和release分支的权c限是非常不合理的。这个时候，就可以使用Fork + PR/MR的方式来实现多人协作开发。 每个开发者先Fork一份代码到自己的账号下，功能完成后发PR给项目管理者，项目管理者Code Review后确认无误后即可进行Merge操作，这样协作开发效率高，问题少。</p> <h2 id="安装git"><a href="#安装git" class="header-anchor">#</a> 安装Git</h2> <p>windows端</p> <p>下载git工具，<code>[这里是链接](https://git-scm.com/downloads)</code>，选择适合自己的版本进行安装。</p> <p>mac端</p> <p>苹果电脑自带Git。</p> <p>linux</p> <p>以centos为例</p> <p>下载git源代码压缩文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.23.0.tar.xz
</code></pre></div><p>解压缩和解归档</p> <div class="language-shell extra-class"><pre class="language-shell"><code>xz <span class="token parameter variable">-d</span> git-2.23.0.tar.xz
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> git-2.23.0.tar
</code></pre></div><p>安装底层依赖库</p> <div class="language-shell extra-class"><pre class="language-shell"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> libcurl-devel
</code></pre></div><p>构建和安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><h2 id="git本地设置"><a href="#git本地设置" class="header-anchor">#</a> Git本地设置</h2> <p>Windows新安装Git需要设置github账户。Mac默认没有修改的情况mac使用icloud账户登录系统，提交时会提示<code>Your name and email address were configured automatically based on your username and hostname. Please check that they are accurate</code>.也需要将提交用户改为github账户。</p> <p>windows在cmd窗口输入命令，mac在终端输入。</p> <p>方式一：直接设置自己的用户名和邮箱</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">&quot;coliyin@163.com&quot;</span>
$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">&quot;coliyin@163.com&quot;</span>
</code></pre></div><p>设置SSHkey</p> <p>方式二：修改配置文件</p> <p>在终端输入</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--edit</span>
</code></pre></div><p>然后会进入vi修改配置文件，将name=和email=之后的内容修改为自己的用户名和邮箱。记得将首列的#号去掉。</p> <p>修改完后渐入命令使配置生效</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> commit <span class="token parameter variable">--amend</span> --reset-author
</code></pre></div><p>也可以按照windows设置，最后使其</p> <p><strong>通常来说，本地的Git只能建议只有一个版本，否则提交代码或者pr时会显示多个账号，会造成混乱</strong></p> <h3 id="邮箱"><a href="#邮箱" class="header-anchor">#</a> 邮箱</h3> <p>邮箱是GitHub验证账户的重要标识，包括SSH key的生成。所以一般入职公司之后，如果使用GitHub都会要求改成公司的，所以更换邮箱之后都要重新生成一次public key,直接使用原来的会报错，像这样子</p> <div class="language-shell extra-class"><pre class="language-shell"><code>fatal: unable to access <span class="token string">'https://github.com/Kun8018/Kun8018.github.io.git/'</span><span class="token builtin class-name">:</span> LibreSSL SSL_connect: SSL_ERROR_SYSCALL <span class="token keyword">in</span> connection to github.com:443 
</code></pre></div><p>在本地环境执行</p> <div class="language-shell extra-class"><pre class="language-shell"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-b</span> <span class="token number">4096</span> <span class="token parameter variable">-C</span> <span class="token string">&quot;your-github@email.com&quot;</span>
</code></pre></div><p>然后找到对应的ssh key</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> .ssh
<span class="token builtin class-name">cd</span> ~/.ssh
</code></pre></div><p>查看key中的内容</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">cat</span> id_rsa.pub
</code></pre></div><p>复制输出并且在GitHub常见ssh key</p> <p>在GitHub。account -&gt; settings -&gt; create a SSH and GPG keys，把本地的key粘贴进去就好</p> <p>现在已经可以运行了，可以在本地验证一下</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ssh</span> <span class="token parameter variable">-vT</span> git@github.com
</code></pre></div><p>输出是这样就代表可以</p> <div class="language-shell extra-class"><pre class="language-shell"><code>debug1: channel <span class="token number">0</span>: free: client-session, nchannels <span class="token number">1</span>
Transferred: sent <span class="token number">3848</span>, received <span class="token number">2040</span> bytes, <span class="token keyword">in</span> <span class="token number">0.2</span> seconds
Bytes per second: sent <span class="token number">16032.4</span>, received <span class="token number">8499.5</span>
debug1: Exit status <span class="token number">1</span>
</code></pre></div><h2 id="从远程仓库拉取项目"><a href="#从远程仓库拉取项目" class="header-anchor">#</a> 从远程仓库拉取项目</h2> <p>GitHub可以使用http和ssh两种方式获取代码</p> <p>https比较简单，但是每次fetch和push都需要账号密码</p> <p>sshfetch和push不需要在输入账号密码：</p> <div class="language-git extra-class"><pre class="language-git"><code>ssh-keygen -t rsa -b 4096 -C <span class="token string">&quot;1027690173@qq.com&quot;</span>
</code></pre></div><p>会请求你输入文件名和设置密码，可以不设置直接enter跳过，文件名为默认id_rsa，密码默认为空</p> <p>在.ssh下查看文件，有id_rsa或id_dsa命名的文件即是，后缀为.pub的是公钥，没有的是私钥</p> <div class="language-git extra-class"><pre class="language-git"><code>cd ~/.ssh
ls
</code></pre></div><p>运行ssh-agent</p> <div class="language-git extra-class"><pre class="language-git"><code>eval <span class="token string">&quot;$(ssh-agent -s)&quot;</span>
</code></pre></div><div class="language-git extra-class"><pre class="language-git"><code>Host * IdentityFile ~/.ssh/id_rsa
</code></pre></div><p>添加ssh key到github或gitlab</p> <p>复制公钥</p> <div class="language-git extra-class"><pre class="language-git"><code>pbcopy &lt; ~/.ssh/id_rsa.pub
</code></pre></div><p>粘贴到github ssh-key或者gitlab</p> <p>首次下载项目</p> <div class="language-git extra-class"><pre class="language-git"><code>git clone 
</code></pre></div><p>获取远程修改到本地</p> <div class="language-git extra-class"><pre class="language-git"><code>git  git@github.com:anyangxaut/LearnGit.git
</code></pre></div><h2 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h2> <p>将文件夹变成git仓库</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> init 
</code></pre></div><p>当你完成了上述操作后，本地目录就变成了工作区（正在操作的工作目录）、仓库和工作区和本地仓库之间的暂存区（也称为缓存区）。</p> <p>通过<code>git add</code>可以将指定的文件或所有文件添加到暂存区。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
</code></pre></div><p>如果不希望将文件添加到暂存区，可以按照提示，使用<code>git rm --cached &lt;file&gt;</code>命令将文件从暂存区放回到工作区。</p> <p>如果这个时候对工作区的文件又进行了修改使得工作区和暂存区的内容并不相同了，再次执行<code>git status</code>可以看到哪个或哪些文件被修改了，如果希望用暂存区的内容恢复工作区，可以使用下面的命令。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> restore <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
<span class="token function">git</span> restore <span class="token builtin class-name">.</span>
</code></pre></div><p>通过下面的命令可以将暂存区的内容纳入本地仓库，</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'本次提交的说明'</span>
</code></pre></div><p>提交commit可以直接关联issue，在issue下面可以直接显示关联的commit代码</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'说明 #issue链接'</span>
</code></pre></div><p>在pr的comment中添加issue的链接可以关联pr与issue，当pr被合并时issue会被自动关闭</p> <p>如果提交之后才发现之前的修改少了一些内容，回到过去，修改上一次提交的那个文件。如此一来，你的commit记录只会有一条。对于一些有代码洁癖并且看中git commit记录的程序员，这点很重要</p> <p>执行<code>git commit --amend --no-edit</code>之后，hash值由<code>c56f680</code>变成了<code>eb6c8cb</code>，但是message内容并没有发生变化，并且最重要的是只有一条commit记录。</p> <p>如果要修改上一条的message，那么去掉<code>--no-edit</code>选项即可，<code>git commit --amend -m &quot;xxxx&quot;</code>。同理，commit记录同样只会有一条。</p> <p>可以通过<code>git log</code>查看每次提交对应的日志。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> log
<span class="token function">git</span> log <span class="token parameter variable">--graph</span> <span class="token parameter variable">--oneline</span> --abbrev-commit
</code></pre></div><p>gitlog不能显示已经删除的commit记录，需要查看时使用git reflog命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reflog
</code></pre></div><p>reflog可以显示所有分支的操作记录，包括已经删除的commit，要回复已经删除的commit使用cherry-pick</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> cherru-pick 4c97ff3
</code></pre></div><h2 id="远程操作"><a href="#远程操作" class="header-anchor">#</a> 远程操作</h2> <p>添加远程仓库（Git服务器）</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> remote <span class="token function">add</span> origin git@gitee.com:jackfrued/python.git
</code></pre></div><p>从远程仓库取回代码。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> pull origin master
</code></pre></div><p>将本地代码（工作成果）推送到远程仓库。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master:master
</code></pre></div><p>删除远程分支</p> <p>执行此命令时慎重操作</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch <span class="token parameter variable">-r</span> <span class="token parameter variable">-d</span> origin/develop
<span class="token function">git</span> push origin :develop

<span class="token function">git</span> push origin <span class="token parameter variable">--delete</span> develop
</code></pre></div><h2 id="分支"><a href="#分支" class="header-anchor">#</a> 分支</h2> <p>创建分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
</code></pre></div><p>切换分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> switch <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
</code></pre></div><p>分支合并</p> <p>在<code>dev</code>分支上完成开发任务之后，如果希望将<code>dev</code>分支上的成果合并到<code>master</code>，可以先切回到<code>master</code>分支然后使用<code>git merge</code>来做分支合并，合并的结果如下图右上方所示。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> switch master
<span class="token function">git</span> merge --no-ff dev
</code></pre></div><p>在合并分支时，没有冲突的部分Git会做自动合并。如果发生了冲突（如<code>dev</code>和<code>master</code>分支上都修改了同一个文件），会看到<code>CONFLICT (content): Merge conflict in &lt;filename&gt;. Automatic merge failed; fix conflicts and then commit the result</code>（自动合并失败，修复冲突之后再次提交）的提示，这个时候我们可以用<code>git diff</code>来查看产生冲突的内容。解决冲突通常需要当事人当面沟通之后才能决定保留谁的版本，冲突解决后需要重新提交代码。</p> <p>删除分支</p> <p>如果分支上的工作成果还没有合并，那么在删除分支时会看到<code>error: The branch '&lt;branch-name&gt;' is not fully merged.</code>这样的错误提示。如果希望强行删除分支，可以使用<code>-D</code>参数。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
error: The branch <span class="token string">'&lt;branch-name&gt;'</span> is not fully merged.
If you are sure you want to delete it, run <span class="token string">'git branch -D &lt;branch-name&gt;'</span><span class="token builtin class-name">.</span>
<span class="token function">git</span> branch <span class="token parameter variable">-D</span> <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
</code></pre></div><p>分支变基</p> <p>分支合并操作可以将多个分支上的工作成果最终合并到一个分支上，但是再多次合并操作之后，分支可能会变得非常的混乱和复杂，为了解决这个问题，可以使用<code>git rebase</code>操作来实现分支变基。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> rebase master
<span class="token function">git</span> switch master
<span class="token function">git</span> merge dev
</code></pre></div><p>关联远程分支</p> <p>如果当前所在的分支还没有关联到远程分支，可以使用下面的命令为它们建立关联。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch --set-upstream-to origin/develop
</code></pre></div><p>也可以指定别的分支关联到远程分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch --set-upstream-to origin/develop <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span>
</code></pre></div><p>也创建分支时使用了<code>--track</code>参数，直接指定与本地分支关联的远程分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch <span class="token parameter variable">--track</span> <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span> origin/develop
</code></pre></div><p>解除关联远程分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch <span class="token parameter variable">--track</span> <span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span> origin/develop
</code></pre></div><h3 id="rebase、squash与merge的区别"><a href="#rebase、squash与merge的区别" class="header-anchor">#</a> rebase、squash与merge的区别</h3> <p>rebase可以尽可能保持master分支干净，并且易于识别author</p> <p>squash也可以保持master分支干净，但是master中author都是maintainer，而不是原owner</p> <p>merge不能保持master分支干净，但是保持了所有的commit history，大多数情况下都是不好的，个别情况好</p> <h2 id="子模块submodule"><a href="#子模块submodule" class="header-anchor">#</a> 子模块submodule</h2> <p>当你在一个git项目上工作时，你需要在其中使用另一个Git项目。也许它是一个第三方开发的库或者是你独立开发合并在多个父项目中使用。</p> <p>在git中可以用子模块submodule来管理这些项目，submodule允许你将一个git仓库当作另外一个git仓库的子目录，这允许你克隆另外一个仓库到你的项目中并且保持你的提交相对独立</p> <p>克隆含有子模块的项目</p> <p>克隆含有子模块的项目可以先克隆父项目，再更新子模块，另一种是直接递归克隆整个项目</p> <p>先克隆父项目，再更新子模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> clone https://<span class="token punctuation">..</span>./.git assets
</code></pre></div><p>此时子模块子模块还未初始化</p> <p>初始化子模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> submodule init
</code></pre></div><p>更新子模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> submodule update
</code></pre></div><p>直接递归克隆整个项目</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> clone https://<span class="token punctuation">..</span>./.git assets <span class="token parameter variable">--recursive</span>
</code></pre></div><p>添加子模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> submodule <span class="token function">add</span> https://<span class="token punctuation">..</span>./.git assets
</code></pre></div><p>查看子模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> status
<span class="token function">git</span> submodule
</code></pre></div><p>更新子模块</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">## 更新项目内子模块到最新版本</span>
<span class="token function">git</span> submodule update
<span class="token comment">## 更新子模块为远程项目的最新版本</span>
<span class="token function">git</span> submodule update <span class="token parameter variable">--remote</span>
<span class="token comment">## 更新所有子模块</span>
<span class="token function">git</span> submodule foreach <span class="token function">git</span> pull
</code></pre></div><p>修改子模块</p> <p>在子模块中修改文件后，直接提交到远程项目分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> ci <span class="token parameter variable">-m</span> <span class="token string">&quot;commit&quot;</span>
<span class="token function">git</span> push origin HEAD:master
</code></pre></div><p>删除子模块</p> <p>删除子模块比较麻烦，需要手动删除相关的文件，否则在添加子模块时有可能出现错误。</p> <p>首先删除子模块文件夹</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">rm</span> <span class="token parameter variable">--cached</span> assets
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> assets
</code></pre></div><p>删除相关子模块信息</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>submodule <span class="token string">&quot;assets&quot;</span><span class="token punctuation">]</span>
	path <span class="token operator">=</span> assets
	url <span class="token operator">=</span> https://github.com/<span class="token punctuation">..</span>/.git
</code></pre></div><p>删除相关子模块信息</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>submodule <span class="token string">&quot;assets&quot;</span><span class="token punctuation">]</span>
	url <span class="token operator">=</span> https://github.com/<span class="token punctuation">..</span>/.git
</code></pre></div><p>删除相关子模块文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> ./git/modules/assets
</code></pre></div><h2 id="子仓库subtree"><a href="#子仓库subtree" class="header-anchor">#</a> 子仓库subtree</h2> <p>与submodule的异同</p> <p>git submodule:</p> <p>允许其他仓库指定以一个commit嵌入仓库的子目录</p> <p>仓库clone下来要init和update</p> <p>会产生文件记录和submodule版本信息</p> <p>git submodule删除起来比较费劲</p> <p>git subtree：</p> <p>避免以上问题</p> <p>管理和更新流程比较方便</p> <p>git subtree合并子仓库到项目中的子目录，不用像submodule一样每次子目录修改之后都要init和update，万一每次没update就直接add，将</p> <p>git 1.5之后建议使用git submodule</p> <p>使用方法</p> <p>如果p1项目和p2项目共用S项目</p> <p>添加subtree</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> subtree <span class="token function">add</span> <span class="token parameter variable">--prefix</span><span class="token operator">=</span><span class="token operator">&lt;</span>s project path<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>s project url<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span> <span class="token parameter variable">--squash</span>
</code></pre></div><p>修改代码，可以改subtree里面的代码，添加相关commit</p> <p>pull&amp;push</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> subtree pull <span class="token parameter variable">--prefix</span><span class="token operator">=</span><span class="token operator">&lt;</span>s project path<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>s project url<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span> <span class="token parameter variable">--squash</span>
<span class="token function">git</span> subtree push <span class="token parameter variable">--prefix</span><span class="token operator">=</span><span class="token operator">&lt;</span>s project path<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>s project url<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span> <span class="token parameter variable">--squash</span>
</code></pre></div><p>拆分已有项目,比如P项目拆分出s项目</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> subtree <span class="token function">split</span> <span class="token parameter variable">-P</span> <span class="token operator">&lt;</span>S project path<span class="token operator">&gt;</span> <span class="token parameter variable">-b</span> <span class="token operator">&lt;</span>tmp branch<span class="token operator">&gt;</span>
</code></pre></div><p>git会遍历所有commit，分离与S项目有关的commit，并存入临时分支branch中</p> <p>创建子repo</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> 
<span class="token builtin class-name">cd</span> s new path
<span class="token function">git</span> init
<span class="token function">git</span> pull <span class="token operator">&lt;</span>S project path<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>tmp branch<span class="token operator">&gt;</span>
<span class="token function">git</span> remote <span class="token function">add</span> origin <span class="token operator">&lt;</span>S github<span class="token operator">&gt;</span>
<span class="token function">git</span> push origin <span class="token parameter variable">-u</span> master
</code></pre></div><p>清理原项目中的子项目数据</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> P project
<span class="token function">git</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> 
<span class="token function">git</span> commit <span class="token parameter variable">-m</span>
<span class="token function">git</span> branch <span class="token parameter variable">-D</span> 
</code></pre></div><p>在新项目中添加subtree</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> subtree <span class="token function">add</span> <span class="token parameter variable">--prefix</span><span class="token operator">=</span><span class="token operator">&lt;</span>s project path<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>s project url<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span> <span class="token parameter variable">--squash</span>
<span class="token function">git</span> push origin master
</code></pre></div><h2 id="其他操作"><a href="#其他操作" class="header-anchor">#</a> 其他操作</h2> <p><code>git fetch</code>：下载远程仓库的所有变动，可以将远程仓库下载到一个临时分支，然后再根据需要进行合并操作，<code>git fetch</code>命令和<code>git merge</code>命令可以看作是之前讲的<code>git pull</code>命令的分解动作。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> fetch origin master:temp
<span class="token function">git</span> merge temp
</code></pre></div><p><code>git push -f</code>：强制提交，完全以自己的提交为准，之前其他人的提交都会被覆盖，适用于pr被block之后重新提交，提交后不需要重新提pr.</p> <p><code>git rebase dev</code>：解决合并冲突。rebase之后如果有冲突，会进入临时变基分支，手动消除冲突之后在rebase</p> <p><code>git checkou branch</code>: 切换分支</p> <p><code>git checkou -b｜B branch</code>: 创建新分支并切换到该分支</p> <p><code>git checkout -- a.txt</code> ： 将文件迁出修改到上一次提交的内容</p> <p><code>git checkout commit_id -- a.txt</code> ： 将文件迁出修改到指定的提交历史中某次提交的内容</p> <p><code>git checkout branch -- a.txt</code>：将文件迁出修改到指定分支的该文件的内容</p> <p><code>git checkout -- *.txt</code>将根目录下所有指定后缀的文件都迁出</p> <p><code>git checkout -- *.txt</code>将根目录下所有指定目录的文件都迁出</p> <p><code>git diff</code>：常用于比较工作区和仓库、暂存区与仓库、两个分支之间有什么差别。</p> <p><code>git diff --cached</code>：查看有add但没有commit的改动</p> <p><code>git diff HEAD</code>:是上面两条命令的合并</p> <p><code>git stash</code>：将当前工作区和暂存区发生的变动放到一个临时的区域，让工作区变干净。这个命令适用于手头工作还没有提交，但是突然有一个更为紧急的任务（如线上bug需要修正）需要去处理的场景。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> stash <span class="token comment">## 保存当前的工作进度，会把暂存区和工作区的改动保存起来，使用git stash sava ‘message’ 添加一些注释</span>
<span class="token function">git</span> stash list <span class="token comment">## 显示保存进度的列表，git stash可以执行多次</span>
<span class="token comment">## 通过git stash pop命令恢复进度后，会删除当前进度。</span>
<span class="token function">git</span> stash pop <span class="token comment">## 恢复最新的进度到工作区，git默认会把工作区和暂存区的改动都恢复到工作区</span>
<span class="token function">git</span> stash pop <span class="token parameter variable">--index</span> <span class="token comment">## 恢复最新的进度到工作区和暂存区</span>
<span class="token function">git</span> stash pop stash@<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token comment">## 恢复指定的进度到工作区，stash_id为通过git stash list命令得到的</span>
<span class="token function">git</span> stash apply <span class="token comment">##恢复最新的进度到工作区，除了不删除恢复的进度外，其他和git stash pop命令一样</span>
<span class="token function">git</span> stash drop <span class="token punctuation">[</span>stash_id<span class="token punctuation">]</span> <span class="token comment">## 删除一个存储的进度，如果不执行stash_id则默认保存最新的存储进度</span>
<span class="token function">git</span> stash <span class="token function">clear</span> <span class="token comment">## 删除所有存储进度</span>
</code></pre></div><p><code>git reset</code>：回退到指定的版本。</p> <p><code>git revert</code>：撤回提交信息。</p> <p><code>git cherry-pick</code>：挑选某个分支的提交并作为一个新的提交引入到你当前分支上。</p> <p>默认cherry-pick只挑选单次的commit，如果想转移多个commit，使用命令git cherry-pick commitid1...commitid100</p> <p>...命令默认不包含第一个commit id，如果你想包含第一个commit，也就是闭区间，使用git cherry-pick A^...B</p> <p>Cherry-pick的过程中如果有冲突，需要先修改冲突文件，再git add .，然后继续执行git cherry-pick --continue</p> <p>在任何阶段都可以执行<code>git cherry-pick --abort</code>放弃本次cherry-pick</p> <p><code>git tag</code>：经常用于查看或新增一个标签。</p> <p><code>git rebase</code>：分支变基，多用于合并commit和重新合并master分支的代码</p> <p>如果一次开发提交过多commit，会有很多弊端：</p> <p>1.不利于代码review：如果做一个很小的功能有很多commit，会很多。</p> <p>2.会造成分支污染：如果项目充满了无用的commit，有一天项目出现紧急问题需要回滚代码，却发现海量commit，会很崩溃</p> <p>合并最近四次commit</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> rebase <span class="token parameter variable">-i</span> HEAD~4
</code></pre></div><p>rebase之后进入vim模式，把不需要的commit前面的pick改为squash就可以</p> <p>合并其他分支</p> <p>每次开发完都要先在master分支下拉取别的同事的远程代码，然后当前分支对master分支进行合并才不会冲突</p> <p>具体操作</p> <div class="language-shell extra-class"><pre class="language-shell"><code>git:<span class="token punctuation">(</span>feature1<span class="token punctuation">)</span>:git rebase master
</code></pre></div><p>执行命令后：</p> <p>首先git会把feature1分支里面的每个commit取消掉</p> <p>然后把上面的操作临时保存成一个patch文件，存在<code>.git/rebase</code>目录下</p> <p>然后把feature1分支更新到最新的master分支下</p> <p>最后把上面保存的patch文件应用到feature1分支上</p> <p>出现冲突时需要先解决冲突，然后执行命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> rebase <span class="token parameter variable">--continue</span>
</code></pre></div><p>在任何时候都可以随时取消rebase操作</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> rebase <span class="token parameter variable">--abort</span>
</code></pre></div><p><code>git alias</code>可以配置命令的别名，简化命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> alias.co checkout
<span class="token function">git</span> config <span class="token parameter variable">--global</span> alias.ci commit
<span class="token function">git</span> config <span class="token parameter variable">--global</span> alias.br branch

<span class="token function">git</span> ci <span class="token parameter variable">-m</span> <span class="token string">&quot;commit message&quot;</span>
</code></pre></div><p>查看文件修改历史</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> log <span class="token parameter variable">--follow</span> <span class="token parameter variable">-p</span> 想要查看的文件
</code></pre></div><h2 id="worktree"><a href="#worktree" class="header-anchor">#</a> worktree</h2> <p>在大型软件开发过程中可能经常需要维护一个古老的分支，比如三年前的分支，当然 git 允许你每个分支维护一个版本，但是切换 branch 的成本太高，尤其是当代码变动很大的时候，有可能改变了项目结构，甚至可能变更了 build system，如果切换 branch，IDE 可能需要花费大量的时间来重新索引和设置。</p> <p>但是通过 worktree, 可以避免频繁的切换分支，将老的分支 checkout 到单独的文件夹中作为 worktree，每一个分支都可以有一个独立的 IDE 工程。当然像过去一样你也可以在磁盘上 clone 这个 repo 很多次，但这意味着很多硬盘空间的浪费，甚至需要在不同的仓库中拉取相同的变更很多次。</p> <p>回到原来的问题，使用 git worktree 确实能够解决最上面提及的问题。</p> <p>git worktree 的命令只有几行非常容易记住</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> worktree <span class="token function">add</span> <span class="token punctuation">..</span>/new-dir some-existing-branch
<span class="token function">git</span> worktree <span class="token function">add</span> <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">[</span>branch<span class="token punctuation">]</span>
</code></pre></div><p>这行命令将在 new-dir 目录中将 some-existing-branch 中的内容 check out 出来，就像在该目录中 clone 了一份新代码一样。新的文件地址可以在文件系统中的任何位置，但是注意千万不要将目录放到主仓库中。在此之后新目录中的内容就可以和主仓库中的内容一样，新建分支，push 到远端。</p> <p>当工作结束后可以直接删除该目录，然后运行 <code>git worktree prune</code>.</p> <p>git worktree 非常适合大型项目又需要维护多个分支，想要避免来回切换的情况，这里总结一些优点：</p> <ul><li>git worktree 可以快速进行并行开发，同一个项目多个分支同时并行演进</li> <li>git worktree 的提交可以在同一个项目中共享</li> <li>git worktree 和单独 clone 项目相比，节省了硬盘空间，又因为 git worktree 使用 hard link 实现，要远远快于 clone</li></ul> <h2 id="pr与mr"><a href="#pr与mr" class="header-anchor">#</a> pr与mr</h2> <p>合并代码的操作在github中叫pr，在gitlab中成为mr，本质上都是合并代码</p> <p>GitHub pr</p> <p>强制push之后pr不能重开</p> <h2 id="git-alias"><a href="#git-alias" class="header-anchor">#</a> Git Alias</h2> <p>开启zsh git plugin之后，会获得一群好用的git alias</p> <h2 id="gitflow"><a href="#gitflow" class="header-anchor">#</a> Gitflow</h2> <p>进入本地文件夹，打开Git bash,</p> <p>执行指令进行初始化，会在原始文件夹中生成一个隐藏的文件夹.git</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> .git//删掉原来的.git目录
$ <span class="token function">git</span> init
</code></pre></div><p>将文件添加到本地仓库,运行命令：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span> 
</code></pre></div><p>输入本次提交说明</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;layout&quot;</span>
</code></pre></div><p>将本地仓库与远程仓库相关联，</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/CongliYin/CSS.git
</code></pre></div><p>如果出现错误：fatal: remote origin already exists，则执行以下语句：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> remote <span class="token function">rm</span> origin
</code></pre></div><p>执行上传命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> push origin master
</code></pre></div><p>新建远程仓库需要添加-u参数</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> push <span class="token parameter variable">-u</span> origin master
</code></pre></div><p>如果出现错误failed to push som refs to…….，则执行以下语句，先把远程服务器github上面的文件拉先来，再push 上去。：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> pull origin master
</code></pre></div><p>如果出现错误fatal: refusing to merge unrelated histories，后面加上--allow-unrelated-histories</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> pull origin master --allow-unrelated-histories
</code></pre></div><p>特别注意：执行命令后，git会弹出一个GitHub登陆的小界面，你登录成功后要求你输入用户名和密码。这里的密码并不是你的GitHub的密码或者本地git的密码。<strong>而是GitHub的Personal access tokens</strong></p> <p>https://github.com/settings/tokens</p> <h3 id="错误"><a href="#错误" class="header-anchor">#</a> 错误</h3> <p>GitHub pull之后有冲突</p> <p>尚未完成合并(MERGE_HEAD存在)？</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> .git/MERGE*
</code></pre></div><p>或者</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> merge <span class="token parameter variable">--quit</span>
</code></pre></div><h2 id="git-hooks"><a href="#git-hooks" class="header-anchor">#</a> Git Hooks</h2> <h2 id="更新不了代码"><a href="#更新不了代码" class="header-anchor">#</a> 更新不了代码</h2> <p>代码加入本地仓库后，上传后显示everything -up-date，但是远程仓库没有更新</p> <p>先创建新分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch newbranch
</code></pre></div><p>检查分支创建是否成功</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch
</code></pre></div><p>此时输出</p> <div class="language-shell extra-class"><pre class="language-shell"><code>* master
  newbranch
</code></pre></div><p>切换到新创建的分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> checkout newbranch
</code></pre></div><p>将改动提交到新分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit <span class="token parameter variable">-a</span>
</code></pre></div><p>回到主分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> checkout master
</code></pre></div><p>将新分支与原分支合并</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> merge newbranch 
</code></pre></div><p>正常合并没有冲突，如果产生冲突，查看冲突文件修改后再一次提交</p> <div class="language-git extra-class"><pre class="language-git"><code>git diff
</code></pre></div><p>解决后就正常提交</p> <div class="language-git extra-class"><pre class="language-git"><code>git push -u origin master
</code></pre></div><p>删除分支</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch <span class="token parameter variable">-d</span> newbranch
</code></pre></div><h2 id="检查版本信息"><a href="#检查版本信息" class="header-anchor">#</a> 检查版本信息</h2> <p>查看远程仓库信息</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> remote <span class="token parameter variable">-v</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> status
</code></pre></div><p>检查文件或者文件夹在工作区或暂存区的状态，有三种</p> <p>文件已经从工作区add到暂存区，git restore --staged filename</p> <p>文件在工作区、暂存区都有，并且在工作区进行了修改或删除，没有add到暂存区</p> <p>git add file</p> <p>文件只在工作区</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> checkout -- <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>
</code></pre></div><p>拉取暂存区文件为工作区文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> log
</code></pre></div><p>git log 会按提交时间列出所有的更新，最近的更新排在最上面</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">open</span>
</code></pre></div><p>在git目录输入git open就能打开github对于的页面</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> git-open
</code></pre></div><p>将本地仓库文件撤回至工作区</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reset <span class="token parameter variable">--hard</span>
<span class="token function">git</span> reser <span class="token parameter variable">--mixed</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> revert HEAD
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> fetch origin
</code></pre></div><p>创建并更新远程分支，并拉取代码到origin，一般默认是master</p> <p>git pull可以认为是git fetch和git merge的组合体</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> rebase origin/master
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">diff</span>
</code></pre></div><p>git-diff能在命令行显示当前代码与上次提交时代码的修改，可以逐行见检查代码</p> <h2 id="代码检查"><a href="#代码检查" class="header-anchor">#</a> 代码检查</h2> <h3 id="husky"><a href="#husky" class="header-anchor">#</a> husky</h3> <p>使用husky</p> <p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> husky <span class="token parameter variable">-D</span>
</code></pre></div><p>编辑package。json 》 prepare 脚本并且运行</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> set-script prepare <span class="token string">&quot;husky install&quot;</span> 
<span class="token function">npm</span> run prepare
</code></pre></div><p>添加钩子函数</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npm test&quot;</span>
<span class="token function">git</span> <span class="token function">add</span> ./husky/pre-commit
</code></pre></div><p>然后提交commit就会检查</p> <p>如果不想检查使用no-verify</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">''</span> --no-verify
<span class="token comment">## git commit -n -m ''</span>
</code></pre></div><p>如果husky报错，可以使用husky-init</p> <div class="language-shell extra-class"><pre class="language-shell"><code>npx husky-init
</code></pre></div><h3 id="commitizen"><a href="#commitizen" class="header-anchor">#</a> commitizen</h3> <p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcommitizen%2Fcz-cli" target="_blank" rel="noopener noreferrer">commitizen/cz-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个可以实现规范的<strong>提交说明</strong>的工具</p> <p>提供选择的提交信息类别，快速生成<strong>提交说明</strong>。安装cz工具</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> commitizen
</code></pre></div><p>如果需要在项目中使用<strong>commitizen</strong>生成符合AngularJS规范的<strong>提交说明</strong>，初始化<strong>cz-conventional-changelog</strong>适配器</p> <div class="language-shell extra-class"><pre class="language-shell"><code>commitizen init cz-conventional-changelog <span class="token parameter variable">--save</span> --save-exact
</code></pre></div><p>初始化命令主要进行了3件事情</p> <ol><li>在项目中安装<strong>cz-conventional-changelog</strong> 适配器依赖</li> <li>将适配器依赖保存到<code>package.json</code>的<code>devDependencies</code>字段信息</li> <li>在<code>package.json</code>中新增<code>config.commitizen</code>字段信息，主要用于配置cz工具的适配器路径：</li></ol> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token property">&quot;cz-conventional-changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.1.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-conventional-changelog&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果想定制项目的<strong>提交说明</strong>，可以使用<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fleonardoanalista%2Fcz-customizable" target="_blank" rel="noopener noreferrer">cz-customizable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>适配器</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> cz-customizable --save-dev
</code></pre></div><p>将之前符合Angular规范的<strong>cz-conventional-changelog</strong>适配器路径改成<strong>cz-customizable</strong>适配器路径</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;cz-customizable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.3.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/cz-customizable&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>官方提供了一个<code>.cz-config.js</code>示例文件<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fleonardoanalista%2Fcz-customizable%2Fblob%2Fmaster%2Fcz-config-EXAMPLE.js" target="_blank" rel="noopener noreferrer">cz-config-EXAMPLE.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

  <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'特性'</span><span class="token punctuation">,</span>     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'特性:    一个新的特性'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'修复'</span><span class="token punctuation">,</span>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'修复:    修复一个Bug'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'文档'</span><span class="token punctuation">,</span>     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'文档:    变更的只有文档'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'格式'</span><span class="token punctuation">,</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'格式:    空格, 分号等格式修复'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'重构'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'重构:    代码重构，注意和特性、修复区分开'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'性能'</span><span class="token punctuation">,</span>     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'性能:    提升性能'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'测试'</span><span class="token punctuation">,</span>     <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'测试:    添加一个测试'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'工具'</span><span class="token punctuation">,</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'工具:    开发工具变动(构建、脚手架工具等)'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'回滚'</span><span class="token punctuation">,</span>   <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'回滚:    代码回退'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token literal-property property">scopes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'模块1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'模块2'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'模块3'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'模块4'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// it needs to match the value for field type. Eg.: 'fix'</span>
  <span class="token comment">/*
  scopeOverrides: {
    fix: [
      {name: 'merge'},
      {name: 'style'},
      {name: 'e2eTest'},
      {name: 'unitTest'}
    ]
  },
  */</span>
  <span class="token comment">// override the messages, defaults are as follows</span>
  <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'选择一种你的提交类型:'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">'选择一个scope (可选):'</span><span class="token punctuation">,</span>
    <span class="token comment">// used if allowCustomScopes is true</span>
    <span class="token literal-property property">customScope</span><span class="token operator">:</span> <span class="token string">'Denote the SCOPE of this change:'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'短说明:\n'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">'长说明，使用&quot;|&quot;换行(可选)：\n'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">breaking</span><span class="token operator">:</span> <span class="token string">'非兼容性说明 (可选):\n'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token string">'关联关闭的issue，例如：#31, #34(可选):\n'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">confirmCommit</span><span class="token operator">:</span> <span class="token string">'确定提交说明?'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">allowCustomScopes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">allowBreakingChanges</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'特性'</span><span class="token punctuation">,</span> <span class="token string">'修复'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// limit subject length</span>
  <span class="token literal-property property">subjectLimit</span><span class="token operator">:</span> <span class="token number">100</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> commitLint</h3> <p>校验提交说明是否符合规范，安装校验工具<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmarionebl%2Fcommitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @commitlint/cli
</code></pre></div><p>安装符合Angular风格的校验规则</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @commitlint/config-conventional 
</code></pre></div><p>在项目中新建<code>commitlint.config.js</code>文件并设置校验规则</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果是使用<strong>cz-customizable</strong>适配器做了破坏Angular风格的提交说明配置，那么不能使用**@commitlint/config-conventional**规则进行提交说明校验，可以使用<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwhizark%2Fcommitlint-config-cz" target="_blank" rel="noopener noreferrer">commitlint-config-cz<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对定制化提交说明进行校验</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> commitlint-config-cz --save-dev
</code></pre></div><p>然后加入commitlint校验规则配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'cz'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>Validate-commit-msg</p> <p>除了使用<strong>commitlint</strong>校验工具，也可以使用<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FFrikki%2Fvalidate-commit-message" target="_blank" rel="noopener noreferrer">validate-commit-msg<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>校验工具对cz提交说明是否符合Angular规范进行校验。</p> <p>commitizen日志</p> <p>如果使用了<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fcommitizen%2Fcz-cli" target="_blank" rel="noopener noreferrer">cz<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>工具集，配套<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fconventional-changelog%2Fconventional-changelog%2Ftree%2Fmaster%2Fpackages%2Fconventional-changelog" target="_blank" rel="noopener noreferrer">conventional-changelog<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可以快速生成开发日志</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> conventional-changelog <span class="token parameter variable">-D</span>
</code></pre></div><p>在<code>pacage.json</code>中加入生成日志命令</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md&quot;</span>
</code></pre></div><p>执行<code>npm run version</code>后可查看生产的日志<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fziyi2%2Fcz-example%2Fblob%2Fmaster%2FCHANGELOG.md" target="_blank" rel="noopener noreferrer">CHANGELOG.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="查看commit时间分布"><a href="#查看commit时间分布" class="header-anchor">#</a> 查看commit时间分布</h2> <p>在项目目录下执行</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> https://fastly.jsdelivr.net/gh/hellodigua/code996/bin/code996.sh <span class="token operator">|</span> <span class="token function">bash</span>
</code></pre></div><p>就能查看项目</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3979e060.js" defer></script><script src="/assets/js/2.0f8cbb55.js" defer></script><script src="/assets/js/1.ff82b27c.js" defer></script><script src="/assets/js/86.0a93f933.js" defer></script>
  </body>
</html>
